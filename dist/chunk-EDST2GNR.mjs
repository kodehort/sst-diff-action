import{c as ac,e as oc,g as De,h as Ut,j as Id,k as Nd,l as uc,m as Ld,n as Rd,o as Pd,p as Cd,s as pc,t as fc,u as Md,v as Dd,w as rs,x as jd}from"./chunk-3PEVV4HI.mjs";import{c as ts}from"./chunk-R6PYGTER.mjs";import{a as ur}from"./chunk-SUBS3TDM.mjs";import{a as cc,b as lc,c as Et,d as $d}from"./chunk-ISPMX3VH.mjs";import{b as ns,c as Fd}from"./chunk-THC7OU5T.mjs";import{a as T,b as Od,c as x,d as Ad,e as K,f as Td}from"./chunk-7S7IXY6P.mjs";var gc=x(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.obtainEcrCredentials=Oe.fetchDockerLoginCredentials=Oe.cdkCredentialsConfig=Oe.cdkCredentialsConfigFile=void 0;var qd=T("fs"),hc=T("os"),Bd=T("path");function dc(){return process.env.CDK_DOCKER_CREDS_FILE??Bd.join((hc.userInfo().homedir??hc.homedir()).trim()||"/",".cdk","cdk-docker-creds.json")}Oe.cdkCredentialsConfigFile=dc;var is;function Ud(){if(!is)try{is=JSON.parse(qd.readFileSync(dc(),{encoding:"utf-8"}))}catch{}return is}Oe.cdkCredentialsConfig=Ud;async function zd(t,e,n){n=n.includes("://")?n:`https://${n}`;let r=new URL(n).hostname;if(!Object.keys(e.domainCredentials).includes(r)&&!Object.keys(e.domainCredentials).includes(n))throw new Error(`unknown domain ${r}`);let i=e.domainCredentials[r]??e.domainCredentials[n];if(i.secretsManagerSecretId){let a=await(await t.secretsManagerClient({assumeRoleArn:i.assumeRoleArn})).getSecretValue({SecretId:i.secretsManagerSecretId}).promise();if(!a.SecretString)throw new Error(`unable to fetch SecretString from secret: ${i.secretsManagerSecretId}`);let o=JSON.parse(a.SecretString),c=i.secretsUsernameField??"username",l=i.secretsPasswordField??"secret";if(!o[c]||!o[l])throw new Error(`malformed secret string ("${c}" or "${l}" field missing)`);return{Username:o[c],Secret:o[l]}}else if(i.ecrRepository){let s=await t.ecrClient({assumeRoleArn:i.assumeRoleArn}),a=await mc(s);return{Username:a.username,Secret:a.password}}else throw new Error("unknown credential type: no secret ID or ECR repo")}Oe.fetchDockerLoginCredentials=zd;async function mc(t,e){e&&e("Fetching ECR authorization token");let n=(await t.getAuthorizationToken({}).promise()).authorizationData||[];if(n.length===0)throw new Error("No authorization data received from ECR");let r=Buffer.from(n[0].authorizationToken,"base64").toString("ascii"),[i,s]=r.split(":");if(!i||!s)throw new Error("unexpected ECR authData format");return{username:i,password:s,endpoint:n[0].proxyEndpoint}}Oe.obtainEcrCredentials=mc});var fr=x(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.shell=void 0;var Yd=T("child_process");async function Vd(t,e={}){e.logger&&e.logger(yc(t));let n=Yd.spawn(t[0],t.slice(1),{...e,stdio:[e.input?"pipe":"ignore","pipe","pipe"]});return new Promise((r,i)=>{e.input&&(n.stdin.write(e.input),n.stdin.end());let s=new Array,a=new Array;n.stdout.on("data",o=>{e.quiet||process.stdout.write(o),s.push(o)}),n.stderr.on("data",o=>{e.quiet||process.stderr.write(o),a.push(o)}),n.once("error",i),n.once("close",(o,c)=>{if(o===0)r(Buffer.concat(s).toString("utf-8"));else{let l=Buffer.concat(a).toString("utf-8").trim();i(new ss(o,c,`${yc(t)} exited with ${o!=null?"error code":"signal"} ${o??c}: ${l}`))}})})}pr.shell=Vd;var ss=class extends Error{constructor(e,n,r){super(r),this.exitCode=e,this.signal=n,this.code="PROCESS_FAILED"}};function yc(t){return process.platform!=="win32"?vc(t,wc(" ","\\","!",'"',"'","&","$"),Gd):vc(t,wc(" ",'"',"&","^","%"),Hd)}function vc(t,e,n){return t.map(r=>e(r)?n(r):r).join(" ")}function wc(...t){return e=>t.some(n=>e.indexOf(n)!==-1)}function Gd(t){return t=t.replace("'",`'"'"'`),`'${t}'`}function Hd(t){t=`"${t}"`;let e=new Set(['"',"&","^","%"]);return t.split("").map(n=>e.has(t)?"^"+n:n).join("")}});var bc=x(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.createCriticalSection=void 0;function Wd(){let t=Promise.resolve();return async e=>{let n=t.then(()=>e());return t=n.catch(r=>r),n}}hr.createCriticalSection=Wd});var _c=x(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.DockerFactory=zt.Docker=void 0;var xc=T("fs"),Kd=T("os"),dr=T("path"),Ec=gc(),Qd=fr(),Zd=bc(),mr;(function(t){t[t.Docker=1]="Docker",t[t.Podman=125]="Podman"})(mr||(mr={}));var En=class{constructor(e){this.logger=e,this.configDir=void 0}async exists(e){try{return await this.execute(["inspect",e],{quiet:!0}),!0}catch(n){let r=n;if(r.code!=="PROCESS_FAILED")throw r;switch(r.exitCode){case mr.Docker:case mr.Podman:return!1;default:throw r}}}async build(e){let n=["build",...Sc(Object.entries(e.buildArgs||{}).map(([r,i])=>["--build-arg",`${r}=${i}`])),...Sc(Object.entries(e.buildSecrets||{}).map(([r,i])=>["--secret",`id=${r},${i}`])),"--tag",e.tag,...e.target?["--target",e.target]:[],...e.file?["--file",e.file]:[],...e.networkMode?["--network",e.networkMode]:[],...e.platform?["--platform",e.platform]:[],...e.outputs?e.outputs.map(r=>[`--output=${r}`]):[],...e.cacheFrom?[...e.cacheFrom.map(r=>["--cache-from",this.cacheOptionToFlag(r)]).flat()]:[],...e.cacheTo?["--cache-to",this.cacheOptionToFlag(e.cacheTo)]:[],"."];await this.execute(n,{cwd:e.directory})}async login(e){let n=await(0,Ec.obtainEcrCredentials)(e);await this.execute(["login","--username",n.username,"--password-stdin",n.endpoint],{input:n.password,quiet:!0})}async tag(e,n){await this.execute(["tag",e,n])}async push(e){await this.execute(["push",e])}configureCdkCredentials(){let e=(0,Ec.cdkCredentialsConfig)();if(!e)return!1;this.configDir=xc.mkdtempSync(dr.join(Kd.tmpdir(),"cdkDockerConfig"));let r=Object.keys(e.domainCredentials).reduce((i,s)=>(i[s]="cdk-assets",i),{});return xc.writeFileSync(dr.join(this.configDir,"config.json"),JSON.stringify({credHelpers:r}),{encoding:"utf-8"}),!0}resetAuthPlugins(){this.configDir=void 0}async execute(e,n={}){var s;let r=this.configDir?["--config",this.configDir]:[],i=dr.resolve(__dirname,"..","..","bin");try{await(0,Qd.shell)([Jd(),...r,...e],{logger:this.logger,...n,env:{...process.env,...n.env,PATH:`${i}${dr.delimiter}${((s=n.env)==null?void 0:s.PATH)??process.env.PATH}`}})}catch(a){throw a.code==="ENOENT"?new Error("Unable to execute 'docker' in order to build a container asset. Please install 'docker' and try again."):a}}cacheOptionToFlag(e){let n=`type=${e.type}`;return e.params&&(n+=","+Object.entries(e.params).map(([r,i])=>`${r}=${i}`).join(",")),n}};zt.Docker=En;var as=class{constructor(){this.enterLoggedInDestinationsCriticalSection=(0,Zd.createCriticalSection)(),this.loggedInDestinations=new Set}async forBuild(e){let n=new En(e.logger);return n.configureCdkCredentials()||await this.loginOncePerDestination(n,e),n}async forEcrPush(e){let n=new En(e.logger);return await this.loginOncePerDestination(n,e),n}async loginOncePerDestination(e,n){let r=n.repoUri.split("/")[0];await this.enterLoggedInDestinationsCriticalSection(async()=>{this.loggedInDestinations.has(r)||(await e.login(n.ecr),this.loggedInDestinations.add(r))})}};zt.DockerFactory=as;function Jd(){return process.env.CDK_DOCKER??"docker"}function Sc(t){return Array.prototype.concat([],...t)}});var _n=x(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.EventType=void 0;var Xd;(function(t){t.START="start",t.SUCCESS="success",t.FAIL="fail",t.CHECK="check",t.FOUND="found",t.CACHED="cached",t.BUILD="build",t.UPLOAD="upload",t.DEBUG="debug"})(Xd=Sn.EventType||(Sn.EventType={}))});var os=x(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.replaceAwsPlaceholders=void 0;var em=Ut();async function tm(t,e){let n=async()=>{let i=await e.discoverPartition();return n=()=>Promise.resolve(i),i},r=async()=>{let i=await e.discoverCurrentAccount();return r=()=>Promise.resolve(i),i};return em.EnvironmentPlaceholders.replaceAsync(t,{async region(){return t.region??e.discoverDefaultRegion()},async accountId(){return(await r()).accountId},async partition(){return n()}})}gr.replaceAwsPlaceholders=tm});var kc=x(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.ContainerImageAssetHandler=void 0;var nm=T("path"),Ke=_n(),rm=os(),im=fr(),cs=class{constructor(e,n,r){this.workDir=e,this.asset=n,this.host=r}async build(){let e=await this.initOnce();if(e.destinationAlreadyExists||this.host.aborted)return;let n=await this.host.dockerFactory.forBuild({repoUri:e.repoUri,logger:s=>this.host.emitMessage(Ke.EventType.DEBUG,s),ecr:e.ecr}),i=await new ls(n,this.workDir,this.asset,this.host).build();i===void 0||this.host.aborted||this.host.aborted||await n.tag(i,e.imageUri)}async publish(){let e=await this.initOnce();if(e.destinationAlreadyExists||this.host.aborted)return;let n=await this.host.dockerFactory.forEcrPush({repoUri:e.repoUri,logger:r=>this.host.emitMessage(Ke.EventType.DEBUG,r),ecr:e.ecr});this.host.aborted||(this.host.emitMessage(Ke.EventType.UPLOAD,`Push ${e.imageUri}`),await n.push(e.imageUri))}async initOnce(){if(this.init)return this.init;let e=await(0,rm.replaceAwsPlaceholders)(this.asset.destination,this.host.aws),n=await this.host.aws.ecrClient(e),r=async()=>{var a;return(a=await this.host.aws.discoverCurrentAccount())==null?void 0:a.accountId},i=await am(n,e.repositoryName);if(!i)throw new Error(`No ECR repository named '${e.repositoryName}' in account ${await r()}. Is this account bootstrapped?`);let s=`${i}:${e.imageTag}`;return this.init={imageUri:s,ecr:n,repoUri:i,destinationAlreadyExists:await this.destinationAlreadyExists(n,e,s)},this.init}async destinationAlreadyExists(e,n,r){return this.host.emitMessage(Ke.EventType.CHECK,`Check ${r}`),await sm(e,n.repositoryName,n.imageTag)?(this.host.emitMessage(Ke.EventType.FOUND,`Found ${r}`),!0):!1}};yr.ContainerImageAssetHandler=cs;var ls=class{constructor(e,n,r,i){this.docker=e,this.workDir=n,this.asset=r,this.host=i}async build(){return this.asset.source.executable?this.buildExternalAsset(this.asset.source.executable):this.buildDirectoryAsset()}async buildDirectoryAsset(){let e=`cdkasset-${this.asset.id.assetId.toLowerCase()}`;if(!await this.isImageCached(e)){if(this.host.aborted)return;await this.buildImage(e)}return e}async buildExternalAsset(e,n){let r=n??this.workDir;if(this.host.emitMessage(Ke.EventType.BUILD,`Building Docker image using command '${e}'`),!this.host.aborted)return(await(0,im.shell)(e,{cwd:r,quiet:!0})).trim()}async buildImage(e){let n=this.asset.source;if(!n.directory)throw new Error(`'directory' is expected in the DockerImage asset source, got: ${JSON.stringify(n)}`);let r=nm.resolve(this.workDir,n.directory);this.host.emitMessage(Ke.EventType.BUILD,`Building Docker image at ${r}`),await this.docker.build({directory:r,tag:e,buildArgs:n.dockerBuildArgs,buildSecrets:n.dockerBuildSecrets,target:n.dockerBuildTarget,file:n.dockerFile,networkMode:n.networkMode,platform:n.platform,outputs:n.dockerOutputs,cacheFrom:n.cacheFrom,cacheTo:n.cacheTo})}async isImageCached(e){return await this.docker.exists(e)?(this.host.emitMessage(Ke.EventType.CACHED,`Cached ${e}`),!0):!1}};async function sm(t,e,n){try{return await t.describeImages({repositoryName:e,imageIds:[{imageTag:n}]}).promise(),!0}catch(r){if(r.code!=="ImageNotFoundException")throw r;return!1}}async function am(t,e){var n;try{return(n=((await t.describeRepositories({repositoryNames:[e]}).promise()).repositories||[])[0])==null?void 0:n.repositoryUri}catch(r){if(r.code!=="RepositoryNotFoundException")throw r;return}}});var Ac=x((l_,Oc)=>{"use strict";function vr(){this._types=Object.create(null),this._extensions=Object.create(null);for(let t=0;t<arguments.length;t++)this.define(arguments[t]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}vr.prototype.define=function(t,e){for(let n in t){let r=t[n].map(function(i){return i.toLowerCase()});n=n.toLowerCase();for(let i=0;i<r.length;i++){let s=r[i];if(s[0]!=="*"){if(!e&&s in this._types)throw new Error('Attempt to change mapping for "'+s+'" extension from "'+this._types[s]+'" to "'+n+'". Pass `force=true` to allow this, otherwise remove "'+s+'" from the list of extensions for "'+n+'".');this._types[s]=n}}if(e||!this._extensions[n]){let i=r[0];this._extensions[n]=i[0]!=="*"?i:i.substr(1)}}};vr.prototype.getType=function(t){t=String(t);let e=t.replace(/^.*[/\\]/,"").toLowerCase(),n=e.replace(/^.*\./,"").toLowerCase(),r=e.length<t.length;return(n.length<e.length-1||!r)&&this._types[n]||null};vr.prototype.getExtension=function(t){return t=/^\s*([^;\s]*)/.test(t)&&RegExp.$1,t&&this._extensions[t.toLowerCase()]||null};Oc.exports=vr});var Ic=x((u_,Tc)=>{Tc.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}});var Lc=x((p_,Nc)=>{Nc.exports={"application/prs.cww":["cww"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.sap.vds":["vds"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}});var Pc=x((f_,Rc)=>{"use strict";var om=Ac();Rc.exports=new om(Ic(),Lc())});var Mc=x((h_,Cc)=>{Cc.exports=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=e(t[r],r);cm(i)?n.push.apply(n,i):n.push(i)}return n};var cm=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}});var zc=x((d_,Uc)=>{var lm=Mc(),Dc=Ld();Uc.exports=fm;var Fc="\0SLASH"+Math.random()+"\0",$c="\0OPEN"+Math.random()+"\0",ps="\0CLOSE"+Math.random()+"\0",jc="\0COMMA"+Math.random()+"\0",qc="\0PERIOD"+Math.random()+"\0";function us(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function um(t){return t.split("\\\\").join(Fc).split("\\{").join($c).split("\\}").join(ps).split("\\,").join(jc).split("\\.").join(qc)}function pm(t){return t.split(Fc).join("\\").split($c).join("{").split(ps).join("}").split(jc).join(",").split(qc).join(".")}function Bc(t){if(!t)return[""];var e=[],n=Dc("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,s=n.post,a=r.split(",");a[a.length-1]+="{"+i+"}";var o=Bc(s);return s.length&&(a[a.length-1]+=o.shift(),a.push.apply(a,o)),e.push.apply(e,a),e}function fm(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Yt(um(t),!0).map(pm)):[]}function hm(t){return"{"+t+"}"}function dm(t){return/^-?0\d/.test(t)}function mm(t,e){return t<=e}function gm(t,e){return t>=e}function Yt(t,e){var n=[],r=Dc("{","}",t);if(!r||/\$$/.test(r.pre))return[t];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),a=i||s,o=r.body.indexOf(",")>=0;if(!a&&!o)return r.post.match(/,.*\}/)?(t=r.pre+"{"+r.body+ps+r.post,Yt(t)):[t];var c;if(a)c=r.body.split(/\.\./);else if(c=Bc(r.body),c.length===1&&(c=Yt(c[0],!1).map(hm),c.length===1)){var u=r.post.length?Yt(r.post,!1):[""];return u.map(function(M){return r.pre+c[0]+M})}var l=r.pre,u=r.post.length?Yt(r.post,!1):[""],p;if(a){var f=us(c[0]),h=us(c[1]),m=Math.max(c[0].length,c[1].length),b=c.length==3?Math.abs(us(c[2])):1,k=mm,S=h<f;S&&(b*=-1,k=gm);var y=c.some(dm);p=[];for(var v=f;k(v,h);v+=b){var w;if(s)w=String.fromCharCode(v),w==="\\"&&(w="");else if(w=String(v),y){var A=m-w.length;if(A>0){var q=new Array(A+1).join("0");v<0?w="-"+q+w.slice(1):w=q+w}}p.push(w)}}else p=lm(c,function(R){return Yt(R,!1)});for(var E=0;E<p.length;E++)for(var $=0;$<u.length;$++){var O=l+p[E]+u[$];(!e||a||O)&&n.push(O)}return n}});var xr=x((m_,Wc)=>{Wc.exports=fe;fe.Minimatch=ee;var kn=function(){try{return T("path")}catch{}}()||{sep:"/"};fe.sep=kn.sep;var ds=fe.GLOBSTAR=ee.GLOBSTAR={},ym=zc(),Yc={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},fs="[^/]",hs=fs+"*?",vm="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",wm="(?:(?!(?:\\/|^)\\.).)*?",Vc=bm("().*{}+?[]^$\\!");function bm(t){return t.split("").reduce(function(e,n){return e[n]=!0,e},{})}var Gc=/\/+/;fe.filter=xm;function xm(t,e){return e=e||{},function(n,r,i){return fe(n,t,e)}}function Qe(t,e){e=e||{};var n={};return Object.keys(t).forEach(function(r){n[r]=t[r]}),Object.keys(e).forEach(function(r){n[r]=e[r]}),n}fe.defaults=function(t){if(!t||typeof t!="object"||!Object.keys(t).length)return fe;var e=fe,n=function(i,s,a){return e(i,s,Qe(t,a))};return n.Minimatch=function(i,s){return new e.Minimatch(i,Qe(t,s))},n.Minimatch.defaults=function(i){return e.defaults(Qe(t,i)).Minimatch},n.filter=function(i,s){return e.filter(i,Qe(t,s))},n.defaults=function(i){return e.defaults(Qe(t,i))},n.makeRe=function(i,s){return e.makeRe(i,Qe(t,s))},n.braceExpand=function(i,s){return e.braceExpand(i,Qe(t,s))},n.match=function(r,i,s){return e.match(r,i,Qe(t,s))},n};ee.defaults=function(t){return fe.defaults(t).Minimatch};function fe(t,e,n){return br(e),n||(n={}),!n.nocomment&&e.charAt(0)==="#"?!1:new ee(e,n).match(t)}function ee(t,e){if(!(this instanceof ee))return new ee(t,e);br(t),e||(e={}),t=t.trim(),!e.allowWindowsEscape&&kn.sep!=="/"&&(t=t.split(kn.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}ee.prototype.debug=function(){};ee.prototype.make=Em;function Em(){var t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();var n=this.globSet=this.braceExpand();e.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,n),n=this.globParts=n.map(function(r){return r.split(Gc)}),this.debug(this.pattern,n),n=n.map(function(r,i,s){return r.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(r){return r.indexOf(!1)===-1}),this.debug(this.pattern,n),this.set=n}ee.prototype.parseNegate=Sm;function Sm(){var t=this.pattern,e=!1,n=this.options,r=0;if(!n.nonegate){for(var i=0,s=t.length;i<s&&t.charAt(i)==="!";i++)e=!e,r++;r&&(this.pattern=t.substr(r)),this.negate=e}}fe.braceExpand=function(t,e){return Hc(t,e)};ee.prototype.braceExpand=Hc;function Hc(t,e){return e||(this instanceof ee?e=this.options:e={}),t=typeof t>"u"?this.pattern:t,br(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:ym(t)}var _m=1024*64,br=function(t){if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>_m)throw new TypeError("pattern is too long")};ee.prototype.parse=km;var wr={};function km(t,e){br(t);var n=this.options;if(t==="**")if(n.noglobstar)t="*";else return ds;if(t==="")return"";var r="",i=!!n.nocase,s=!1,a=[],o=[],c,l=!1,u=-1,p=-1,f=t.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",h=this;function m(){if(c){switch(c){case"*":r+=hs,i=!0;break;case"?":r+=fs,i=!0;break;default:r+="\\"+c;break}h.debug("clearStateChar %j %j",c,r),c=!1}}for(var b=0,k=t.length,S;b<k&&(S=t.charAt(b));b++){if(this.debug("%s	%s %s %j",t,b,r,S),s&&Vc[S]){r+="\\"+S,s=!1;continue}switch(S){case"/":return!1;case"\\":m(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,b,r,S),l){this.debug("  in class"),S==="!"&&b===p+1&&(S="^"),r+=S;continue}h.debug("call clearStateChar %j",c),m(),c=S,n.noext&&m();continue;case"(":if(l){r+="(";continue}if(!c){r+="\\(";continue}a.push({type:c,start:b-1,reStart:r.length,open:Yc[c].open,close:Yc[c].close}),r+=c==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",c,r),c=!1;continue;case")":if(l||!a.length){r+="\\)";continue}m(),i=!0;var y=a.pop();r+=y.close,y.type==="!"&&o.push(y),y.reEnd=r.length;continue;case"|":if(l||!a.length||s){r+="\\|",s=!1;continue}m(),r+="|";continue;case"[":if(m(),l){r+="\\"+S;continue}l=!0,p=b,u=r.length,r+=S;continue;case"]":if(b===p+1||!l){r+="\\"+S,s=!1;continue}var v=t.substring(p+1,b);try{RegExp("["+v+"]")}catch{var w=this.parse(v,wr);r=r.substr(0,u)+"\\["+w[0]+"\\]",i=i||w[1],l=!1;continue}i=!0,l=!1,r+=S;continue;default:m(),s?s=!1:Vc[S]&&!(S==="^"&&l)&&(r+="\\"),r+=S}}for(l&&(v=t.substr(p+1),w=this.parse(v,wr),r=r.substr(0,u)+"\\["+w[0],i=i||w[1]),y=a.pop();y;y=a.pop()){var A=r.slice(y.reStart+y.open.length);this.debug("setting tail",r,y),A=A.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(ic,sc,es){return es||(es="\\"),sc+sc+es+"|"}),this.debug(`tail=%j
   %s`,A,A,y,r);var q=y.type==="*"?hs:y.type==="?"?fs:"\\"+y.type;i=!0,r=r.slice(0,y.reStart)+q+"\\("+A}m(),s&&(r+="\\\\");var E=!1;switch(r.charAt(0)){case"[":case".":case"(":E=!0}for(var $=o.length-1;$>-1;$--){var O=o[$],R=r.slice(0,O.reStart),M=r.slice(O.reStart,O.reEnd-8),G=r.slice(O.reEnd-8,O.reEnd),Me=r.slice(O.reEnd);G+=Me;var Sd=R.split("(").length-1,Ji=Me;for(b=0;b<Sd;b++)Ji=Ji.replace(/\)[+*?]?/,"");Me=Ji;var rc="";Me===""&&e!==wr&&(rc="$");var _d=R+M+Me+rc+G;r=_d}if(r!==""&&i&&(r="(?=.)"+r),E&&(r=f+r),e===wr)return[r,i];if(!i)return Am(t);var kd=n.nocase?"i":"";try{var Xi=new RegExp("^"+r+"$",kd)}catch{return new RegExp("$.")}return Xi._glob=t,Xi._src=r,Xi}fe.makeRe=function(t,e){return new ee(t,e||{}).makeRe()};ee.prototype.makeRe=Om;function Om(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,n=e.noglobstar?hs:e.dot?vm:wm,r=e.nocase?"i":"",i=t.map(function(s){return s.map(function(a){return a===ds?n:typeof a=="string"?Tm(a):a._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,r)}catch{this.regexp=!1}return this.regexp}fe.match=function(t,e,n){n=n||{};var r=new ee(e,n);return t=t.filter(function(i){return r.match(i)}),r.options.nonull&&!t.length&&t.push(e),t};ee.prototype.match=function(e,n){if(typeof n>"u"&&(n=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;var r=this.options;kn.sep!=="/"&&(e=e.split(kn.sep).join("/")),e=e.split(Gc),this.debug(this.pattern,"split",e);var i=this.set;this.debug(this.pattern,"set",i);var s,a;for(a=e.length-1;a>=0&&(s=e[a],!s);a--);for(a=0;a<i.length;a++){var o=i[a],c=e;r.matchBase&&o.length===1&&(c=[s]);var l=this.matchOne(c,o,n);if(l)return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate};ee.prototype.matchOne=function(t,e,n){var r=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,s=0,a=t.length,o=e.length;i<a&&s<o;i++,s++){this.debug("matchOne loop");var c=e[s],l=t[i];if(this.debug(e,c,l),c===!1)return!1;if(c===ds){this.debug("GLOBSTAR",[e,c,l]);var u=i,p=s+1;if(p===o){for(this.debug("** at the end");i<a;i++)if(t[i]==="."||t[i]===".."||!r.dot&&t[i].charAt(0)===".")return!1;return!0}for(;u<a;){var f=t[u];if(this.debug(`
globstar while`,t,u,e,p,f),this.matchOne(t.slice(u),e.slice(p),n))return this.debug("globstar found match!",u,a,f),!0;if(f==="."||f===".."||!r.dot&&f.charAt(0)==="."){this.debug("dot detected!",t,u,e,p);break}this.debug("globstar swallow a segment, and continue"),u++}return!!(n&&(this.debug(`
>>> no match, partial?`,t,u,e,p),u===a))}var h;if(typeof c=="string"?(h=l===c,this.debug("string match",c,l,h)):(h=l.match(c),this.debug("pattern match",c,l,h)),!h)return!1}if(i===a&&s===o)return!0;if(i===a)return n;if(s===o)return i===a-1&&t[i]==="";throw new Error("wtf?")};function Am(t){return t.replace(/\\(.)/g,"$1")}function Tm(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var Sr=x((g_,Er)=>{"use strict";function Kc(t){return t.charAt(0)==="/"}function Qc(t){var e=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,n=e.exec(t),r=n[1]||"",i=!!(r&&r.charAt(1)!==":");return!!(n[2]||i)}Er.exports=process.platform==="win32"?Qc:Kc;Er.exports.posix=Kc;Er.exports.win32=Qc});var gs=x(Ze=>{Ze.setopts=Cm;Ze.ownProp=Zc;Ze.makeAbs=On;Ze.finish=Mm;Ze.mark=Dm;Ze.isIgnored=Xc;Ze.childrenIgnored=Fm;function Zc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Im=T("fs"),Vt=T("path"),Nm=xr(),Jc=Sr(),ms=Nm.Minimatch;function Lm(t,e){return t.localeCompare(e,"en")}function Rm(t,e){t.ignore=e.ignore||[],Array.isArray(t.ignore)||(t.ignore=[t.ignore]),t.ignore.length&&(t.ignore=t.ignore.map(Pm))}function Pm(t){var e=null;if(t.slice(-3)==="/**"){var n=t.replace(/(\/\*\*)+$/,"");e=new ms(n,{dot:!0})}return{matcher:new ms(t,{dot:!0}),gmatcher:e}}function Cm(t,e,n){if(n||(n={}),n.matchBase&&e.indexOf("/")===-1){if(n.noglobstar)throw new Error("base matching requires globstar");e="**/"+e}t.silent=!!n.silent,t.pattern=e,t.strict=n.strict!==!1,t.realpath=!!n.realpath,t.realpathCache=n.realpathCache||Object.create(null),t.follow=!!n.follow,t.dot=!!n.dot,t.mark=!!n.mark,t.nodir=!!n.nodir,t.nodir&&(t.mark=!0),t.sync=!!n.sync,t.nounique=!!n.nounique,t.nonull=!!n.nonull,t.nosort=!!n.nosort,t.nocase=!!n.nocase,t.stat=!!n.stat,t.noprocess=!!n.noprocess,t.absolute=!!n.absolute,t.fs=n.fs||Im,t.maxLength=n.maxLength||1/0,t.cache=n.cache||Object.create(null),t.statCache=n.statCache||Object.create(null),t.symlinks=n.symlinks||Object.create(null),Rm(t,n),t.changedCwd=!1;var r=process.cwd();Zc(n,"cwd")?(t.cwd=Vt.resolve(n.cwd),t.changedCwd=t.cwd!==r):t.cwd=r,t.root=n.root||Vt.resolve(t.cwd,"/"),t.root=Vt.resolve(t.root),process.platform==="win32"&&(t.root=t.root.replace(/\\/g,"/")),t.cwdAbs=Jc(t.cwd)?t.cwd:On(t,t.cwd),process.platform==="win32"&&(t.cwdAbs=t.cwdAbs.replace(/\\/g,"/")),t.nomount=!!n.nomount,n.nonegate=!0,n.nocomment=!0,n.allowWindowsEscape=!1,t.minimatch=new ms(e,n),t.options=t.minimatch.options}function Mm(t){for(var e=t.nounique,n=e?[]:Object.create(null),r=0,i=t.matches.length;r<i;r++){var s=t.matches[r];if(!s||Object.keys(s).length===0){if(t.nonull){var a=t.minimatch.globSet[r];e?n.push(a):n[a]=!0}}else{var o=Object.keys(s);e?n.push.apply(n,o):o.forEach(function(c){n[c]=!0})}}if(e||(n=Object.keys(n)),t.nosort||(n=n.sort(Lm)),t.mark){for(var r=0;r<n.length;r++)n[r]=t._mark(n[r]);t.nodir&&(n=n.filter(function(c){var l=!/\/$/.test(c),u=t.cache[c]||t.cache[On(t,c)];return l&&u&&(l=u!=="DIR"&&!Array.isArray(u)),l}))}t.ignore.length&&(n=n.filter(function(c){return!Xc(t,c)})),t.found=n}function Dm(t,e){var n=On(t,e),r=t.cache[n],i=e;if(r){var s=r==="DIR"||Array.isArray(r),a=e.slice(-1)==="/";if(s&&!a?i+="/":!s&&a&&(i=i.slice(0,-1)),i!==e){var o=On(t,i);t.statCache[o]=t.statCache[n],t.cache[o]=t.cache[n]}}return i}function On(t,e){var n=e;return e.charAt(0)==="/"?n=Vt.join(t.root,e):Jc(e)||e===""?n=e:t.changedCwd?n=Vt.resolve(t.cwd,e):n=Vt.resolve(e),process.platform==="win32"&&(n=n.replace(/\\/g,"/")),n}function Xc(t,e){return t.ignore.length?t.ignore.some(function(n){return n.matcher.match(e)||!!(n.gmatcher&&n.gmatcher.match(e))}):!1}function Fm(t,e){return t.ignore.length?t.ignore.some(function(n){return!!(n.gmatcher&&n.gmatcher.match(e))}):!1}});var il=x((x_,rl)=>{rl.exports=nl;nl.GlobSync=Q;var $m=uc(),el=xr(),v_=el.Minimatch,w_=kr().Glob,b_=T("util"),ys=T("path"),tl=T("assert"),_r=Sr(),St=gs(),jm=St.setopts,vs=St.ownProp,qm=St.childrenIgnored,Bm=St.isIgnored;function nl(t,e){if(typeof e=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new Q(t,e).found}function Q(t,e){if(!t)throw new Error("must provide pattern");if(typeof e=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof Q))return new Q(t,e);if(jm(this,t,e),this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var r=0;r<n;r++)this._process(this.minimatch.set[r],r,!1);this._finish()}Q.prototype._finish=function(){if(tl.ok(this instanceof Q),this.realpath){var t=this;this.matches.forEach(function(e,n){var r=t.matches[n]=Object.create(null);for(var i in e)try{i=t._makeAbs(i);var s=$m.realpathSync(i,t.realpathCache);r[s]=!0}catch(a){if(a.syscall==="stat")r[t._makeAbs(i)]=!0;else throw a}})}St.finish(this)};Q.prototype._process=function(t,e,n){tl.ok(this instanceof Q);for(var r=0;typeof t[r]=="string";)r++;var i;switch(r){case t.length:this._processSimple(t.join("/"),e);return;case 0:i=null;break;default:i=t.slice(0,r).join("/");break}var s=t.slice(r),a;i===null?a=".":((_r(i)||_r(t.map(function(l){return typeof l=="string"?l:"[*]"}).join("/")))&&(!i||!_r(i))&&(i="/"+i),a=i);var o=this._makeAbs(a);if(!qm(this,a)){var c=s[0]===el.GLOBSTAR;c?this._processGlobStar(i,a,o,s,e,n):this._processReaddir(i,a,o,s,e,n)}};Q.prototype._processReaddir=function(t,e,n,r,i,s){var a=this._readdir(n,s);if(a){for(var o=r[0],c=!!this.minimatch.negate,l=o._glob,u=this.dot||l.charAt(0)===".",p=[],f=0;f<a.length;f++){var h=a[f];if(h.charAt(0)!=="."||u){var m;c&&!t?m=!h.match(o):m=h.match(o),m&&p.push(h)}}var b=p.length;if(b!==0){if(r.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var f=0;f<b;f++){var h=p[f];t&&(t.slice(-1)!=="/"?h=t+"/"+h:h=t+h),h.charAt(0)==="/"&&!this.nomount&&(h=ys.join(this.root,h)),this._emitMatch(i,h)}return}r.shift();for(var f=0;f<b;f++){var h=p[f],k;t?k=[t,h]:k=[h],this._process(k.concat(r),i,s)}}}};Q.prototype._emitMatch=function(t,e){if(!Bm(this,e)){var n=this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=n),!this.matches[t][e]){if(this.nodir){var r=this.cache[n];if(r==="DIR"||Array.isArray(r))return}this.matches[t][e]=!0,this.stat&&this._stat(e)}}};Q.prototype._readdirInGlobStar=function(t){if(this.follow)return this._readdir(t,!1);var e,n,r;try{n=this.fs.lstatSync(t)}catch(s){if(s.code==="ENOENT")return null}var i=n&&n.isSymbolicLink();return this.symlinks[t]=i,!i&&n&&!n.isDirectory()?this.cache[t]="FILE":e=this._readdir(t,!1),e};Q.prototype._readdir=function(t,e){var n;if(e&&!vs(this.symlinks,t))return this._readdirInGlobStar(t);if(vs(this.cache,t)){var r=this.cache[t];if(!r||r==="FILE")return null;if(Array.isArray(r))return r}try{return this._readdirEntries(t,this.fs.readdirSync(t))}catch(i){return this._readdirError(t,i),null}};Q.prototype._readdirEntries=function(t,e){if(!this.mark&&!this.stat)for(var n=0;n<e.length;n++){var r=e[n];t==="/"?r=t+r:r=t+"/"+r,this.cache[r]=!0}return this.cache[t]=e,e};Q.prototype._readdirError=function(t,e){switch(e.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(t);if(this.cache[n]="FILE",n===this.cwdAbs){var r=new Error(e.code+" invalid cwd "+this.cwd);throw r.path=this.cwd,r.code=e.code,r}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:if(this.cache[this._makeAbs(t)]=!1,this.strict)throw e;this.silent||console.error("glob error",e);break}};Q.prototype._processGlobStar=function(t,e,n,r,i,s){var a=this._readdir(n,s);if(a){var o=r.slice(1),c=t?[t]:[],l=c.concat(o);this._process(l,i,!1);var u=a.length,p=this.symlinks[n];if(!(p&&s))for(var f=0;f<u;f++){var h=a[f];if(!(h.charAt(0)==="."&&!this.dot)){var m=c.concat(a[f],o);this._process(m,i,!0);var b=c.concat(a[f],r);this._process(b,i,!0)}}}};Q.prototype._processSimple=function(t,e){var n=this._stat(t);if(this.matches[e]||(this.matches[e]=Object.create(null)),!!n){if(t&&_r(t)&&!this.nomount){var r=/[\/\\]$/.test(t);t.charAt(0)==="/"?t=ys.join(this.root,t):(t=ys.resolve(this.root,t),r&&(t+="/"))}process.platform==="win32"&&(t=t.replace(/\\/g,"/")),this._emitMatch(e,t)}};Q.prototype._stat=function(t){var e=this._makeAbs(t),n=t.slice(-1)==="/";if(t.length>this.maxLength)return!1;if(!this.stat&&vs(this.cache,e)){var a=this.cache[e];if(Array.isArray(a)&&(a="DIR"),!n||a==="DIR")return a;if(n&&a==="FILE")return!1}var r,i=this.statCache[e];if(!i){var s;try{s=this.fs.lstatSync(e)}catch(o){if(o&&(o.code==="ENOENT"||o.code==="ENOTDIR"))return this.statCache[e]=!1,!1}if(s&&s.isSymbolicLink())try{i=this.fs.statSync(e)}catch{i=s}else i=s}this.statCache[e]=i;var a=!0;return i&&(a=i.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||a,n&&a==="FILE"?!1:a};Q.prototype._mark=function(t){return St.mark(this,t)};Q.prototype._makeAbs=function(t){return St.makeAbs(this,t)}});var kr=x((__,al)=>{al.exports=_t;var Um=uc(),sl=xr(),E_=sl.Minimatch,zm=oc(),Ym=T("events").EventEmitter,ws=T("path"),bs=T("assert"),An=Sr(),Es=il(),kt=gs(),Vm=kt.setopts,xs=kt.ownProp,Ss=Pd(),S_=T("util"),Gm=kt.childrenIgnored,Hm=kt.isIgnored,Wm=Rd();function _t(t,e,n){if(typeof e=="function"&&(n=e,e={}),e||(e={}),e.sync){if(n)throw new TypeError("callback provided to sync glob");return Es(t,e)}return new z(t,e,n)}_t.sync=Es;var Km=_t.GlobSync=Es.GlobSync;_t.glob=_t;function Qm(t,e){if(e===null||typeof e!="object")return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}_t.hasMagic=function(t,e){var n=Qm({},e);n.noprocess=!0;var r=new z(t,n),i=r.minimatch.set;if(!t)return!1;if(i.length>1)return!0;for(var s=0;s<i[0].length;s++)if(typeof i[0][s]!="string")return!0;return!1};_t.Glob=z;zm(z,Ym);function z(t,e,n){if(typeof e=="function"&&(n=e,e=null),e&&e.sync){if(n)throw new TypeError("callback provided to sync glob");return new Km(t,e)}if(!(this instanceof z))return new z(t,e,n);Vm(this,t,e),this._didRealPath=!1;var r=this.minimatch.set.length;this.matches=new Array(r),typeof n=="function"&&(n=Wm(n),this.on("error",n),this.on("end",function(c){n(null,c)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(r===0)return o();for(var s=!0,a=0;a<r;a++)this._process(this.minimatch.set[a],a,!1,o);s=!1;function o(){--i._processing,i._processing<=0&&(s?process.nextTick(function(){i._finish()}):i._finish())}}z.prototype._finish=function(){if(bs(this instanceof z),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();kt.finish(this),this.emit("end",this.found)}};z.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var t=this.matches.length;if(t===0)return this._finish();for(var e=this,n=0;n<this.matches.length;n++)this._realpathSet(n,r);function r(){--t===0&&e._finish()}};z.prototype._realpathSet=function(t,e){var n=this.matches[t];if(!n)return e();var r=Object.keys(n),i=this,s=r.length;if(s===0)return e();var a=this.matches[t]=Object.create(null);r.forEach(function(o,c){o=i._makeAbs(o),Um.realpath(o,i.realpathCache,function(l,u){l?l.syscall==="stat"?a[o]=!0:i.emit("error",l):a[u]=!0,--s===0&&(i.matches[t]=a,e())})})};z.prototype._mark=function(t){return kt.mark(this,t)};z.prototype._makeAbs=function(t){return kt.makeAbs(this,t)};z.prototype.abort=function(){this.aborted=!0,this.emit("abort")};z.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};z.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var t=this._emitQueue.slice(0);this._emitQueue.length=0;for(var e=0;e<t.length;e++){var n=t[e];this._emitMatch(n[0],n[1])}}if(this._processQueue.length){var r=this._processQueue.slice(0);this._processQueue.length=0;for(var e=0;e<r.length;e++){var i=r[e];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}};z.prototype._process=function(t,e,n,r){if(bs(this instanceof z),bs(typeof r=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([t,e,n,r]);return}for(var i=0;typeof t[i]=="string";)i++;var s;switch(i){case t.length:this._processSimple(t.join("/"),e,r);return;case 0:s=null;break;default:s=t.slice(0,i).join("/");break}var a=t.slice(i),o;s===null?o=".":((An(s)||An(t.map(function(u){return typeof u=="string"?u:"[*]"}).join("/")))&&(!s||!An(s))&&(s="/"+s),o=s);var c=this._makeAbs(o);if(Gm(this,o))return r();var l=a[0]===sl.GLOBSTAR;l?this._processGlobStar(s,o,c,a,e,n,r):this._processReaddir(s,o,c,a,e,n,r)}};z.prototype._processReaddir=function(t,e,n,r,i,s,a){var o=this;this._readdir(n,s,function(c,l){return o._processReaddir2(t,e,n,r,i,s,l,a)})};z.prototype._processReaddir2=function(t,e,n,r,i,s,a,o){if(!a)return o();for(var c=r[0],l=!!this.minimatch.negate,u=c._glob,p=this.dot||u.charAt(0)===".",f=[],h=0;h<a.length;h++){var m=a[h];if(m.charAt(0)!=="."||p){var b;l&&!t?b=!m.match(c):b=m.match(c),b&&f.push(m)}}var k=f.length;if(k===0)return o();if(r.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var h=0;h<k;h++){var m=f[h];t&&(t!=="/"?m=t+"/"+m:m=t+m),m.charAt(0)==="/"&&!this.nomount&&(m=ws.join(this.root,m)),this._emitMatch(i,m)}return o()}r.shift();for(var h=0;h<k;h++){var m=f[h],S;t&&(t!=="/"?m=t+"/"+m:m=t+m),this._process([m].concat(r),i,s,o)}o()};z.prototype._emitMatch=function(t,e){if(!this.aborted&&!Hm(this,e)){if(this.paused){this._emitQueue.push([t,e]);return}var n=An(e)?e:this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=n),!this.matches[t][e]){if(this.nodir){var r=this.cache[n];if(r==="DIR"||Array.isArray(r))return}this.matches[t][e]=!0;var i=this.statCache[n];i&&this.emit("stat",e,i),this.emit("match",e)}}};z.prototype._readdirInGlobStar=function(t,e){if(this.aborted)return;if(this.follow)return this._readdir(t,!1,e);var n="lstat\0"+t,r=this,i=Ss(n,s);i&&r.fs.lstat(t,i);function s(a,o){if(a&&a.code==="ENOENT")return e();var c=o&&o.isSymbolicLink();r.symlinks[t]=c,!c&&o&&!o.isDirectory()?(r.cache[t]="FILE",e()):r._readdir(t,!1,e)}};z.prototype._readdir=function(t,e,n){if(!this.aborted&&(n=Ss("readdir\0"+t+"\0"+e,n),!!n)){if(e&&!xs(this.symlinks,t))return this._readdirInGlobStar(t,n);if(xs(this.cache,t)){var r=this.cache[t];if(!r||r==="FILE")return n();if(Array.isArray(r))return n(null,r)}var i=this;i.fs.readdir(t,Zm(this,t,n))}};function Zm(t,e,n){return function(r,i){r?t._readdirError(e,r,n):t._readdirEntries(e,i,n)}}z.prototype._readdirEntries=function(t,e,n){if(!this.aborted){if(!this.mark&&!this.stat)for(var r=0;r<e.length;r++){var i=e[r];t==="/"?i=t+i:i=t+"/"+i,this.cache[i]=!0}return this.cache[t]=e,n(null,e)}};z.prototype._readdirError=function(t,e,n){if(!this.aborted){switch(e.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(t);if(this.cache[r]="FILE",r===this.cwdAbs){var i=new Error(e.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=e.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:this.cache[this._makeAbs(t)]=!1,this.strict&&(this.emit("error",e),this.abort()),this.silent||console.error("glob error",e);break}return n()}};z.prototype._processGlobStar=function(t,e,n,r,i,s,a){var o=this;this._readdir(n,s,function(c,l){o._processGlobStar2(t,e,n,r,i,s,l,a)})};z.prototype._processGlobStar2=function(t,e,n,r,i,s,a,o){if(!a)return o();var c=r.slice(1),l=t?[t]:[],u=l.concat(c);this._process(u,i,!1,o);var p=this.symlinks[n],f=a.length;if(p&&s)return o();for(var h=0;h<f;h++){var m=a[h];if(!(m.charAt(0)==="."&&!this.dot)){var b=l.concat(a[h],c);this._process(b,i,!0,o);var k=l.concat(a[h],r);this._process(k,i,!0,o)}}o()};z.prototype._processSimple=function(t,e,n){var r=this;this._stat(t,function(i,s){r._processSimple2(t,e,i,s,n)})};z.prototype._processSimple2=function(t,e,n,r,i){if(this.matches[e]||(this.matches[e]=Object.create(null)),!r)return i();if(t&&An(t)&&!this.nomount){var s=/[\/\\]$/.test(t);t.charAt(0)==="/"?t=ws.join(this.root,t):(t=ws.resolve(this.root,t),s&&(t+="/"))}process.platform==="win32"&&(t=t.replace(/\\/g,"/")),this._emitMatch(e,t),i()};z.prototype._stat=function(t,e){var n=this._makeAbs(t),r=t.slice(-1)==="/";if(t.length>this.maxLength)return e();if(!this.stat&&xs(this.cache,n)){var i=this.cache[n];if(Array.isArray(i)&&(i="DIR"),!r||i==="DIR")return e(null,i);if(r&&i==="FILE")return e()}var s,a=this.statCache[n];if(a!==void 0){if(a===!1)return e(null,a);var o=a.isDirectory()?"DIR":"FILE";return r&&o==="FILE"?e():e(null,o,a)}var c=this,l=Ss("stat\0"+n,u);l&&c.fs.lstat(n,l);function u(p,f){if(f&&f.isSymbolicLink())return c.fs.stat(n,function(h,m){h?c._stat2(t,n,null,f,e):c._stat2(t,n,h,m,e)});c._stat2(t,n,p,f,e)}};z.prototype._stat2=function(t,e,n,r,i){if(n&&(n.code==="ENOENT"||n.code==="ENOTDIR"))return this.statCache[e]=!1,i();var s=t.slice(-1)==="/";if(this.statCache[e]=r,e.slice(-1)==="/"&&r&&!r.isDirectory())return i(null,!1,r);var a=!0;return r&&(a=r.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||a,s&&a==="FILE"?i():i(null,a,r)}});var pl=x((k_,ul)=>{ul.exports=ll;var ks=T("fs"),{EventEmitter:Jm}=T("events"),{Minimatch:_s}=Cd(),{resolve:Xm}=T("path");function eg(t,e){return new Promise((n,r)=>{ks.readdir(t,{withFileTypes:!0},(i,s)=>{if(i)switch(i.code){case"ENOTDIR":e?r(i):n([]);break;case"ENOTSUP":case"ENOENT":case"ENAMETOOLONG":case"UNKNOWN":n([]);break;case"ELOOP":default:r(i);break}else n(s)})})}function ol(t,e){return new Promise((n,r)=>{(e?ks.stat:ks.lstat)(t,(s,a)=>{if(s)switch(s.code){case"ENOENT":n(e?ol(t,!1):null);break;default:n(null);break}else n(a)})})}async function*cl(t,e,n,r,i,s){let a=await eg(e+t,s);for(let o of a){let c=o.name;c===void 0&&(c=o,r=!0);let l=t+"/"+c,u=l.slice(1),p=e+"/"+u,f=null;(r||n)&&(f=await ol(p,n)),!f&&o.name!==void 0&&(f=o),f===null&&(f={isDirectory:()=>!1}),f.isDirectory()?i(u)||(yield{relative:u,absolute:p,stats:f},yield*cl(l,e,n,r,i,!1)):yield{relative:u,absolute:p,stats:f}}}async function*tg(t,e,n,r){yield*cl("",t,e,n,r,!0)}function ng(t){return{pattern:t.pattern,dot:!!t.dot,noglobstar:!!t.noglobstar,matchBase:!!t.matchBase,nocase:!!t.nocase,ignore:t.ignore,skip:t.skip,follow:!!t.follow,stat:!!t.stat,nodir:!!t.nodir,mark:!!t.mark,silent:!!t.silent,absolute:!!t.absolute}}var Or=class extends Jm{constructor(e,n,r){if(super(),typeof n=="function"&&(r=n,n=null),this.options=ng(n||{}),this.matchers=[],this.options.pattern){let i=Array.isArray(this.options.pattern)?this.options.pattern:[this.options.pattern];this.matchers=i.map(s=>new _s(s,{dot:this.options.dot,noglobstar:this.options.noglobstar,matchBase:this.options.matchBase,nocase:this.options.nocase}))}if(this.ignoreMatchers=[],this.options.ignore){let i=Array.isArray(this.options.ignore)?this.options.ignore:[this.options.ignore];this.ignoreMatchers=i.map(s=>new _s(s,{dot:!0}))}if(this.skipMatchers=[],this.options.skip){let i=Array.isArray(this.options.skip)?this.options.skip:[this.options.skip];this.skipMatchers=i.map(s=>new _s(s,{dot:!0}))}this.iterator=tg(Xm(e||"."),this.options.follow,this.options.stat,this._shouldSkipDirectory.bind(this)),this.paused=!1,this.inactive=!1,this.aborted=!1,r&&(this._matches=[],this.on("match",i=>this._matches.push(this.options.absolute?i.absolute:i.relative)),this.on("error",i=>r(i)),this.on("end",()=>r(null,this._matches))),setTimeout(()=>this._next(),0)}_shouldSkipDirectory(e){return this.skipMatchers.some(n=>n.match(e))}_fileMatches(e,n){let r=e+(n?"/":"");return(this.matchers.length===0||this.matchers.some(i=>i.match(r)))&&!this.ignoreMatchers.some(i=>i.match(r))&&(!this.options.nodir||!n)}_next(){!this.paused&&!this.aborted?this.iterator.next().then(e=>{if(e.done)this.emit("end");else{let n=e.value.stats.isDirectory();if(this._fileMatches(e.value.relative,n)){let r=e.value.relative,i=e.value.absolute;this.options.mark&&n&&(r+="/",i+="/"),this.options.stat?this.emit("match",{relative:r,absolute:i,stat:e.value.stats}):this.emit("match",{relative:r,absolute:i})}this._next(this.iterator)}}).catch(e=>{this.abort(),this.emit("error",e),!e.code&&!this.options.silent&&console.error(e)}):this.inactive=!0}abort(){this.aborted=!0}pause(){this.paused=!0}resume(){this.paused=!1,this.inactive&&(this.inactive=!1,this._next())}};function ll(t,e,n){return new Or(t,e,n)}ll.ReaddirGlob=Or});var lu={};Ad(lu,{all:()=>Cs,allLimit:()=>Ms,allSeries:()=>Ds,any:()=>zs,anyLimit:()=>Ys,anySeries:()=>Vs,apply:()=>yl,applyEach:()=>Sl,applyEachSeries:()=>_l,asyncify:()=>Tr,auto:()=>Ws,autoInject:()=>kl,cargo:()=>Ol,cargoQueue:()=>Al,compose:()=>Tl,concat:()=>Ts,concatLimit:()=>Nn,concatSeries:()=>Is,constant:()=>Il,default:()=>cy,detect:()=>Ns,detectLimit:()=>Ls,detectSeries:()=>Rs,dir:()=>Ll,doDuring:()=>Ir,doUntil:()=>Rl,doWhilst:()=>Ir,during:()=>Cr,each:()=>Ps,eachLimit:()=>Nr,eachOf:()=>we,eachOfLimit:()=>In,eachOfSeries:()=>Ae,eachSeries:()=>Lr,ensureAsync:()=>Zs,every:()=>Cs,everyLimit:()=>Ms,everySeries:()=>Ds,filter:()=>Fs,filterLimit:()=>$s,filterSeries:()=>js,find:()=>Ns,findLimit:()=>Ls,findSeries:()=>Rs,flatMap:()=>Ts,flatMapLimit:()=>Nn,flatMapSeries:()=>Is,foldl:()=>Gt,foldr:()=>Bs,forEach:()=>Ps,forEachLimit:()=>Nr,forEachOf:()=>we,forEachOfLimit:()=>In,forEachOfSeries:()=>Ae,forEachSeries:()=>Lr,forever:()=>Cl,groupBy:()=>Ml,groupByLimit:()=>jr,groupBySeries:()=>Dl,inject:()=>Gt,log:()=>Fl,map:()=>Fr,mapLimit:()=>Pn,mapSeries:()=>Hs,mapValues:()=>$l,mapValuesLimit:()=>qr,mapValuesSeries:()=>jl,memoize:()=>ql,nextTick:()=>Bl,parallel:()=>Ul,parallelLimit:()=>zl,priorityQueue:()=>Yl,queue:()=>Xs,race:()=>Vl,reduce:()=>Gt,reduceRight:()=>Bs,reflect:()=>Rr,reflectAll:()=>Gl,reject:()=>Hl,rejectLimit:()=>Wl,rejectSeries:()=>Kl,retry:()=>Pr,retryable:()=>Jl,select:()=>Fs,selectLimit:()=>$s,selectSeries:()=>js,seq:()=>Qs,series:()=>Xl,setImmediate:()=>Je,some:()=>zs,someLimit:()=>Ys,someSeries:()=>Vs,sortBy:()=>eu,timeout:()=>tu,times:()=>nu,timesLimit:()=>Br,timesSeries:()=>ru,transform:()=>iu,tryEach:()=>su,unmemoize:()=>au,until:()=>ou,waterfall:()=>cu,whilst:()=>Cr,wrapSync:()=>Tr});function yl(t,...e){return(...n)=>t(...e,...n)}function Ln(t){return function(...e){var n=e.pop();return t.call(this,e,n)}}function bl(t){setTimeout(t,0)}function xl(t){return(e,...n)=>t(()=>e(...n))}function Tr(t){return Rn(t)?function(...e){let n=e.pop(),r=t.apply(this,e);return fl(r,n)}:Ln(function(e,n){var r;try{r=t.apply(this,e)}catch(i){return n(i)}if(r&&typeof r.then=="function")return fl(r,n);n(null,r)})}function fl(t,e){return t.then(n=>{hl(e,null,n)},n=>{hl(e,n&&n.message?n:new Error(n))})}function hl(t,e,n){try{t(e,n)}catch(r){Je(i=>{throw i},r)}}function Rn(t){return t[Symbol.toStringTag]==="AsyncFunction"}function ig(t){return t[Symbol.toStringTag]==="AsyncGenerator"}function sg(t){return typeof t[Symbol.asyncIterator]=="function"}function D(t){if(typeof t!="function")throw new Error("expected a function");return Rn(t)?Tr(t):t}function C(t,e=t.length){if(!e)throw new Error("arity is undefined");function n(...r){return typeof r[e-1]=="function"?t.apply(this,r):new Promise((i,s)=>{r[e-1]=(a,...o)=>{if(a)return s(a);i(o.length>1?o:o[0])},t.apply(this,r)})}return n}function El(t){return function(n,...r){return C(function(s){var a=this;return t(n,(o,c)=>{D(o).apply(a,r.concat(c))},s)})}}function Gs(t,e,n,r){e=e||[];var i=[],s=0,a=D(n);return t(e,(o,c,l)=>{var u=s++;a(o,(p,f)=>{i[u]=f,l(p)})},o=>{r(o,i)})}function Mr(t){return t&&typeof t.length=="number"&&t.length>=0&&t.length%1===0}function Xe(t){function e(...n){if(t!==null){var r=t;t=null,r.apply(this,n)}}return Object.assign(e,t),e}function ag(t){return t[Symbol.iterator]&&t[Symbol.iterator]()}function og(t){var e=-1,n=t.length;return function(){return++e<n?{value:t[e],key:e}:null}}function cg(t){var e=-1;return function(){var r=t.next();return r.done?null:(e++,{value:r.value,key:e})}}function lg(t){var e=t?Object.keys(t):[],n=-1,r=e.length;return function i(){var s=e[++n];return s==="__proto__"?i():n<r?{value:t[s],key:s}:null}}function ug(t){if(Mr(t))return og(t);var e=ag(t);return e?cg(e):lg(t)}function et(t){return function(...e){if(t===null)throw new Error("Callback was already called.");var n=t;t=null,n.apply(this,e)}}function dl(t,e,n,r){let i=!1,s=!1,a=!1,o=0,c=0;function l(){o>=e||a||i||(a=!0,t.next().then(({value:f,done:h})=>{if(!(s||i)){if(a=!1,h){i=!0,o<=0&&r(null);return}o++,n(f,c,u),c++,l()}}).catch(p))}function u(f,h){if(o-=1,!s){if(f)return p(f);if(f===!1){i=!0,s=!0;return}if(h===Dr||i&&o<=0)return i=!0,r(null);l()}}function p(f){s||(a=!1,i=!0,r(f))}l()}function pg(t,e,n,r){return Se(e)(t,D(n),r)}function fg(t,e,n){n=Xe(n);var r=0,i=0,{length:s}=t,a=!1;s===0&&n(null);function o(c,l){c===!1&&(a=!0),a!==!0&&(c?n(c):(++i===s||l===Dr)&&n(null))}for(;r<s;r++)e(t[r],r,et(o))}function hg(t,e,n){return In(t,1/0,e,n)}function dg(t,e,n){var r=Mr(t)?fg:hg;return r(t,D(e),n)}function mg(t,e,n){return Gs(we,t,e,n)}function gg(t,e,n){return In(t,1,e,n)}function yg(t,e,n){return Gs(Ae,t,e,n)}function Ht(){let t,e;function n(r,...i){if(r)return e(r);t(i.length>1?i:i[0])}return n[Wt]=new Promise((r,i)=>{t=r,e=i}),n}function Ws(t,e,n){typeof e!="number"&&(n=e,e=null),n=Xe(n||Ht());var r=Object.keys(t).length;if(!r)return n(null);e||(e=r);var i={},s=0,a=!1,o=!1,c=Object.create(null),l=[],u=[],p={};Object.keys(t).forEach(v=>{var w=t[v];if(!Array.isArray(w)){f(v,[w]),u.push(v);return}var A=w.slice(0,w.length-1),q=A.length;if(q===0){f(v,w),u.push(v);return}p[v]=q,A.forEach(E=>{if(!t[E])throw new Error("async.auto task `"+v+"` has a non-existent dependency `"+E+"` in "+A.join(", "));m(E,()=>{q--,q===0&&f(v,w)})})}),S(),h();function f(v,w){l.push(()=>k(v,w))}function h(){if(!a){if(l.length===0&&s===0)return n(null,i);for(;l.length&&s<e;){var v=l.shift();v()}}}function m(v,w){var A=c[v];A||(A=c[v]=[]),A.push(w)}function b(v){var w=c[v]||[];w.forEach(A=>A()),h()}function k(v,w){if(!o){var A=et((E,...$)=>{if(s--,E===!1){a=!0;return}if($.length<2&&([$]=$),E){var O={};if(Object.keys(i).forEach(R=>{O[R]=i[R]}),O[v]=$,o=!0,c=Object.create(null),a)return;n(E,O)}else i[v]=$,b(v)});s++;var q=D(w[w.length-1]);w.length>1?q(i,A):q(A)}}function S(){for(var v,w=0;u.length;)v=u.pop(),w++,y(v).forEach(A=>{--p[A]===0&&u.push(A)});if(w!==r)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function y(v){var w=[];return Object.keys(t).forEach(A=>{let q=t[A];Array.isArray(q)&&q.indexOf(v)>=0&&w.push(A)}),w}return n[Wt]}function Eg(t){let e="",n=0,r=t.indexOf("*/");for(;n<t.length;)if(t[n]==="/"&&t[n+1]==="/"){let i=t.indexOf(`
`,n);n=i===-1?t.length:i}else if(r!==-1&&t[n]==="/"&&t[n+1]==="*"){let i=t.indexOf("*/",n);i!==-1?(n=i+2,r=t.indexOf("*/",n)):(e+=t[n],n++)}else e+=t[n],n++;return e}function Sg(t){let e=Eg(t.toString()),n=e.match(vg);if(n||(n=e.match(wg)),!n)throw new Error(`could not parse args in autoInject
Source:
`+e);let[,r]=n;return r.replace(/\s/g,"").split(bg).map(i=>i.replace(xg,"").trim())}function kl(t,e){var n={};return Object.keys(t).forEach(r=>{var i=t[r],s,a=Rn(i),o=!a&&i.length===1||a&&i.length===0;if(Array.isArray(i))s=[...i],i=s.pop(),n[r]=s.concat(s.length>0?c:i);else if(o)n[r]=i;else{if(s=Sg(i),i.length===0&&!a&&s.length===0)throw new Error("autoInject task functions require explicit parameters.");a||s.pop(),n[r]=s.concat(c)}function c(l,u){var p=s.map(f=>l[f]);p.push(u),D(i)(...p)}}),Ws(n,e)}function ml(t,e){t.length=1,t.head=t.tail=e}function Ks(t,e,n){if(e==null)e=1;else if(e===0)throw new RangeError("Concurrency must not be zero");var r=D(t),i=0,s=[];let a={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function o(y,v){a[y].push(v)}function c(y,v){let w=(...A)=>{l(y,w),v(...A)};a[y].push(w)}function l(y,v){if(!y)return Object.keys(a).forEach(w=>a[w]=[]);if(!v)return a[y]=[];a[y]=a[y].filter(w=>w!==v)}function u(y,...v){a[y].forEach(w=>w(...v))}var p=!1;function f(y,v,w,A){if(A!=null&&typeof A!="function")throw new Error("task callback must be a function");S.started=!0;var q,E;function $(R,...M){if(R)return w?E(R):q();if(M.length<=1)return q(M[0]);q(M)}var O=S._createTaskItem(y,w?$:A||$);if(v?S._tasks.unshift(O):S._tasks.push(O),p||(p=!0,Je(()=>{p=!1,S.process()})),w||!A)return new Promise((R,M)=>{q=R,E=M})}function h(y){return function(v,...w){i-=1;for(var A=0,q=y.length;A<q;A++){var E=y[A],$=s.indexOf(E);$===0?s.shift():$>0&&s.splice($,1),E.callback(v,...w),v!=null&&u("error",v,E.data)}i<=S.concurrency-S.buffer&&u("unsaturated"),S.idle()&&u("drain"),S.process()}}function m(y){return y.length===0&&S.idle()?(Je(()=>u("drain")),!0):!1}let b=y=>v=>{if(!v)return new Promise((w,A)=>{c(y,(q,E)=>{if(q)return A(q);w(E)})});l(y),o(y,v)};var k=!1,S={_tasks:new As,_createTaskItem(y,v){return{data:y,callback:v}},*[Symbol.iterator](){yield*S._tasks[Symbol.iterator]()},concurrency:e,payload:n,buffer:e/4,started:!1,paused:!1,push(y,v){return Array.isArray(y)?m(y)?void 0:y.map(w=>f(w,!1,!1,v)):f(y,!1,!1,v)},pushAsync(y,v){return Array.isArray(y)?m(y)?void 0:y.map(w=>f(w,!1,!0,v)):f(y,!1,!0,v)},kill(){l(),S._tasks.empty()},unshift(y,v){return Array.isArray(y)?m(y)?void 0:y.map(w=>f(w,!0,!1,v)):f(y,!0,!1,v)},unshiftAsync(y,v){return Array.isArray(y)?m(y)?void 0:y.map(w=>f(w,!0,!0,v)):f(y,!0,!0,v)},remove(y){S._tasks.remove(y)},process(){if(!k){for(k=!0;!S.paused&&i<S.concurrency&&S._tasks.length;){var y=[],v=[],w=S._tasks.length;S.payload&&(w=Math.min(w,S.payload));for(var A=0;A<w;A++){var q=S._tasks.shift();y.push(q),s.push(q),v.push(q.data)}i+=1,S._tasks.length===0&&u("empty"),i===S.concurrency&&u("saturated");var E=et(h(y));r(v,E)}k=!1}},length(){return S._tasks.length},running(){return i},workersList(){return s},idle(){return S._tasks.length+i===0},pause(){S.paused=!0},resume(){S.paused!==!1&&(S.paused=!1,Je(S.process))}};return Object.defineProperties(S,{saturated:{writable:!1,value:b("saturated")},unsaturated:{writable:!1,value:b("unsaturated")},empty:{writable:!1,value:b("empty")},drain:{writable:!1,value:b("drain")},error:{writable:!1,value:b("error")}}),S}function Ol(t,e){return Ks(t,1,e)}function Al(t,e,n){return Ks(t,e,n)}function _g(t,e,n,r){r=Xe(r);var i=D(n);return Ae(t,(s,a,o)=>{i(e,s,(c,l)=>{e=l,o(c)})},s=>r(s,e))}function Qs(...t){var e=t.map(D);return function(...n){var r=this,i=n[n.length-1];return typeof i=="function"?n.pop():i=Ht(),Gt(e,n,(s,a,o)=>{a.apply(r,s.concat((c,...l)=>{o(c,l)}))},(s,a)=>i(s,...a)),i[Wt]}}function Tl(...t){return Qs(...t.reverse())}function kg(t,e,n,r){return Gs(Se(e),t,n,r)}function Og(t,e,n,r){var i=D(n);return Pn(t,e,(s,a)=>{i(s,(o,...c)=>o?a(o):a(o,c))},(s,a)=>{for(var o=[],c=0;c<a.length;c++)a[c]&&(o=o.concat(...a[c]));return r(s,o)})}function Ag(t,e,n){return Nn(t,1/0,e,n)}function Tg(t,e,n){return Nn(t,1,e,n)}function Il(...t){return function(...e){var n=e.pop();return n(null,...t)}}function Fe(t,e){return(n,r,i,s)=>{var a=!1,o;let c=D(i);n(r,(l,u,p)=>{c(l,(f,h)=>{if(f||f===!1)return p(f);if(t(h)&&!o)return a=!0,o=e(!0,l),p(null,Dr);p()})},l=>{if(l)return s(l);s(null,a?o:e(!1))})}}function Ig(t,e,n){return Fe(r=>r,(r,i)=>i)(we,t,e,n)}function Ng(t,e,n,r){return Fe(i=>i,(i,s)=>s)(Se(e),t,n,r)}function Lg(t,e,n){return Fe(r=>r,(r,i)=>i)(Se(1),t,e,n)}function Nl(t){return(e,...n)=>D(e)(...n,(r,...i)=>{typeof console=="object"&&(r?console.error&&console.error(r):console[t]&&i.forEach(s=>console[t](s)))})}function Rg(t,e,n){n=et(n);var r=D(t),i=D(e),s;function a(c,...l){if(c)return n(c);c!==!1&&(s=l,i(...l,o))}function o(c,l){if(c)return n(c);if(c!==!1){if(!l)return n(null,...s);r(a)}}return o(null,!0)}function Rl(t,e,n){let r=D(e);return Ir(t,(...i)=>{let s=i.pop();r(...i,(a,o)=>s(a,!o))},n)}function Pl(t){return(e,n,r)=>t(e,r)}function Pg(t,e,n){return we(t,Pl(D(e)),n)}function Cg(t,e,n,r){return Se(e)(t,Pl(D(n)),r)}function Mg(t,e,n){return Nr(t,1,e,n)}function Zs(t){return Rn(t)?t:function(...e){var n=e.pop(),r=!0;e.push((...i)=>{r?Je(()=>n(...i)):n(...i)}),t.apply(this,e),r=!1}}function Dg(t,e,n){return Fe(r=>!r,r=>!r)(we,t,e,n)}function Fg(t,e,n,r){return Fe(i=>!i,i=>!i)(Se(e),t,n,r)}function $g(t,e,n){return Fe(r=>!r,r=>!r)(Ae,t,e,n)}function jg(t,e,n,r){var i=new Array(e.length);t(e,(s,a,o)=>{n(s,(c,l)=>{i[a]=!!l,o(c)})},s=>{if(s)return r(s);for(var a=[],o=0;o<e.length;o++)i[o]&&a.push(e[o]);r(null,a)})}function qg(t,e,n,r){var i=[];t(e,(s,a,o)=>{n(s,(c,l)=>{if(c)return o(c);l&&i.push({index:a,value:s}),o(c)})},s=>{if(s)return r(s);r(null,i.sort((a,o)=>a.index-o.index).map(a=>a.value))})}function $r(t,e,n,r){var i=Mr(e)?jg:qg;return i(t,e,D(n),r)}function Bg(t,e,n){return $r(we,t,e,n)}function Ug(t,e,n,r){return $r(Se(e),t,n,r)}function zg(t,e,n){return $r(Ae,t,e,n)}function Yg(t,e){var n=et(e),r=D(Zs(t));function i(s){if(s)return n(s);s!==!1&&r(i)}return i()}function Vg(t,e,n,r){var i=D(n);return Pn(t,e,(s,a)=>{i(s,(o,c)=>o?a(o):a(o,{key:c,val:s}))},(s,a)=>{for(var o={},{hasOwnProperty:c}=Object.prototype,l=0;l<a.length;l++)if(a[l]){var{key:u}=a[l],{val:p}=a[l];c.call(o,u)?o[u].push(p):o[u]=[p]}return r(s,o)})}function Ml(t,e,n){return jr(t,1/0,e,n)}function Dl(t,e,n){return jr(t,1,e,n)}function Gg(t,e,n,r){r=Xe(r);var i={},s=D(n);return Se(e)(t,(a,o,c)=>{s(a,o,(l,u)=>{if(l)return c(l);i[o]=u,c(l)})},a=>r(a,i))}function $l(t,e,n){return qr(t,1/0,e,n)}function jl(t,e,n){return qr(t,1,e,n)}function ql(t,e=n=>n){var n=Object.create(null),r=Object.create(null),i=D(t),s=Ln((a,o)=>{var c=e(...a);c in n?Je(()=>o(null,...n[c])):c in r?r[c].push(o):(r[c]=[o],i(...a,(l,...u)=>{l||(n[c]=u);var p=r[c];delete r[c];for(var f=0,h=p.length;f<h;f++)p[f](l,...u)}))});return s.memo=n,s.unmemoized=t,s}function Ul(t,e){return Js(we,t,e)}function zl(t,e,n){return Js(Se(e),t,n)}function Xs(t,e){var n=D(t);return Ks((r,i)=>{n(r[0],i)},e,1)}function Hg(t){return(t<<1)+1}function gl(t){return(t+1>>1)-1}function Os(t,e){return t.priority!==e.priority?t.priority<e.priority:t.pushCount<e.pushCount}function Yl(t,e){var n=Xs(t,e),{push:r,pushAsync:i}=n;n._tasks=new qs,n._createTaskItem=({data:a,priority:o},c)=>({data:a,priority:o,callback:c});function s(a,o){return Array.isArray(a)?a.map(c=>({data:c,priority:o})):{data:a,priority:o}}return n.push=function(a,o=0,c){return r(s(a,o),c)},n.pushAsync=function(a,o=0,c){return i(s(a,o),c)},delete n.unshift,delete n.unshiftAsync,n}function Wg(t,e){if(e=Xe(e),!Array.isArray(t))return e(new TypeError("First argument to race must be an array of functions"));if(!t.length)return e();for(var n=0,r=t.length;n<r;n++)D(t[n])(e)}function Bs(t,e,n,r){var i=[...t].reverse();return Gt(i,e,n,r)}function Rr(t){var e=D(t);return Ln(function(r,i){return r.push((s,...a)=>{let o={};if(s&&(o.error=s),a.length>0){var c=a;a.length<=1&&([c]=a),o.value=c}i(null,o)}),e.apply(this,r)})}function Gl(t){var e;return Array.isArray(t)?e=t.map(Rr):(e={},Object.keys(t).forEach(n=>{e[n]=Rr.call(this,t[n])})),e}function ea(t,e,n,r){let i=D(n);return $r(t,e,(s,a)=>{i(s,(o,c)=>{a(o,!c)})},r)}function Kg(t,e,n){return ea(we,t,e,n)}function Qg(t,e,n,r){return ea(Se(e),t,n,r)}function Zg(t,e,n){return ea(Ae,t,e,n)}function Ql(t){return function(){return t}}function Pr(t,e,n){var r={times:Us,intervalFunc:Ql(Zl)};if(arguments.length<3&&typeof t=="function"?(n=e||Ht(),e=t):(Jg(r,t),n=n||Ht()),typeof e!="function")throw new Error("Invalid arguments for async.retry");var i=D(e),s=1;function a(){i((o,...c)=>{o!==!1&&(o&&s++<r.times&&(typeof r.errorFilter!="function"||r.errorFilter(o))?setTimeout(a,r.intervalFunc(s-1)):n(o,...c))})}return a(),n[Wt]}function Jg(t,e){if(typeof e=="object")t.times=+e.times||Us,t.intervalFunc=typeof e.interval=="function"?e.interval:Ql(+e.interval||Zl),t.errorFilter=e.errorFilter;else if(typeof e=="number"||typeof e=="string")t.times=+e||Us;else throw new Error("Invalid arguments for async.retry")}function Jl(t,e){e||(e=t,t=null);let n=t&&t.arity||e.length;Rn(e)&&(n+=1);var r=D(e);return Ln((i,s)=>{(i.length<n-1||s==null)&&(i.push(s),s=Ht());function a(o){r(...i,o)}return t?Pr(t,a,s):Pr(a,s),s[Wt]})}function Xl(t,e){return Js(Ae,t,e)}function Xg(t,e,n){return Fe(Boolean,r=>r)(we,t,e,n)}function ey(t,e,n,r){return Fe(Boolean,i=>i)(Se(e),t,n,r)}function ty(t,e,n){return Fe(Boolean,r=>r)(Ae,t,e,n)}function ny(t,e,n){var r=D(e);return Fr(t,(s,a)=>{r(s,(o,c)=>{if(o)return a(o);a(o,{value:s,criteria:c})})},(s,a)=>{if(s)return n(s);n(null,a.sort(i).map(o=>o.value))});function i(s,a){var o=s.criteria,c=a.criteria;return o<c?-1:o>c?1:0}}function tu(t,e,n){var r=D(t);return Ln((i,s)=>{var a=!1,o;function c(){var l=t.name||"anonymous",u=new Error('Callback function "'+l+'" timed out.');u.code="ETIMEDOUT",n&&(u.info=n),a=!0,s(u)}i.push((...l)=>{a||(s(...l),clearTimeout(o))}),o=setTimeout(c,e),r(...i)})}function ry(t){for(var e=Array(t);t--;)e[t]=t;return e}function Br(t,e,n,r){var i=D(n);return Pn(ry(t),e,i,r)}function nu(t,e,n){return Br(t,1/0,e,n)}function ru(t,e,n){return Br(t,1,e,n)}function iu(t,e,n,r){arguments.length<=3&&typeof e=="function"&&(r=n,n=e,e=Array.isArray(t)?[]:{}),r=Xe(r||Ht());var i=D(n);return we(t,(s,a,o)=>{i(e,s,a,o)},s=>r(s,e)),r[Wt]}function iy(t,e){var n=null,r;return Lr(t,(i,s)=>{D(i)((a,...o)=>{if(a===!1)return s(a);o.length<2?[r]=o:r=o,n=a,s(a?null:{})})},()=>e(n,r))}function au(t){return(...e)=>(t.unmemoized||t)(...e)}function sy(t,e,n){n=et(n);var r=D(e),i=D(t),s=[];function a(c,...l){if(c)return n(c);s=l,c!==!1&&i(o)}function o(c,l){if(c)return n(c);if(c!==!1){if(!l)return n(null,...s);r(a)}}return i(o)}function ou(t,e,n){let r=D(t);return Cr(i=>r((s,a)=>i(s,!a)),e,n)}function ay(t,e){if(e=Xe(e),!Array.isArray(t))return e(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var n=0;function r(s){var a=D(t[n++]);a(...s,et(i))}function i(s,...a){if(s!==!1){if(s||n===t.length)return e(s,...a);r(a)}}r([])}var rg,vl,wl,Tn,Je,Dr,Se,In,we,Fr,Sl,Ae,Hs,_l,Wt,vg,wg,bg,xg,As,Gt,Pn,Nn,Ts,Is,Ns,Ls,Rs,Ll,Ir,Ps,Nr,Lr,Cs,Ms,Ds,Fs,$s,js,Cl,jr,Fl,qr,Ar,Bl,Js,qs,Vl,Hl,Wl,Kl,Us,Zl,zs,Ys,Vs,eu,su,Cr,cu,oy,cy,uu=Od(()=>{rg=typeof queueMicrotask=="function"&&queueMicrotask,vl=typeof setImmediate=="function"&&setImmediate,wl=typeof process=="object"&&typeof process.nextTick=="function";rg?Tn=queueMicrotask:vl?Tn=setImmediate:wl?Tn=process.nextTick:Tn=bl;Je=xl(Tn);Dr={};Se=t=>(e,n,r)=>{if(r=Xe(r),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return r(null);if(ig(e))return dl(e,t,n,r);if(sg(e))return dl(e[Symbol.asyncIterator](),t,n,r);var i=ug(e),s=!1,a=!1,o=0,c=!1;function l(p,f){if(!a)if(o-=1,p)s=!0,r(p);else if(p===!1)s=!0,a=!0;else{if(f===Dr||s&&o<=0)return s=!0,r(null);c||u()}}function u(){for(c=!0;o<t&&!s;){var p=i();if(p===null){s=!0,o<=0&&r(null);return}o+=1,n(p.value,p.key,et(l))}c=!1}u()};In=C(pg,4);we=C(dg,3);Fr=C(mg,3),Sl=El(Fr);Ae=C(gg,3);Hs=C(yg,3),_l=El(Hs),Wt=Symbol("promiseCallback");vg=/^(?:async\s+)?(?:function)?\s*\w*\s*\(\s*([^)]+)\s*\)(?:\s*{)/,wg=/^(?:async\s+)?\(?\s*([^)=]+)\s*\)?(?:\s*=>)/,bg=/,/,xg=/(=.+)?(\s*)$/;As=class{constructor(){this.head=this.tail=null,this.length=0}removeLink(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e}empty(){for(;this.head;)this.shift();return this}insertAfter(e,n){n.prev=e,n.next=e.next,e.next?e.next.prev=n:this.tail=n,e.next=n,this.length+=1}insertBefore(e,n){n.prev=e.prev,n.next=e,e.prev?e.prev.next=n:this.head=n,e.prev=n,this.length+=1}unshift(e){this.head?this.insertBefore(this.head,e):ml(this,e)}push(e){this.tail?this.insertAfter(this.tail,e):ml(this,e)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var e=this.head;e;)yield e.data,e=e.next}remove(e){for(var n=this.head;n;){var{next:r}=n;e(n)&&this.removeLink(n),n=r}return this}};Gt=C(_g,4);Pn=C(kg,4);Nn=C(Og,4);Ts=C(Ag,3);Is=C(Tg,3);Ns=C(Ig,3);Ls=C(Ng,4);Rs=C(Lg,3);Ll=Nl("dir");Ir=C(Rg,3);Ps=C(Pg,3);Nr=C(Cg,4);Lr=C(Mg,3);Cs=C(Dg,3);Ms=C(Fg,4);Ds=C($g,3);Fs=C(Bg,3);$s=C(Ug,4);js=C(zg,3);Cl=C(Yg,2);jr=C(Vg,4);Fl=Nl("log");qr=C(Gg,4);wl?Ar=process.nextTick:vl?Ar=setImmediate:Ar=bl;Bl=xl(Ar),Js=C((t,e,n)=>{var r=Mr(e)?[]:{};t(e,(i,s,a)=>{D(i)((o,...c)=>{c.length<2&&([c]=c),r[s]=c,a(o)})},i=>n(i,r))},3);qs=class{constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(e){let n;for(;e>0&&Os(this.heap[e],this.heap[n=gl(e)]);){let r=this.heap[e];this.heap[e]=this.heap[n],this.heap[n]=r,e=n}}percDown(e){let n;for(;(n=Hg(e))<this.heap.length&&(n+1<this.heap.length&&Os(this.heap[n+1],this.heap[n])&&(n=n+1),!Os(this.heap[e],this.heap[n]));){let r=this.heap[e];this.heap[e]=this.heap[n],this.heap[n]=r,e=n}}push(e){e.pushCount=++this.pushCount,this.heap.push(e),this.percUp(this.heap.length-1)}unshift(e){return this.heap.push(e)}shift(){let[e]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),e}toArray(){return[...this]}*[Symbol.iterator](){for(let e=0;e<this.heap.length;e++)yield this.heap[e].data}remove(e){let n=0;for(let r=0;r<this.heap.length;r++)e(this.heap[r])||(this.heap[n]=this.heap[r],n++);this.heap.splice(n);for(let r=gl(this.heap.length-1);r>=0;r--)this.percDown(r);return this}};Vl=C(Wg,2);Hl=C(Kg,3);Wl=C(Qg,4);Kl=C(Zg,3);Us=5,Zl=0;zs=C(Xg,3);Ys=C(ey,4);Vs=C(ty,3);eu=C(ny,3);su=C(iy);Cr=C(sy,3);cu=C(ay),oy={apply:yl,applyEach:Sl,applyEachSeries:_l,asyncify:Tr,auto:Ws,autoInject:kl,cargo:Ol,cargoQueue:Al,compose:Tl,concat:Ts,concatLimit:Nn,concatSeries:Is,constant:Il,detect:Ns,detectLimit:Ls,detectSeries:Rs,dir:Ll,doUntil:Rl,doWhilst:Ir,each:Ps,eachLimit:Nr,eachOf:we,eachOfLimit:In,eachOfSeries:Ae,eachSeries:Lr,ensureAsync:Zs,every:Cs,everyLimit:Ms,everySeries:Ds,filter:Fs,filterLimit:$s,filterSeries:js,forever:Cl,groupBy:Ml,groupByLimit:jr,groupBySeries:Dl,log:Fl,map:Fr,mapLimit:Pn,mapSeries:Hs,mapValues:$l,mapValuesLimit:qr,mapValuesSeries:jl,memoize:ql,nextTick:Bl,parallel:Ul,parallelLimit:zl,priorityQueue:Yl,queue:Xs,race:Vl,reduce:Gt,reduceRight:Bs,reflect:Rr,reflectAll:Gl,reject:Hl,rejectLimit:Wl,rejectSeries:Kl,retry:Pr,retryable:Jl,seq:Qs,series:Xl,setImmediate:Je,some:zs,someLimit:Ys,someSeries:Vs,sortBy:eu,timeout:tu,times:nu,timesLimit:Br,timesSeries:ru,transform:iu,tryEach:su,unmemoize:au,until:ou,waterfall:cu,whilst:Cr,all:Cs,allLimit:Ms,allSeries:Ds,any:zs,anyLimit:Ys,anySeries:Vs,find:Ns,findLimit:Ls,findSeries:Rs,flatMap:Ts,flatMapLimit:Nn,flatMapSeries:Is,forEach:Ps,forEachSeries:Lr,forEachLimit:Nr,forEachOf:we,forEachOfSeries:Ae,forEachOfLimit:In,inject:Gt,foldl:Gt,foldr:Bs,select:Fs,selectLimit:$s,selectSeries:js,wrapSync:Tr,during:Cr,doDuring:Ir},cy=oy});var fu=x((O_,pu)=>{pu.exports=pc().PassThrough});var gu=x((A_,mu)=>{var hu=T("util"),Yr=fu();mu.exports={Readable:Ur,Writable:zr};hu.inherits(Ur,Yr);hu.inherits(zr,Yr);function du(t,e,n){t[e]=function(){return delete t[e],n.apply(this,arguments),this[e].apply(this,arguments)}}function Ur(t,e){if(!(this instanceof Ur))return new Ur(t,e);Yr.call(this,e),du(this,"_read",function(){var n=t.call(this,e),r=this.emit.bind(this,"error");n.on("error",r),n.pipe(this)}),this.emit("readable")}function zr(t,e){if(!(this instanceof zr))return new zr(t,e);Yr.call(this,e),du(this,"_write",function(){var n=t.call(this,e),r=this.emit.bind(this,"error");n.on("error",r),this.pipe(n)}),this.emit("writable")}});var _u=x((T_,Su)=>{var vu=9007199254740991,ly="[object Arguments]",uy="[object Function]",py="[object GeneratorFunction]",fy=/^(?:0|[1-9]\d*)$/;function wu(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function hy(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Cn=Object.prototype,Mn=Cn.hasOwnProperty,bu=Cn.toString,dy=Cn.propertyIsEnumerable,yu=Math.max;function my(t,e){var n=ky(t)||_y(t)?hy(t.length,String):[],r=n.length,i=!!r;for(var s in t)(e||Mn.call(t,s))&&!(i&&(s=="length"||Eu(s,r)))&&n.push(s);return n}function gy(t,e,n,r){return t===void 0||ta(t,Cn[n])&&!Mn.call(r,n)?e:t}function yy(t,e,n){var r=t[e];(!(Mn.call(t,e)&&ta(r,n))||n===void 0&&!(e in t))&&(t[e]=n)}function vy(t){if(!ra(t))return Sy(t);var e=Ey(t),n=[];for(var r in t)r=="constructor"&&(e||!Mn.call(t,r))||n.push(r);return n}function xu(t,e){return e=yu(e===void 0?t.length-1:e,0),function(){for(var n=arguments,r=-1,i=yu(n.length-e,0),s=Array(i);++r<i;)s[r]=n[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=n[r];return a[e]=s,wu(t,this,a)}}function wy(t,e,n,r){n||(n={});for(var i=-1,s=e.length;++i<s;){var a=e[i],o=r?r(n[a],t[a],a,n,t):void 0;yy(n,a,o===void 0?t[a]:o)}return n}function by(t){return xu(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,a&&xy(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var o=n[r];o&&t(e,o,r,s)}return e})}function Eu(t,e){return e=e??vu,!!e&&(typeof t=="number"||fy.test(t))&&t>-1&&t%1==0&&t<e}function xy(t,e,n){if(!ra(n))return!1;var r=typeof e;return(r=="number"?na(n)&&Eu(e,n.length):r=="string"&&e in n)?ta(n[e],t):!1}function Ey(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Cn;return t===n}function Sy(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}function ta(t,e){return t===e||t!==t&&e!==e}function _y(t){return Oy(t)&&Mn.call(t,"callee")&&(!dy.call(t,"callee")||bu.call(t)==ly)}var ky=Array.isArray;function na(t){return t!=null&&Ty(t.length)&&!Ay(t)}function Oy(t){return Iy(t)&&na(t)}function Ay(t){var e=ra(t)?bu.call(t):"";return e==uy||e==py}function Ty(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=vu}function ra(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Iy(t){return!!t&&typeof t=="object"}var Ny=by(function(t,e,n,r){wy(e,Ry(e),t,r)}),Ly=xu(function(t){return t.push(void 0,gy),wu(Ny,void 0,t)});function Ry(t){return na(t)?my(t,!0):vy(t)}Su.exports=Ly});var Nu=x((I_,Iu)=>{var Py=9007199254740991,Cy="[object Arguments]",My="[object Function]",Dy="[object GeneratorFunction]",Fy=typeof global=="object"&&global&&global.Object===Object&&global,$y=typeof self=="object"&&self&&self.Object===Object&&self,jy=Fy||$y||Function("return this")();function qy(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var ia=Object.prototype,By=ia.hasOwnProperty,Au=ia.toString,ku=jy.Symbol,Uy=ia.propertyIsEnumerable,Ou=ku?ku.isConcatSpreadable:void 0;function Tu(t,e,n,r,i){var s=-1,a=t.length;for(n||(n=zy),i||(i=[]);++s<a;){var o=t[s];e>0&&n(o)?e>1?Tu(o,e-1,n,r,i):qy(i,o):r||(i[i.length]=o)}return i}function zy(t){return Gy(t)||Vy(t)||!!(Ou&&t&&t[Ou])}function Yy(t){var e=t?t.length:0;return e?Tu(t,1):[]}function Vy(t){return Wy(t)&&By.call(t,"callee")&&(!Uy.call(t,"callee")||Au.call(t)==Cy)}var Gy=Array.isArray;function Hy(t){return t!=null&&Qy(t.length)&&!Ky(t)}function Wy(t){return Jy(t)&&Hy(t)}function Ky(t){var e=Zy(t)?Au.call(t):"";return e==My||e==Dy}function Qy(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Py}function Zy(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Jy(t){return!!t&&typeof t=="object"}Iu.exports=Yy});var Uu=x((N_,Bu)=>{var Xy=200,oa="__lodash_hash_undefined__",ev=9007199254740991,tv="[object Arguments]",nv="[object Function]",rv="[object GeneratorFunction]",iv=/[\\^$.*+?()[\]{}|]/g,sv=/^\[object .+?Constructor\]$/,av=typeof global=="object"&&global&&global.Object===Object&&global,ov=typeof self=="object"&&self&&self.Object===Object&&self,ca=av||ov||Function("return this")();function cv(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function lv(t,e){var n=t?t.length:0;return!!n&&dv(t,e,0)>-1}function uv(t,e,n){for(var r=-1,i=t?t.length:0;++r<i;)if(n(e,t[r]))return!0;return!1}function pv(t,e){for(var n=-1,r=t?t.length:0,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function fv(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function hv(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}function dv(t,e,n){if(e!==e)return hv(t,mv,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function mv(t){return t!==t}function gv(t){return function(e){return t(e)}}function yv(t,e){return t.has(e)}function vv(t,e){return t==null?void 0:t[e]}function wv(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}var bv=Array.prototype,xv=Function.prototype,la=Object.prototype,sa=ca["__core-js_shared__"],Lu=function(){var t=/[^.]+$/.exec(sa&&sa.keys&&sa.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Mu=xv.toString,Gr=la.hasOwnProperty,Du=la.toString,Ev=RegExp("^"+Mu.call(Gr).replace(iv,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ru=ca.Symbol,Sv=la.propertyIsEnumerable,_v=bv.splice,Pu=Ru?Ru.isConcatSpreadable:void 0,Cu=Math.max,kv=$u(ca,"Map"),Dn=$u(Object,"create");function Ot(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ov(){this.__data__=Dn?Dn(null):{}}function Av(t){return this.has(t)&&delete this.__data__[t]}function Tv(t){var e=this.__data__;if(Dn){var n=e[t];return n===oa?void 0:n}return Gr.call(e,t)?e[t]:void 0}function Iv(t){var e=this.__data__;return Dn?e[t]!==void 0:Gr.call(e,t)}function Nv(t,e){var n=this.__data__;return n[t]=Dn&&e===void 0?oa:e,this}Ot.prototype.clear=Ov;Ot.prototype.delete=Av;Ot.prototype.get=Tv;Ot.prototype.has=Iv;Ot.prototype.set=Nv;function Kt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Lv(){this.__data__=[]}function Rv(t){var e=this.__data__,n=Hr(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():_v.call(e,n,1),!0}function Pv(t){var e=this.__data__,n=Hr(e,t);return n<0?void 0:e[n][1]}function Cv(t){return Hr(this.__data__,t)>-1}function Mv(t,e){var n=this.__data__,r=Hr(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}Kt.prototype.clear=Lv;Kt.prototype.delete=Rv;Kt.prototype.get=Pv;Kt.prototype.has=Cv;Kt.prototype.set=Mv;function Qt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Dv(){this.__data__={hash:new Ot,map:new(kv||Kt),string:new Ot}}function Fv(t){return Wr(this,t).delete(t)}function $v(t){return Wr(this,t).get(t)}function jv(t){return Wr(this,t).has(t)}function qv(t,e){return Wr(this,t).set(t,e),this}Qt.prototype.clear=Dv;Qt.prototype.delete=Fv;Qt.prototype.get=$v;Qt.prototype.has=jv;Qt.prototype.set=qv;function Vr(t){var e=-1,n=t?t.length:0;for(this.__data__=new Qt;++e<n;)this.add(t[e])}function Bv(t){return this.__data__.set(t,oa),this}function Uv(t){return this.__data__.has(t)}Vr.prototype.add=Vr.prototype.push=Bv;Vr.prototype.has=Uv;function Hr(t,e){for(var n=t.length;n--;)if(Zv(t[n][0],e))return n;return-1}function zv(t,e,n,r){var i=-1,s=lv,a=!0,o=t.length,c=[],l=e.length;if(!o)return c;n&&(e=pv(e,gv(n))),r?(s=uv,a=!1):e.length>=Xy&&(s=yv,a=!1,e=new Vr(e));e:for(;++i<o;){var u=t[i],p=n?n(u):u;if(u=r||u!==0?u:0,a&&p===p){for(var f=l;f--;)if(e[f]===p)continue e;c.push(u)}else s(e,p,r)||c.push(u)}return c}function Fu(t,e,n,r,i){var s=-1,a=t.length;for(n||(n=Gv),i||(i=[]);++s<a;){var o=t[s];e>0&&n(o)?e>1?Fu(o,e-1,n,r,i):fv(i,o):r||(i[i.length]=o)}return i}function Yv(t){if(!qu(t)||Wv(t))return!1;var e=ju(t)||wv(t)?Ev:sv;return e.test(Kv(t))}function Vv(t,e){return e=Cu(e===void 0?t.length-1:e,0),function(){for(var n=arguments,r=-1,i=Cu(n.length-e,0),s=Array(i);++r<i;)s[r]=n[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=n[r];return a[e]=s,cv(t,this,a)}}function Wr(t,e){var n=t.__data__;return Hv(e)?n[typeof e=="string"?"string":"hash"]:n.map}function $u(t,e){var n=vv(t,e);return Yv(n)?n:void 0}function Gv(t){return Xv(t)||Jv(t)||!!(Pu&&t&&t[Pu])}function Hv(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Wv(t){return!!Lu&&Lu in t}function Kv(t){if(t!=null){try{return Mu.call(t)}catch{}try{return t+""}catch{}}return""}var Qv=Vv(function(t,e){return aa(t)?zv(t,Fu(e,1,aa,!0)):[]});function Zv(t,e){return t===e||t!==t&&e!==e}function Jv(t){return aa(t)&&Gr.call(t,"callee")&&(!Sv.call(t,"callee")||Du.call(t)==tv)}var Xv=Array.isArray;function ew(t){return t!=null&&tw(t.length)&&!ju(t)}function aa(t){return nw(t)&&ew(t)}function ju(t){var e=qu(t)?Du.call(t):"";return e==nv||e==rv}function tw(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ev}function qu(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function nw(t){return!!t&&typeof t=="object"}Bu.exports=Qv});var tp=x((L_,ep)=>{var rw=200,fa="__lodash_hash_undefined__",iw=1/0,sw=9007199254740991,aw="[object Arguments]",ow="[object Function]",cw="[object GeneratorFunction]",lw=/[\\^$.*+?()[\]{}|]/g,uw=/^\[object .+?Constructor\]$/,pw=typeof global=="object"&&global&&global.Object===Object&&global,fw=typeof self=="object"&&self&&self.Object===Object&&self,Qr=pw||fw||Function("return this")();function hw(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function dw(t,e){var n=t?t.length:0;return!!n&&vw(t,e,0)>-1}function mw(t,e,n){for(var r=-1,i=t?t.length:0;++r<i;)if(n(e,t[r]))return!0;return!1}function gw(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function yw(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}function vw(t,e,n){if(e!==e)return yw(t,ww,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function ww(t){return t!==t}function bw(t,e){return t.has(e)}function xw(t,e){return t==null?void 0:t[e]}function Ew(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}function Hu(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var Sw=Array.prototype,_w=Function.prototype,ha=Object.prototype,ua=Qr["__core-js_shared__"],zu=function(){var t=/[^.]+$/.exec(ua&&ua.keys&&ua.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Wu=_w.toString,Zr=ha.hasOwnProperty,Ku=ha.toString,kw=RegExp("^"+Wu.call(Zr).replace(lw,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yu=Qr.Symbol,Ow=ha.propertyIsEnumerable,Aw=Sw.splice,Vu=Yu?Yu.isConcatSpreadable:void 0,Gu=Math.max,Tw=da(Qr,"Map"),pa=da(Qr,"Set"),Fn=da(Object,"create");function At(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Iw(){this.__data__=Fn?Fn(null):{}}function Nw(t){return this.has(t)&&delete this.__data__[t]}function Lw(t){var e=this.__data__;if(Fn){var n=e[t];return n===fa?void 0:n}return Zr.call(e,t)?e[t]:void 0}function Rw(t){var e=this.__data__;return Fn?e[t]!==void 0:Zr.call(e,t)}function Pw(t,e){var n=this.__data__;return n[t]=Fn&&e===void 0?fa:e,this}At.prototype.clear=Iw;At.prototype.delete=Nw;At.prototype.get=Lw;At.prototype.has=Rw;At.prototype.set=Pw;function Zt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Cw(){this.__data__=[]}function Mw(t){var e=this.__data__,n=Jr(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Aw.call(e,n,1),!0}function Dw(t){var e=this.__data__,n=Jr(e,t);return n<0?void 0:e[n][1]}function Fw(t){return Jr(this.__data__,t)>-1}function $w(t,e){var n=this.__data__,r=Jr(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}Zt.prototype.clear=Cw;Zt.prototype.delete=Mw;Zt.prototype.get=Dw;Zt.prototype.has=Fw;Zt.prototype.set=$w;function Jt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function jw(){this.__data__={hash:new At,map:new(Tw||Zt),string:new At}}function qw(t){return Xr(this,t).delete(t)}function Bw(t){return Xr(this,t).get(t)}function Uw(t){return Xr(this,t).has(t)}function zw(t,e){return Xr(this,t).set(t,e),this}Jt.prototype.clear=jw;Jt.prototype.delete=qw;Jt.prototype.get=Bw;Jt.prototype.has=Uw;Jt.prototype.set=zw;function Kr(t){var e=-1,n=t?t.length:0;for(this.__data__=new Jt;++e<n;)this.add(t[e])}function Yw(t){return this.__data__.set(t,fa),this}function Vw(t){return this.__data__.has(t)}Kr.prototype.add=Kr.prototype.push=Yw;Kr.prototype.has=Vw;function Jr(t,e){for(var n=t.length;n--;)if(tb(t[n][0],e))return n;return-1}function Qu(t,e,n,r,i){var s=-1,a=t.length;for(n||(n=Qw),i||(i=[]);++s<a;){var o=t[s];e>0&&n(o)?e>1?Qu(o,e-1,n,r,i):gw(i,o):r||(i[i.length]=o)}return i}function Gw(t){if(!Xu(t)||Jw(t))return!1;var e=Ju(t)||Ew(t)?kw:uw;return e.test(Xw(t))}function Hw(t,e){return e=Gu(e===void 0?t.length-1:e,0),function(){for(var n=arguments,r=-1,i=Gu(n.length-e,0),s=Array(i);++r<i;)s[r]=n[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=n[r];return a[e]=s,hw(t,this,a)}}function Ww(t,e,n){var r=-1,i=dw,s=t.length,a=!0,o=[],c=o;if(n)a=!1,i=mw;else if(s>=rw){var l=e?null:Kw(t);if(l)return Hu(l);a=!1,i=bw,c=new Kr}else c=e?[]:o;e:for(;++r<s;){var u=t[r],p=e?e(u):u;if(u=n||u!==0?u:0,a&&p===p){for(var f=c.length;f--;)if(c[f]===p)continue e;e&&c.push(p),o.push(u)}else i(c,p,n)||(c!==o&&c.push(p),o.push(u))}return o}var Kw=pa&&1/Hu(new pa([,-0]))[1]==iw?function(t){return new pa(t)}:ob;function Xr(t,e){var n=t.__data__;return Zw(e)?n[typeof e=="string"?"string":"hash"]:n.map}function da(t,e){var n=xw(t,e);return Gw(n)?n:void 0}function Qw(t){return rb(t)||nb(t)||!!(Vu&&t&&t[Vu])}function Zw(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Jw(t){return!!zu&&zu in t}function Xw(t){if(t!=null){try{return Wu.call(t)}catch{}try{return t+""}catch{}}return""}var eb=Hw(function(t){return Ww(Qu(t,1,Zu,!0))});function tb(t,e){return t===e||t!==t&&e!==e}function nb(t){return Zu(t)&&Zr.call(t,"callee")&&(!Ow.call(t,"callee")||Ku.call(t)==aw)}var rb=Array.isArray;function ib(t){return t!=null&&sb(t.length)&&!Ju(t)}function Zu(t){return ab(t)&&ib(t)}function Ju(t){var e=Xu(t)?Ku.call(t):"";return e==ow||e==cw}function sb(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=sw}function Xu(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function ab(t){return!!t&&typeof t=="object"}function ob(){}ep.exports=eb});var sp=x((R_,ip)=>{var cb="[object Object]";function lb(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}function ub(t,e){return function(n){return t(e(n))}}var pb=Function.prototype,np=Object.prototype,rp=pb.toString,fb=np.hasOwnProperty,hb=rp.call(Object),db=np.toString,mb=ub(Object.getPrototypeOf,Object);function gb(t){return!!t&&typeof t=="object"}function yb(t){if(!gb(t)||db.call(t)!=cb||lb(t))return!1;var e=mb(t);if(e===null)return!0;var n=fb.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&rp.call(n)==hb}ip.exports=yb});var lp=x((P_,cp)=>{var op=cc(),Xt=T("path"),ma=Nu(),vb=Uu(),wb=tp(),bb=sp(),xb=kr(),Tt=cp.exports={},ap=/[\/\\]/g,Eb=function(t,e){var n=[];return ma(t).forEach(function(r){var i=r.indexOf("!")===0;i&&(r=r.slice(1));var s=e(r);i?n=vb(n,s):n=wb(n,s)}),n};Tt.exists=function(){var t=Xt.join.apply(Xt,arguments);return op.existsSync(t)};Tt.expand=function(...t){var e=bb(t[0])?t.shift():{},n=Array.isArray(t[0])?t[0]:t;if(n.length===0)return[];var r=Eb(n,function(i){return xb.sync(i,e)});return e.filter&&(r=r.filter(function(i){i=Xt.join(e.cwd||"",i);try{return typeof e.filter=="function"?e.filter(i):op.statSync(i)[e.filter]()}catch{return!1}})),r};Tt.expandMapping=function(t,e,n){n=Object.assign({rename:function(s,a){return Xt.join(s||"",a)}},n);var r=[],i={};return Tt.expand(n,t).forEach(function(s){var a=s;n.flatten&&(a=Xt.basename(a)),n.ext&&(a=a.replace(/(\.[^\/]*)?$/,n.ext));var o=n.rename(e,a,n);n.cwd&&(s=Xt.join(n.cwd,s)),o=o.replace(ap,"/"),s=s.replace(ap,"/"),i[o]?i[o].src.push(s):(r.push({src:[s],dest:o}),i[o]=r[r.length-1])}),r};Tt.normalizeFilesArray=function(t){var e=[];return t.forEach(function(n){var r;("src"in n||"dest"in n)&&e.push(n)}),e.length===0?[]:(e=_(e).chain().forEach(function(n){!("src"in n)||!n.src||(Array.isArray(n.src)?n.src=ma(n.src):n.src=[n.src])}).map(function(n){var r=Object.assign({},n);if(delete r.src,delete r.dest,n.expand)return Tt.expandMapping(n.src,n.dest,r).map(function(s){var a=Object.assign({},n);return a.orig=Object.assign({},n),a.src=s.src,a.dest=s.dest,["expand","cwd","flatten","rename","ext"].forEach(function(o){delete a[o]}),a});var i=Object.assign({},n);return i.orig=Object.assign({},n),"src"in i&&Object.defineProperty(i,"src",{enumerable:!0,get:function s(){var a;return"result"in s||(a=n.src,a=Array.isArray(a)?ma(a):[a],s.result=Tt.expand(r,a)),s.result}}),"dest"in i&&(i.dest=n.dest),i}).flatten().value(),e)}});var en=x((M_,fp)=>{var ga=cc(),up=T("path"),C_=T("util"),Sb=gu(),pp=fc(),_b=_u(),kb=T("stream").Stream,Ob=pc().PassThrough,he=fp.exports={};he.file=lp();he.collectStream=function(t,e){var n=[],r=0;t.on("error",e),t.on("data",function(i){n.push(i),r+=i.length}),t.on("end",function(){var i=new Buffer(r),s=0;n.forEach(function(a){a.copy(i,s),s+=a.length}),e(null,i)})};he.dateify=function(t){return t=t||new Date,t instanceof Date?t=t:typeof t=="string"?t=new Date(t):t=new Date,t};he.defaults=function(t,e,n){var r=arguments;return r[0]=r[0]||{},_b(...r)};he.isStream=function(t){return t instanceof kb};he.lazyReadStream=function(t){return new Sb.Readable(function(){return ga.createReadStream(t)})};he.normalizeInputSource=function(t){if(t===null)return new Buffer(0);if(typeof t=="string")return new Buffer(t);if(he.isStream(t)&&!t._readableState){var e=new Ob;return t.pipe(e),e}return t};he.sanitizePath=function(t){return pp(t,!1).replace(/^\w+:/,"").replace(/^(\.\.\/|\/)+/,"")};he.trailingSlashIt=function(t){return t.slice(-1)!=="/"?t+"/":t};he.unixifyPath=function(t){return pp(t,!1).replace(/^\w+:/,"")};he.walkdir=function(t,e,n){var r=[];typeof e=="function"&&(n=e,e=t),ga.readdir(t,function(i,s){var a=0,o,c;if(i)return n(i);(function l(){if(o=s[a++],!o)return n(null,r);c=up.join(t,o),ga.stat(c,function(u,p){r.push({path:c,relative:up.relative(e,c).replace(/\\/g,"/"),stats:p}),p&&p.isDirectory()?he.walkdir(c,e,function(f,h){h.forEach(function(m){r.push(m)}),l()}):l()})})()})}});var gp=x((dp,mp)=>{var Ab=T("util"),Tb={ABORTED:"archive was aborted",DIRECTORYDIRPATHREQUIRED:"diretory dirpath argument must be a non-empty string value",DIRECTORYFUNCTIONINVALIDDATA:"invalid data returned by directory custom data function",ENTRYNAMEREQUIRED:"entry name must be a non-empty string value",FILEFILEPATHREQUIRED:"file filepath argument must be a non-empty string value",FINALIZING:"archive already finalizing",QUEUECLOSED:"queue closed",NOENDMETHOD:"no suitable finalize/end method defined by module",DIRECTORYNOTSUPPORTED:"support for directory entries not defined by module",FORMATSET:"archive format already set",INPUTSTEAMBUFFERREQUIRED:"input source must be valid Stream or Buffer instance",MODULESET:"module already set",SYMLINKNOTSUPPORTED:"support for symlink entries not defined by module",SYMLINKFILEPATHREQUIRED:"symlink filepath argument must be a non-empty string value",SYMLINKTARGETREQUIRED:"symlink target argument must be a non-empty string value",ENTRYNOTSUPPORTED:"entry not supported"};function hp(t,e){Error.captureStackTrace(this,this.constructor),this.message=Tb[t]||t,this.code=t,this.data=e}Ab.inherits(hp,Error);dp=mp.exports=hp});var xp=x((D_,bp)=>{var wa=T("fs"),vp=pl(),yp=(uu(),Td(lu)),ya=T("path"),Te=en(),Ib=T("util").inherits,H=gp(),wp=De().Transform,va=process.platform==="win32",U=function(t,e){if(!(this instanceof U))return new U(t,e);typeof t!="string"&&(e=t,t="zip"),e=this.options=Te.defaults(e,{highWaterMark:1024*1024,statConcurrency:4}),wp.call(this,e),this._format=!1,this._module=!1,this._pending=0,this._pointer=0,this._entriesCount=0,this._entriesProcessedCount=0,this._fsEntriesTotalBytes=0,this._fsEntriesProcessedBytes=0,this._queue=yp.queue(this._onQueueTask.bind(this),1),this._queue.drain(this._onQueueDrain.bind(this)),this._statQueue=yp.queue(this._onStatQueueTask.bind(this),e.statConcurrency),this._statQueue.drain(this._onQueueDrain.bind(this)),this._state={aborted:!1,finalize:!1,finalizing:!1,finalized:!1,modulePiped:!1},this._streams=[]};Ib(U,wp);U.prototype._abort=function(){this._state.aborted=!0,this._queue.kill(),this._statQueue.kill(),this._queue.idle()&&this._shutdown()};U.prototype._append=function(t,e){e=e||{};var n={source:null,filepath:t};e.name||(e.name=t),e.sourcePath=t,n.data=e,this._entriesCount++,e.stats&&e.stats instanceof wa.Stats?(n=this._updateQueueTaskWithStats(n,e.stats),n&&(e.stats.size&&(this._fsEntriesTotalBytes+=e.stats.size),this._queue.push(n))):this._statQueue.push(n)};U.prototype._finalize=function(){this._state.finalizing||this._state.finalized||this._state.aborted||(this._state.finalizing=!0,this._moduleFinalize(),this._state.finalizing=!1,this._state.finalized=!0)};U.prototype._maybeFinalize=function(){return this._state.finalizing||this._state.finalized||this._state.aborted?!1:this._state.finalize&&this._pending===0&&this._queue.idle()&&this._statQueue.idle()?(this._finalize(),!0):!1};U.prototype._moduleAppend=function(t,e,n){if(this._state.aborted){n();return}this._module.append(t,e,function(r){if(this._task=null,this._state.aborted){this._shutdown();return}if(r){this.emit("error",r),setImmediate(n);return}this.emit("entry",e),this._entriesProcessedCount++,e.stats&&e.stats.size&&(this._fsEntriesProcessedBytes+=e.stats.size),this.emit("progress",{entries:{total:this._entriesCount,processed:this._entriesProcessedCount},fs:{totalBytes:this._fsEntriesTotalBytes,processedBytes:this._fsEntriesProcessedBytes}}),setImmediate(n)}.bind(this))};U.prototype._moduleFinalize=function(){typeof this._module.finalize=="function"?this._module.finalize():typeof this._module.end=="function"?this._module.end():this.emit("error",new H("NOENDMETHOD"))};U.prototype._modulePipe=function(){this._module.on("error",this._onModuleError.bind(this)),this._module.pipe(this),this._state.modulePiped=!0};U.prototype._moduleSupports=function(t){return!this._module.supports||!this._module.supports[t]?!1:this._module.supports[t]};U.prototype._moduleUnpipe=function(){this._module.unpipe(this),this._state.modulePiped=!1};U.prototype._normalizeEntryData=function(t,e){t=Te.defaults(t,{type:"file",name:null,date:null,mode:null,prefix:null,sourcePath:null,stats:!1}),e&&t.stats===!1&&(t.stats=e);var n=t.type==="directory";return t.name&&(typeof t.prefix=="string"&&t.prefix!==""&&(t.name=t.prefix+"/"+t.name,t.prefix=null),t.name=Te.sanitizePath(t.name),t.type!=="symlink"&&t.name.slice(-1)==="/"?(n=!0,t.type="directory"):n&&(t.name+="/")),typeof t.mode=="number"?va?t.mode&=511:t.mode&=4095:t.stats&&t.mode===null?(va?t.mode=t.stats.mode&511:t.mode=t.stats.mode&4095,va&&n&&(t.mode=493)):t.mode===null&&(t.mode=n?493:420),t.stats&&t.date===null?t.date=t.stats.mtime:t.date=Te.dateify(t.date),t};U.prototype._onModuleError=function(t){this.emit("error",t)};U.prototype._onQueueDrain=function(){this._state.finalizing||this._state.finalized||this._state.aborted||this._state.finalize&&this._pending===0&&this._queue.idle()&&this._statQueue.idle()&&this._finalize()};U.prototype._onQueueTask=function(t,e){var n=()=>{t.data.callback&&t.data.callback(),e()};if(this._state.finalizing||this._state.finalized||this._state.aborted){n();return}this._task=t,this._moduleAppend(t.source,t.data,n)};U.prototype._onStatQueueTask=function(t,e){if(this._state.finalizing||this._state.finalized||this._state.aborted){e();return}wa.lstat(t.filepath,function(n,r){if(this._state.aborted){setImmediate(e);return}if(n){this._entriesCount--,this.emit("warning",n),setImmediate(e);return}t=this._updateQueueTaskWithStats(t,r),t&&(r.size&&(this._fsEntriesTotalBytes+=r.size),this._queue.push(t)),setImmediate(e)}.bind(this))};U.prototype._shutdown=function(){this._moduleUnpipe(),this.end()};U.prototype._transform=function(t,e,n){t&&(this._pointer+=t.length),n(null,t)};U.prototype._updateQueueTaskWithStats=function(t,e){if(e.isFile())t.data.type="file",t.data.sourceType="stream",t.source=Te.lazyReadStream(t.filepath);else if(e.isDirectory()&&this._moduleSupports("directory"))t.data.name=Te.trailingSlashIt(t.data.name),t.data.type="directory",t.data.sourcePath=Te.trailingSlashIt(t.filepath),t.data.sourceType="buffer",t.source=Buffer.concat([]);else if(e.isSymbolicLink()&&this._moduleSupports("symlink")){var n=wa.readlinkSync(t.filepath),r=ya.dirname(t.filepath);t.data.type="symlink",t.data.linkname=ya.relative(r,ya.resolve(r,n)),t.data.sourceType="buffer",t.source=Buffer.concat([])}else return e.isDirectory()?this.emit("warning",new H("DIRECTORYNOTSUPPORTED",t.data)):e.isSymbolicLink()?this.emit("warning",new H("SYMLINKNOTSUPPORTED",t.data)):this.emit("warning",new H("ENTRYNOTSUPPORTED",t.data)),null;return t.data=this._normalizeEntryData(t.data,e),t};U.prototype.abort=function(){return this._state.aborted||this._state.finalized?this:(this._abort(),this)};U.prototype.append=function(t,e){if(this._state.finalize||this._state.aborted)return this.emit("error",new H("QUEUECLOSED")),this;if(e=this._normalizeEntryData(e),typeof e.name!="string"||e.name.length===0)return this.emit("error",new H("ENTRYNAMEREQUIRED")),this;if(e.type==="directory"&&!this._moduleSupports("directory"))return this.emit("error",new H("DIRECTORYNOTSUPPORTED",{name:e.name})),this;if(t=Te.normalizeInputSource(t),Buffer.isBuffer(t))e.sourceType="buffer";else if(Te.isStream(t))e.sourceType="stream";else return this.emit("error",new H("INPUTSTEAMBUFFERREQUIRED",{name:e.name})),this;return this._entriesCount++,this._queue.push({data:e,source:t}),this};U.prototype.directory=function(t,e,n){if(this._state.finalize||this._state.aborted)return this.emit("error",new H("QUEUECLOSED")),this;if(typeof t!="string"||t.length===0)return this.emit("error",new H("DIRECTORYDIRPATHREQUIRED")),this;this._pending++,e===!1?e="":typeof e!="string"&&(e=t);var r=!1;typeof n=="function"?(r=n,n={}):typeof n!="object"&&(n={});var i={stat:!0,dot:!0};function s(){this._pending--,this._maybeFinalize()}function a(l){this.emit("error",l)}function o(l){c.pause();var u=!1,p=Object.assign({},n);p.name=l.relative,p.prefix=e,p.stats=l.stat,p.callback=c.resume.bind(c);try{if(r){if(p=r(p),p===!1)u=!0;else if(typeof p!="object")throw new H("DIRECTORYFUNCTIONINVALIDDATA",{dirpath:t})}}catch(f){this.emit("error",f);return}if(u){c.resume();return}this._append(l.absolute,p)}var c=vp(t,i);return c.on("error",a.bind(this)),c.on("match",o.bind(this)),c.on("end",s.bind(this)),this};U.prototype.file=function(t,e){return this._state.finalize||this._state.aborted?(this.emit("error",new H("QUEUECLOSED")),this):typeof t!="string"||t.length===0?(this.emit("error",new H("FILEFILEPATHREQUIRED")),this):(this._append(t,e),this)};U.prototype.glob=function(t,e,n){this._pending++,e=Te.defaults(e,{stat:!0,pattern:t});function r(){this._pending--,this._maybeFinalize()}function i(o){this.emit("error",o)}function s(o){a.pause();var c=Object.assign({},n);c.callback=a.resume.bind(a),c.stats=o.stat,c.name=o.relative,this._append(o.absolute,c)}var a=vp(e.cwd||".",e);return a.on("error",i.bind(this)),a.on("match",s.bind(this)),a.on("end",r.bind(this)),this};U.prototype.finalize=function(){if(this._state.aborted){var t=new H("ABORTED");return this.emit("error",t),Promise.reject(t)}if(this._state.finalize){var e=new H("FINALIZING");return this.emit("error",e),Promise.reject(e)}this._state.finalize=!0,this._pending===0&&this._queue.idle()&&this._statQueue.idle()&&this._finalize();var n=this;return new Promise(function(r,i){var s;n._module.on("end",function(){s||r()}),n._module.on("error",function(a){s=!0,i(a)})})};U.prototype.setFormat=function(t){return this._format?(this.emit("error",new H("FORMATSET")),this):(this._format=t,this)};U.prototype.setModule=function(t){return this._state.aborted?(this.emit("error",new H("ABORTED")),this):this._state.module?(this.emit("error",new H("MODULESET")),this):(this._module=t,this._modulePipe(),this)};U.prototype.symlink=function(t,e,n){if(this._state.finalize||this._state.aborted)return this.emit("error",new H("QUEUECLOSED")),this;if(typeof t!="string"||t.length===0)return this.emit("error",new H("SYMLINKFILEPATHREQUIRED")),this;if(typeof e!="string"||e.length===0)return this.emit("error",new H("SYMLINKTARGETREQUIRED",{filepath:t})),this;if(!this._moduleSupports("symlink"))return this.emit("error",new H("SYMLINKNOTSUPPORTED",{filepath:t})),this;var r={};return r.type="symlink",r.name=t.replace(/\\/g,"/"),r.linkname=e.replace(/\\/g,"/"),r.sourceType="buffer",typeof n=="number"&&(r.mode=n),this._entriesCount++,this._queue.push({data:r,source:Buffer.concat([])}),this};U.prototype.pointer=function(){return this._pointer};U.prototype.use=function(t){return this._streams.push(t),this};bp.exports=U});var ti=x((F_,Ep)=>{var ei=Ep.exports=function(){};ei.prototype.getName=function(){};ei.prototype.getSize=function(){};ei.prototype.getLastModifiedDate=function(){};ei.prototype.isDirectory=function(){}});var ni=x(($_,Sp)=>{var be=Sp.exports={};be.dateToDos=function(t,e){e=e||!1;var n=e?t.getFullYear():t.getUTCFullYear();if(n<1980)return 2162688;if(n>=2044)return 2141175677;var r={year:n,month:e?t.getMonth():t.getUTCMonth(),date:e?t.getDate():t.getUTCDate(),hours:e?t.getHours():t.getUTCHours(),minutes:e?t.getMinutes():t.getUTCMinutes(),seconds:e?t.getSeconds():t.getUTCSeconds()};return r.year-1980<<25|r.month+1<<21|r.date<<16|r.hours<<11|r.minutes<<5|r.seconds/2};be.dosToDate=function(t){return new Date((t>>25&127)+1980,(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(t&31)<<1)};be.fromDosTime=function(t){return be.dosToDate(t.readUInt32LE(0))};be.getEightBytes=function(t){var e=Buffer.alloc(8);return e.writeUInt32LE(t%4294967296,0),e.writeUInt32LE(t/4294967296|0,4),e};be.getShortBytes=function(t){var e=Buffer.alloc(2);return e.writeUInt16LE((t&65535)>>>0,0),e};be.getShortBytesValue=function(t,e){return t.readUInt16LE(e)};be.getLongBytes=function(t){var e=Buffer.alloc(4);return e.writeUInt32LE((t&4294967295)>>>0,0),e};be.getLongBytesValue=function(t,e){return t.readUInt32LE(e)};be.toDosTime=function(t){return be.getLongBytes(be.dateToDos(t))}});var ba=x((j_,Ip)=>{var _p=ni(),kp=8,Op=1,Nb=4,Lb=2,Ap=64,Tp=2048,te=Ip.exports=function(){return this instanceof te?(this.descriptor=!1,this.encryption=!1,this.utf8=!1,this.numberOfShannonFanoTrees=0,this.strongEncryption=!1,this.slidingDictionarySize=0,this):new te};te.prototype.encode=function(){return _p.getShortBytes((this.descriptor?kp:0)|(this.utf8?Tp:0)|(this.encryption?Op:0)|(this.strongEncryption?Ap:0))};te.prototype.parse=function(t,e){var n=_p.getShortBytesValue(t,e),r=new te;return r.useDataDescriptor((n&kp)!==0),r.useUTF8ForNames((n&Tp)!==0),r.useStrongEncryption((n&Ap)!==0),r.useEncryption((n&Op)!==0),r.setSlidingDictionarySize(n&Lb?8192:4096),r.setNumberOfShannonFanoTrees(n&Nb?3:2),r};te.prototype.setNumberOfShannonFanoTrees=function(t){this.numberOfShannonFanoTrees=t};te.prototype.getNumberOfShannonFanoTrees=function(){return this.numberOfShannonFanoTrees};te.prototype.setSlidingDictionarySize=function(t){this.slidingDictionarySize=t};te.prototype.getSlidingDictionarySize=function(){return this.slidingDictionarySize};te.prototype.useDataDescriptor=function(t){this.descriptor=t};te.prototype.usesDataDescriptor=function(){return this.descriptor};te.prototype.useEncryption=function(t){this.encryption=t};te.prototype.usesEncryption=function(){return this.encryption};te.prototype.useStrongEncryption=function(t){this.strongEncryption=t};te.prototype.usesStrongEncryption=function(){return this.strongEncryption};te.prototype.useUTF8ForNames=function(t){this.utf8=t};te.prototype.usesUTF8ForNames=function(){return this.utf8}});var Lp=x((q_,Np)=>{Np.exports={PERM_MASK:4095,FILE_TYPE_FLAG:61440,LINK_FLAG:40960,FILE_FLAG:32768,DIR_FLAG:16384,DEFAULT_LINK_PERM:511,DEFAULT_DIR_PERM:493,DEFAULT_FILE_PERM:420}});var xa=x((B_,Rp)=>{Rp.exports={WORD:4,DWORD:8,EMPTY:Buffer.alloc(0),SHORT:2,SHORT_MASK:65535,SHORT_SHIFT:16,SHORT_ZERO:Buffer.from(Array(2)),LONG:4,LONG_ZERO:Buffer.from(Array(4)),MIN_VERSION_INITIAL:10,MIN_VERSION_DATA_DESCRIPTOR:20,MIN_VERSION_ZIP64:45,VERSION_MADEBY:45,METHOD_STORED:0,METHOD_DEFLATED:8,PLATFORM_UNIX:3,PLATFORM_FAT:0,SIG_LFH:67324752,SIG_DD:134695760,SIG_CFH:33639248,SIG_EOCD:101010256,SIG_ZIP64_EOCD:101075792,SIG_ZIP64_EOCD_LOC:117853008,ZIP64_MAGIC_SHORT:65535,ZIP64_MAGIC:4294967295,ZIP64_EXTRA_ID:1,ZLIB_NO_COMPRESSION:0,ZLIB_BEST_SPEED:1,ZLIB_BEST_COMPRESSION:9,ZLIB_DEFAULT_COMPRESSION:-1,MODE_MASK:4095,DEFAULT_FILE_MODE:33188,DEFAULT_DIR_MODE:16877,EXT_FILE_ATTR_DIR:1106051088,EXT_FILE_ATTR_FILE:2175008800,S_IFMT:61440,S_IFIFO:4096,S_IFCHR:8192,S_IFDIR:16384,S_IFBLK:24576,S_IFREG:32768,S_IFLNK:40960,S_IFSOCK:49152,S_DOS_A:32,S_DOS_D:16,S_DOS_V:8,S_DOS_S:4,S_DOS_H:2,S_DOS_R:1}});var Ea=x((U_,Fp)=>{var Rb=T("util").inherits,Pb=fc(),Cp=ti(),Mp=ba(),Pp=Lp(),ie=xa(),Dp=ni(),F=Fp.exports=function(t){if(!(this instanceof F))return new F(t);Cp.call(this),this.platform=ie.PLATFORM_FAT,this.method=-1,this.name=null,this.size=0,this.csize=0,this.gpb=new Mp,this.crc=0,this.time=-1,this.minver=ie.MIN_VERSION_INITIAL,this.mode=-1,this.extra=null,this.exattr=0,this.inattr=0,this.comment=null,t&&this.setName(t)};Rb(F,Cp);F.prototype.getCentralDirectoryExtra=function(){return this.getExtra()};F.prototype.getComment=function(){return this.comment!==null?this.comment:""};F.prototype.getCompressedSize=function(){return this.csize};F.prototype.getCrc=function(){return this.crc};F.prototype.getExternalAttributes=function(){return this.exattr};F.prototype.getExtra=function(){return this.extra!==null?this.extra:ie.EMPTY};F.prototype.getGeneralPurposeBit=function(){return this.gpb};F.prototype.getInternalAttributes=function(){return this.inattr};F.prototype.getLastModifiedDate=function(){return this.getTime()};F.prototype.getLocalFileDataExtra=function(){return this.getExtra()};F.prototype.getMethod=function(){return this.method};F.prototype.getName=function(){return this.name};F.prototype.getPlatform=function(){return this.platform};F.prototype.getSize=function(){return this.size};F.prototype.getTime=function(){return this.time!==-1?Dp.dosToDate(this.time):-1};F.prototype.getTimeDos=function(){return this.time!==-1?this.time:0};F.prototype.getUnixMode=function(){return this.platform!==ie.PLATFORM_UNIX?0:this.getExternalAttributes()>>ie.SHORT_SHIFT&ie.SHORT_MASK};F.prototype.getVersionNeededToExtract=function(){return this.minver};F.prototype.setComment=function(t){Buffer.byteLength(t)!==t.length&&this.getGeneralPurposeBit().useUTF8ForNames(!0),this.comment=t};F.prototype.setCompressedSize=function(t){if(t<0)throw new Error("invalid entry compressed size");this.csize=t};F.prototype.setCrc=function(t){if(t<0)throw new Error("invalid entry crc32");this.crc=t};F.prototype.setExternalAttributes=function(t){this.exattr=t>>>0};F.prototype.setExtra=function(t){this.extra=t};F.prototype.setGeneralPurposeBit=function(t){if(!(t instanceof Mp))throw new Error("invalid entry GeneralPurposeBit");this.gpb=t};F.prototype.setInternalAttributes=function(t){this.inattr=t};F.prototype.setMethod=function(t){if(t<0)throw new Error("invalid entry compression method");this.method=t};F.prototype.setName=function(t,e=!1){t=Pb(t,!1).replace(/^\w+:/,"").replace(/^(\.\.\/|\/)+/,""),e&&(t=`/${t}`),Buffer.byteLength(t)!==t.length&&this.getGeneralPurposeBit().useUTF8ForNames(!0),this.name=t};F.prototype.setPlatform=function(t){this.platform=t};F.prototype.setSize=function(t){if(t<0)throw new Error("invalid entry size");this.size=t};F.prototype.setTime=function(t,e){if(!(t instanceof Date))throw new Error("invalid entry time");this.time=Dp.dateToDos(t,e)};F.prototype.setUnixMode=function(t){t|=this.isDirectory()?ie.S_IFDIR:ie.S_IFREG;var e=0;e|=t<<ie.SHORT_SHIFT|(this.isDirectory()?ie.S_DOS_D:ie.S_DOS_A),this.setExternalAttributes(e),this.mode=t&ie.MODE_MASK,this.platform=ie.PLATFORM_UNIX};F.prototype.setVersionNeededToExtract=function(t){this.minver=t};F.prototype.isDirectory=function(){return this.getName().slice(-1)==="/"};F.prototype.isUnixSymlink=function(){return(this.getUnixMode()&Pp.FILE_TYPE_FLAG)===Pp.LINK_FLAG};F.prototype.isZip64=function(){return this.csize>ie.ZIP64_MAGIC||this.size>ie.ZIP64_MAGIC}});var _a=x((z_,$p)=>{var Cb=T("stream").Stream,Mb=De().PassThrough,Sa=$p.exports={};Sa.isStream=function(t){return t instanceof Cb};Sa.normalizeInputSource=function(t){if(t===null)return Buffer.alloc(0);if(typeof t=="string")return Buffer.from(t);if(Sa.isStream(t)&&!t._readableState){var e=new Mb;return t.pipe(e),e}return t}});var Oa=x((Y_,qp)=>{var Db=T("util").inherits,ka=De().Transform,Fb=ti(),jp=_a(),de=qp.exports=function(t){if(!(this instanceof de))return new de(t);ka.call(this,t),this.offset=0,this._archive={finish:!1,finished:!1,processing:!1}};Db(de,ka);de.prototype._appendBuffer=function(t,e,n){};de.prototype._appendStream=function(t,e,n){};de.prototype._emitErrorCallback=function(t){t&&this.emit("error",t)};de.prototype._finish=function(t){};de.prototype._normalizeEntry=function(t){};de.prototype._transform=function(t,e,n){n(null,t)};de.prototype.entry=function(t,e,n){if(e=e||null,typeof n!="function"&&(n=this._emitErrorCallback.bind(this)),!(t instanceof Fb)){n(new Error("not a valid instance of ArchiveEntry"));return}if(this._archive.finish||this._archive.finished){n(new Error("unacceptable entry after finish"));return}if(this._archive.processing){n(new Error("already processing an entry"));return}if(this._archive.processing=!0,this._normalizeEntry(t),this._entry=t,e=jp.normalizeInputSource(e),Buffer.isBuffer(e))this._appendBuffer(t,e,n);else if(jp.isStream(e))this._appendStream(t,e,n);else{this._archive.processing=!1,n(new Error("input source must be valid Stream or Buffer instance"));return}return this};de.prototype.finish=function(){if(this._archive.processing){this._archive.finish=!0;return}this._finish()};de.prototype.getBytesWritten=function(){return this.offset};de.prototype.write=function(t,e){return t&&(this.offset+=t.length),ka.prototype.write.call(this,t,e)}});var Na=x((V_,Up)=>{var tt=T("buffer").Buffer,Aa=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(Aa=new Int32Array(Aa));function Bp(t){if(tt.isBuffer(t))return t;var e=typeof tt.alloc=="function"&&typeof tt.from=="function";if(typeof t=="number")return e?tt.alloc(t):new tt(t);if(typeof t=="string")return e?tt.from(t):new tt(t);throw new Error("input must be buffer, number, or string, received "+typeof t)}function $b(t){var e=Bp(4);return e.writeInt32BE(t,0),e}function Ta(t,e){t=Bp(t),tt.isBuffer(e)&&(e=e.readUInt32BE(0));for(var n=~~e^-1,r=0;r<t.length;r++)n=Aa[(n^t[r])&255]^n>>>8;return n^-1}function Ia(){return $b(Ta.apply(null,arguments))}Ia.signed=function(){return Ta.apply(null,arguments)};Ia.unsigned=function(){return Ta.apply(null,arguments)>>>0};Up.exports=Ia});var Ra=x(La=>{var zp;(function(t){typeof DO_NOT_EXPORT_CRC>"u"?typeof La=="object"?t(La):typeof define=="function"&&define.amd?define(function(){var e={};return t(e),e}):t(zp={}):t(zp={})})(function(t){t.version="1.2.2";function e(){for(var E=0,$=new Array(256),O=0;O!=256;++O)E=O,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,$[O]=E;return typeof Int32Array<"u"?new Int32Array($):$}var n=e();function r(E){var $=0,O=0,R=0,M=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(R=0;R!=256;++R)M[R]=E[R];for(R=0;R!=256;++R)for(O=E[R],$=256+R;$<4096;$+=256)O=M[$]=O>>>8^E[O&255];var G=[];for(R=1;R!=16;++R)G[R-1]=typeof Int32Array<"u"?M.subarray(R*256,R*256+256):M.slice(R*256,R*256+256);return G}var i=r(n),s=i[0],a=i[1],o=i[2],c=i[3],l=i[4],u=i[5],p=i[6],f=i[7],h=i[8],m=i[9],b=i[10],k=i[11],S=i[12],y=i[13],v=i[14];function w(E,$){for(var O=$^-1,R=0,M=E.length;R<M;)O=O>>>8^n[(O^E.charCodeAt(R++))&255];return~O}function A(E,$){for(var O=$^-1,R=E.length-15,M=0;M<R;)O=v[E[M++]^O&255]^y[E[M++]^O>>8&255]^S[E[M++]^O>>16&255]^k[E[M++]^O>>>24]^b[E[M++]]^m[E[M++]]^h[E[M++]]^f[E[M++]]^p[E[M++]]^u[E[M++]]^l[E[M++]]^c[E[M++]]^o[E[M++]]^a[E[M++]]^s[E[M++]]^n[E[M++]];for(R+=15;M<R;)O=O>>>8^n[(O^E[M++])&255];return~O}function q(E,$){for(var O=$^-1,R=0,M=E.length,G=0,Me=0;R<M;)G=E.charCodeAt(R++),G<128?O=O>>>8^n[(O^G)&255]:G<2048?(O=O>>>8^n[(O^(192|G>>6&31))&255],O=O>>>8^n[(O^(128|G&63))&255]):G>=55296&&G<57344?(G=(G&1023)+64,Me=E.charCodeAt(R++)&1023,O=O>>>8^n[(O^(240|G>>8&7))&255],O=O>>>8^n[(O^(128|G>>2&63))&255],O=O>>>8^n[(O^(128|Me>>6&15|(G&3)<<4))&255],O=O>>>8^n[(O^(128|Me&63))&255]):(O=O>>>8^n[(O^(224|G>>12&15))&255],O=O>>>8^n[(O^(128|G>>6&63))&255],O=O>>>8^n[(O^(128|G&63))&255]);return~O}t.table=n,t.bstr=w,t.buf=A,t.str=q})});var Vp=x((H_,Yp)=>{"use strict";var{Transform:jb}=De(),qb=Ra(),Pa=class extends jb{constructor(e){super(e),this.checksum=Buffer.allocUnsafe(4),this.checksum.writeInt32BE(0,0),this.rawSize=0}_transform(e,n,r){e&&(this.checksum=qb.buf(e,this.checksum)>>>0,this.rawSize+=e.length),r(null,e)}digest(e){let n=Buffer.allocUnsafe(4);return n.writeUInt32BE(this.checksum>>>0,0),e?n.toString(e):n}hex(){return this.digest("hex").toUpperCase()}size(){return this.rawSize}};Yp.exports=Pa});var Hp=x((W_,Gp)=>{"use strict";var{DeflateRaw:Bb}=T("zlib"),Ub=Ra(),Ca=class extends Bb{constructor(e){super(e),this.checksum=Buffer.allocUnsafe(4),this.checksum.writeInt32BE(0,0),this.rawSize=0,this.compressedSize=0}push(e,n){return e&&(this.compressedSize+=e.length),super.push(e,n)}_transform(e,n,r){e&&(this.checksum=Ub.buf(e,this.checksum)>>>0,this.rawSize+=e.length),super._transform(e,n,r)}digest(e){let n=Buffer.allocUnsafe(4);return n.writeUInt32BE(this.checksum>>>0,0),e?n.toString(e):n}hex(){return this.digest("hex").toUpperCase()}size(e=!1){return e?this.compressedSize:this.rawSize}};Gp.exports=Ca});var Ma=x((K_,Wp)=>{"use strict";Wp.exports={CRC32Stream:Vp(),DeflateCRC32Stream:Hp()}});var Zp=x((X_,Qp)=>{var zb=T("util").inherits,Yb=Na(),{CRC32Stream:Vb}=Ma(),{DeflateCRC32Stream:Gb}=Ma(),Kp=Oa(),Q_=Ea(),Z_=ba(),P=xa(),J_=_a(),I=ni(),Z=Qp.exports=function(t){if(!(this instanceof Z))return new Z(t);t=this.options=this._defaults(t),Kp.call(this,t),this._entry=null,this._entries=[],this._archive={centralLength:0,centralOffset:0,comment:"",finish:!1,finished:!1,processing:!1,forceZip64:t.forceZip64,forceLocalTime:t.forceLocalTime}};zb(Z,Kp);Z.prototype._afterAppend=function(t){this._entries.push(t),t.getGeneralPurposeBit().usesDataDescriptor()&&this._writeDataDescriptor(t),this._archive.processing=!1,this._entry=null,this._archive.finish&&!this._archive.finished&&this._finish()};Z.prototype._appendBuffer=function(t,e,n){e.length===0&&t.setMethod(P.METHOD_STORED);var r=t.getMethod();if(r===P.METHOD_STORED&&(t.setSize(e.length),t.setCompressedSize(e.length),t.setCrc(Yb.unsigned(e))),this._writeLocalFileHeader(t),r===P.METHOD_STORED){this.write(e),this._afterAppend(t),n(null,t);return}else if(r===P.METHOD_DEFLATED){this._smartStream(t,n).end(e);return}else{n(new Error("compression method "+r+" not implemented"));return}};Z.prototype._appendStream=function(t,e,n){t.getGeneralPurposeBit().useDataDescriptor(!0),t.setVersionNeededToExtract(P.MIN_VERSION_DATA_DESCRIPTOR),this._writeLocalFileHeader(t);var r=this._smartStream(t,n);e.once("error",function(i){r.emit("error",i),r.end()}),e.pipe(r)};Z.prototype._defaults=function(t){return typeof t!="object"&&(t={}),typeof t.zlib!="object"&&(t.zlib={}),typeof t.zlib.level!="number"&&(t.zlib.level=P.ZLIB_BEST_SPEED),t.forceZip64=!!t.forceZip64,t.forceLocalTime=!!t.forceLocalTime,t};Z.prototype._finish=function(){this._archive.centralOffset=this.offset,this._entries.forEach(function(t){this._writeCentralFileHeader(t)}.bind(this)),this._archive.centralLength=this.offset-this._archive.centralOffset,this.isZip64()&&this._writeCentralDirectoryZip64(),this._writeCentralDirectoryEnd(),this._archive.processing=!1,this._archive.finish=!0,this._archive.finished=!0,this.end()};Z.prototype._normalizeEntry=function(t){t.getMethod()===-1&&t.setMethod(P.METHOD_DEFLATED),t.getMethod()===P.METHOD_DEFLATED&&(t.getGeneralPurposeBit().useDataDescriptor(!0),t.setVersionNeededToExtract(P.MIN_VERSION_DATA_DESCRIPTOR)),t.getTime()===-1&&t.setTime(new Date,this._archive.forceLocalTime),t._offsets={file:0,data:0,contents:0}};Z.prototype._smartStream=function(t,e){var n=t.getMethod()===P.METHOD_DEFLATED,r=n?new Gb(this.options.zlib):new Vb,i=null;function s(){var a=r.digest().readUInt32BE(0);t.setCrc(a),t.setSize(r.size()),t.setCompressedSize(r.size(!0)),this._afterAppend(t),e(i,t)}return r.once("end",s.bind(this)),r.once("error",function(a){i=a}),r.pipe(this,{end:!1}),r};Z.prototype._writeCentralDirectoryEnd=function(){var t=this._entries.length,e=this._archive.centralLength,n=this._archive.centralOffset;this.isZip64()&&(t=P.ZIP64_MAGIC_SHORT,e=P.ZIP64_MAGIC,n=P.ZIP64_MAGIC),this.write(I.getLongBytes(P.SIG_EOCD)),this.write(P.SHORT_ZERO),this.write(P.SHORT_ZERO),this.write(I.getShortBytes(t)),this.write(I.getShortBytes(t)),this.write(I.getLongBytes(e)),this.write(I.getLongBytes(n));var r=this.getComment(),i=Buffer.byteLength(r);this.write(I.getShortBytes(i)),this.write(r)};Z.prototype._writeCentralDirectoryZip64=function(){this.write(I.getLongBytes(P.SIG_ZIP64_EOCD)),this.write(I.getEightBytes(44)),this.write(I.getShortBytes(P.MIN_VERSION_ZIP64)),this.write(I.getShortBytes(P.MIN_VERSION_ZIP64)),this.write(P.LONG_ZERO),this.write(P.LONG_ZERO),this.write(I.getEightBytes(this._entries.length)),this.write(I.getEightBytes(this._entries.length)),this.write(I.getEightBytes(this._archive.centralLength)),this.write(I.getEightBytes(this._archive.centralOffset)),this.write(I.getLongBytes(P.SIG_ZIP64_EOCD_LOC)),this.write(P.LONG_ZERO),this.write(I.getEightBytes(this._archive.centralOffset+this._archive.centralLength)),this.write(I.getLongBytes(1))};Z.prototype._writeCentralFileHeader=function(t){var e=t.getGeneralPurposeBit(),n=t.getMethod(),r=t._offsets,i=t.getSize(),s=t.getCompressedSize();if(t.isZip64()||r.file>P.ZIP64_MAGIC){i=P.ZIP64_MAGIC,s=P.ZIP64_MAGIC,t.setVersionNeededToExtract(P.MIN_VERSION_ZIP64);var a=Buffer.concat([I.getShortBytes(P.ZIP64_EXTRA_ID),I.getShortBytes(24),I.getEightBytes(t.getSize()),I.getEightBytes(t.getCompressedSize()),I.getEightBytes(r.file)],28);t.setExtra(a)}this.write(I.getLongBytes(P.SIG_CFH)),this.write(I.getShortBytes(t.getPlatform()<<8|P.VERSION_MADEBY)),this.write(I.getShortBytes(t.getVersionNeededToExtract())),this.write(e.encode()),this.write(I.getShortBytes(n)),this.write(I.getLongBytes(t.getTimeDos())),this.write(I.getLongBytes(t.getCrc())),this.write(I.getLongBytes(s)),this.write(I.getLongBytes(i));var o=t.getName(),c=t.getComment(),l=t.getCentralDirectoryExtra();e.usesUTF8ForNames()&&(o=Buffer.from(o),c=Buffer.from(c)),this.write(I.getShortBytes(o.length)),this.write(I.getShortBytes(l.length)),this.write(I.getShortBytes(c.length)),this.write(P.SHORT_ZERO),this.write(I.getShortBytes(t.getInternalAttributes())),this.write(I.getLongBytes(t.getExternalAttributes())),r.file>P.ZIP64_MAGIC?this.write(I.getLongBytes(P.ZIP64_MAGIC)):this.write(I.getLongBytes(r.file)),this.write(o),this.write(l),this.write(c)};Z.prototype._writeDataDescriptor=function(t){this.write(I.getLongBytes(P.SIG_DD)),this.write(I.getLongBytes(t.getCrc())),t.isZip64()?(this.write(I.getEightBytes(t.getCompressedSize())),this.write(I.getEightBytes(t.getSize()))):(this.write(I.getLongBytes(t.getCompressedSize())),this.write(I.getLongBytes(t.getSize())))};Z.prototype._writeLocalFileHeader=function(t){var e=t.getGeneralPurposeBit(),n=t.getMethod(),r=t.getName(),i=t.getLocalFileDataExtra();t.isZip64()&&(e.useDataDescriptor(!0),t.setVersionNeededToExtract(P.MIN_VERSION_ZIP64)),e.usesUTF8ForNames()&&(r=Buffer.from(r)),t._offsets.file=this.offset,this.write(I.getLongBytes(P.SIG_LFH)),this.write(I.getShortBytes(t.getVersionNeededToExtract())),this.write(e.encode()),this.write(I.getShortBytes(n)),this.write(I.getLongBytes(t.getTimeDos())),t._offsets.data=this.offset,e.usesDataDescriptor()?(this.write(P.LONG_ZERO),this.write(P.LONG_ZERO),this.write(P.LONG_ZERO)):(this.write(I.getLongBytes(t.getCrc())),this.write(I.getLongBytes(t.getCompressedSize())),this.write(I.getLongBytes(t.getSize()))),this.write(I.getShortBytes(r.length)),this.write(I.getShortBytes(i.length)),this.write(r),this.write(i),t._offsets.contents=this.offset};Z.prototype.getComment=function(t){return this._archive.comment!==null?this._archive.comment:""};Z.prototype.isZip64=function(){return this._archive.forceZip64||this._entries.length>P.ZIP64_MAGIC_SHORT||this._archive.centralLength>P.ZIP64_MAGIC||this._archive.centralOffset>P.ZIP64_MAGIC};Z.prototype.setComment=function(t){this._archive.comment=t}});var Da=x((ek,Jp)=>{Jp.exports={ArchiveEntry:ti(),ZipArchiveEntry:Ea(),ArchiveOutputStream:Oa(),ZipArchiveOutputStream:Zp()}});var ef=x((tk,Xp)=>{var Hb=T("util").inherits,$a=Da().ZipArchiveOutputStream,Wb=Da().ZipArchiveEntry,Fa=en(),tn=Xp.exports=function(t){if(!(this instanceof tn))return new tn(t);t=this.options=t||{},t.zlib=t.zlib||{},$a.call(this,t),typeof t.level=="number"&&t.level>=0&&(t.zlib.level=t.level,delete t.level),!t.forceZip64&&typeof t.zlib.level=="number"&&t.zlib.level===0&&(t.store=!0),t.namePrependSlash=t.namePrependSlash||!1,t.comment&&t.comment.length>0&&this.setComment(t.comment)};Hb(tn,$a);tn.prototype._normalizeFileData=function(t){t=Fa.defaults(t,{type:"file",name:null,namePrependSlash:this.options.namePrependSlash,linkname:null,date:null,mode:null,store:this.options.store,comment:""});var e=t.type==="directory",n=t.type==="symlink";return t.name&&(t.name=Fa.sanitizePath(t.name),!n&&t.name.slice(-1)==="/"?(e=!0,t.type="directory"):e&&(t.name+="/")),(e||n)&&(t.store=!0),t.date=Fa.dateify(t.date),t};tn.prototype.entry=function(t,e,n){if(typeof n!="function"&&(n=this._emitErrorCallback.bind(this)),e=this._normalizeFileData(e),e.type!=="file"&&e.type!=="directory"&&e.type!=="symlink"){n(new Error(e.type+" entries not currently supported"));return}if(typeof e.name!="string"||e.name.length===0){n(new Error("entry name must be a non-empty string value"));return}if(e.type==="symlink"&&typeof e.linkname!="string"){n(new Error("entry linkname must be a non-empty string value when type equals symlink"));return}var r=new Wb(e.name);return r.setTime(e.date,this.options.forceLocalTime),e.namePrependSlash&&r.setName(e.name,!0),e.store&&r.setMethod(0),e.comment.length>0&&r.setComment(e.comment),e.type==="symlink"&&typeof e.mode!="number"&&(e.mode=40960),typeof e.mode=="number"&&(e.type==="symlink"&&(e.mode|=40960),r.setUnixMode(e.mode)),e.type==="symlink"&&typeof e.linkname=="string"&&(t=Buffer.from(e.linkname)),$a.prototype.entry.call(this,r,t,n)};tn.prototype.finalize=function(){this.finish()}});var nf=x((nk,tf)=>{var Kb=ef(),Qb=en(),nt=function(t){if(!(this instanceof nt))return new nt(t);t=this.options=Qb.defaults(t,{comment:"",forceUTC:!1,namePrependSlash:!1,store:!1}),this.supports={directory:!0,symlink:!0},this.engine=new Kb(t)};nt.prototype.append=function(t,e,n){this.engine.entry(t,e,n)};nt.prototype.finalize=function(){this.engine.finalize()};nt.prototype.on=function(){return this.engine.on.apply(this.engine,arguments)};nt.prototype.pipe=function(){return this.engine.pipe.apply(this.engine,arguments)};nt.prototype.unpipe=function(){return this.engine.unpipe.apply(this.engine,arguments)};tf.exports=nt});var Ba=x(rn=>{var Zb=Buffer.alloc,Jb="0000000000000000000",Xb="7777777777777777777",rf="0".charCodeAt(0),sf=Buffer.from("ustar\0","binary"),ex=Buffer.from("00","binary"),tx=Buffer.from("ustar ","binary"),nx=Buffer.from(" \0","binary"),rx=parseInt("7777",8),$n=257,qa=263,ix=function(t,e,n){return typeof t!="number"?n:(t=~~t,t>=e?e:t>=0||(t+=e,t>=0)?t:0)},sx=function(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null},ax=function(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0},af=function(t,e,n,r){for(;n<r;n++)if(t[n]===e)return n;return r},of=function(t){for(var e=256,n=0;n<148;n++)e+=t[n];for(var r=156;r<512;r++)e+=t[r];return e},rt=function(t,e){return t=t.toString(8),t.length>e?Xb.slice(0,e)+" ":Jb.slice(0,e-t.length)+t+" "};function ox(t){var e;if(t[0]===128)e=!0;else if(t[0]===255)e=!1;else return null;for(var n=[],r=t.length-1;r>0;r--){var i=t[r];e?n.push(i):n.push(255-i)}var s=0,a=n.length;for(r=0;r<a;r++)s+=n[r]*Math.pow(256,r);return e?s:-1*s}var it=function(t,e,n){if(t=t.slice(e,e+n),e=0,t[e]&128)return ox(t);for(;e<t.length&&t[e]===32;)e++;for(var r=ix(af(t,32,e,t.length),t.length,t.length);e<r&&t[e]===0;)e++;return r===e?0:parseInt(t.slice(e,r).toString(),8)},nn=function(t,e,n,r){return t.slice(e,af(t,0,e,e+n)).toString(r)},ja=function(t){var e=Buffer.byteLength(t),n=Math.floor(Math.log(e)/Math.log(10))+1;return e+n>=Math.pow(10,n)&&n++,e+n+t};rn.decodeLongPath=function(t,e){return nn(t,0,t.length,e)};rn.encodePax=function(t){var e="";t.name&&(e+=ja(" path="+t.name+`
`)),t.linkname&&(e+=ja(" linkpath="+t.linkname+`
`));var n=t.pax;if(n)for(var r in n)e+=ja(" "+r+"="+n[r]+`
`);return Buffer.from(e)};rn.decodePax=function(t){for(var e={};t.length;){for(var n=0;n<t.length&&t[n]!==32;)n++;var r=parseInt(t.slice(0,n).toString(),10);if(!r)return e;var i=t.slice(n+1,r-1).toString(),s=i.indexOf("=");if(s===-1)return e;e[i.slice(0,s)]=i.slice(s+1),t=t.slice(r)}return e};rn.encode=function(t){var e=Zb(512),n=t.name,r="";if(t.typeflag===5&&n[n.length-1]!=="/"&&(n+="/"),Buffer.byteLength(n)!==n.length)return null;for(;Buffer.byteLength(n)>100;){var i=n.indexOf("/");if(i===-1)return null;r+=r?"/"+n.slice(0,i):n.slice(0,i),n=n.slice(i+1)}return Buffer.byteLength(n)>100||Buffer.byteLength(r)>155||t.linkname&&Buffer.byteLength(t.linkname)>100?null:(e.write(n),e.write(rt(t.mode&rx,6),100),e.write(rt(t.uid,6),108),e.write(rt(t.gid,6),116),e.write(rt(t.size,11),124),e.write(rt(t.mtime.getTime()/1e3|0,11),136),e[156]=rf+ax(t.type),t.linkname&&e.write(t.linkname,157),sf.copy(e,$n),ex.copy(e,qa),t.uname&&e.write(t.uname,265),t.gname&&e.write(t.gname,297),e.write(rt(t.devmajor||0,6),329),e.write(rt(t.devminor||0,6),337),r&&e.write(r,345),e.write(rt(of(e),6),148),e)};rn.decode=function(t,e,n){var r=t[156]===0?0:t[156]-rf,i=nn(t,0,100,e),s=it(t,100,8),a=it(t,108,8),o=it(t,116,8),c=it(t,124,12),l=it(t,136,12),u=sx(r),p=t[157]===0?null:nn(t,157,100,e),f=nn(t,265,32),h=nn(t,297,32),m=it(t,329,8),b=it(t,337,8),k=of(t);if(k===8*32)return null;if(k!==it(t,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(sf.compare(t,$n,$n+6)===0)t[345]&&(i=nn(t,345,155,e)+"/"+i);else if(!(tx.compare(t,$n,$n+6)===0&&nx.compare(t,qa,qa+2)===0)){if(!n)throw new Error("Invalid tar header: unknown format.")}return r===0&&i&&i[i.length-1]==="/"&&(r=5),{name:i,mode:s,uid:a,gid:o,size:c,mtime:new Date(1e3*l),type:u,linkname:p,uname:f,gname:h,devmajor:m,devminor:b}}});var df=x((ik,hf)=>{var lf=T("util"),cx=Md(),jn=Ba(),uf=De().Writable,pf=De().PassThrough,ff=function(){},cf=function(t){return t&=511,t&&512-t},lx=function(t,e){var n=new ri(t,e);return n.end(),n},ux=function(t,e){return e.path&&(t.name=e.path),e.linkpath&&(t.linkname=e.linkpath),e.size&&(t.size=parseInt(e.size,10)),t.pax=e,t},ri=function(t,e){this._parent=t,this.offset=e,pf.call(this,{autoDestroy:!1})};lf.inherits(ri,pf);ri.prototype.destroy=function(t){this._parent.destroy(t)};var $e=function(t){if(!(this instanceof $e))return new $e(t);uf.call(this,t),t=t||{},this._offset=0,this._buffer=cx(),this._missing=0,this._partial=!1,this._onparse=ff,this._header=null,this._stream=null,this._overflow=null,this._cb=null,this._locked=!1,this._destroyed=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null;var e=this,n=e._buffer,r=function(){e._continue()},i=function(f){if(e._locked=!1,f)return e.destroy(f);e._stream||r()},s=function(){e._stream=null;var f=cf(e._header.size);f?e._parse(f,a):e._parse(512,p),e._locked||r()},a=function(){e._buffer.consume(cf(e._header.size)),e._parse(512,p),r()},o=function(){var f=e._header.size;e._paxGlobal=jn.decodePax(n.slice(0,f)),n.consume(f),s()},c=function(){var f=e._header.size;e._pax=jn.decodePax(n.slice(0,f)),e._paxGlobal&&(e._pax=Object.assign({},e._paxGlobal,e._pax)),n.consume(f),s()},l=function(){var f=e._header.size;this._gnuLongPath=jn.decodeLongPath(n.slice(0,f),t.filenameEncoding),n.consume(f),s()},u=function(){var f=e._header.size;this._gnuLongLinkPath=jn.decodeLongPath(n.slice(0,f),t.filenameEncoding),n.consume(f),s()},p=function(){var f=e._offset,h;try{h=e._header=jn.decode(n.slice(0,512),t.filenameEncoding,t.allowUnknownFormat)}catch(m){e.emit("error",m)}if(n.consume(512),!h){e._parse(512,p),r();return}if(h.type==="gnu-long-path"){e._parse(h.size,l),r();return}if(h.type==="gnu-long-link-path"){e._parse(h.size,u),r();return}if(h.type==="pax-global-header"){e._parse(h.size,o),r();return}if(h.type==="pax-header"){e._parse(h.size,c),r();return}if(e._gnuLongPath&&(h.name=e._gnuLongPath,e._gnuLongPath=null),e._gnuLongLinkPath&&(h.linkname=e._gnuLongLinkPath,e._gnuLongLinkPath=null),e._pax&&(e._header=h=ux(h,e._pax),e._pax=null),e._locked=!0,!h.size||h.type==="directory"){e._parse(512,p),e.emit("entry",h,lx(e,f),i);return}e._stream=new ri(e,f),e.emit("entry",h,e._stream,i),e._parse(h.size,s),r()};this._onheader=p,this._parse(512,p)};lf.inherits($e,uf);$e.prototype.destroy=function(t){this._destroyed||(this._destroyed=!0,t&&this.emit("error",t),this.emit("close"),this._stream&&this._stream.emit("close"))};$e.prototype._parse=function(t,e){this._destroyed||(this._offset+=t,this._missing=t,e===this._onheader&&(this._partial=!1),this._onparse=e)};$e.prototype._continue=function(){if(!this._destroyed){var t=this._cb;this._cb=ff,this._overflow?this._write(this._overflow,void 0,t):t()}};$e.prototype._write=function(t,e,n){if(!this._destroyed){var r=this._stream,i=this._buffer,s=this._missing;if(t.length&&(this._partial=!0),t.length<s)return this._missing-=t.length,this._overflow=null,r?r.write(t,n):(i.append(t),n());this._cb=n,this._missing=0;var a=null;t.length>s&&(a=t.slice(s),t=t.slice(0,s)),r?r.end(t):i.append(t),this._overflow=a,this._onparse()}};$e.prototype._final=function(t){if(this._partial)return this.destroy(new Error("Unexpected end of data"));t()};hf.exports=$e});var gf=x((sk,mf)=>{mf.exports=T("fs").constants||T("constants")});var xf=x((ak,bf)=>{var sn=gf(),yf=Dd(),si=oc(),px=Buffer.alloc,vf=De().Readable,an=De().Writable,fx=T("string_decoder").StringDecoder,ii=Ba(),hx=parseInt("755",8),dx=parseInt("644",8),wf=px(1024),za=function(){},Ua=function(t,e){e&=511,e&&t.push(wf.slice(0,512-e))};function mx(t){switch(t&sn.S_IFMT){case sn.S_IFBLK:return"block-device";case sn.S_IFCHR:return"character-device";case sn.S_IFDIR:return"directory";case sn.S_IFIFO:return"fifo";case sn.S_IFLNK:return"symlink"}return"file"}var ai=function(t){an.call(this),this.written=0,this._to=t,this._destroyed=!1};si(ai,an);ai.prototype._write=function(t,e,n){if(this.written+=t.length,this._to.push(t))return n();this._to._drain=n};ai.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var oi=function(){an.call(this),this.linkname="",this._decoder=new fx("utf-8"),this._destroyed=!1};si(oi,an);oi.prototype._write=function(t,e,n){this.linkname+=this._decoder.write(t),n()};oi.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var qn=function(){an.call(this),this._destroyed=!1};si(qn,an);qn.prototype._write=function(t,e,n){n(new Error("No body allowed for this entry"))};qn.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var Ie=function(t){if(!(this instanceof Ie))return new Ie(t);vf.call(this,t),this._drain=za,this._finalized=!1,this._finalizing=!1,this._destroyed=!1,this._stream=null};si(Ie,vf);Ie.prototype.entry=function(t,e,n){if(this._stream)throw new Error("already piping an entry");if(!(this._finalized||this._destroyed)){typeof e=="function"&&(n=e,e=null),n||(n=za);var r=this;if((!t.size||t.type==="symlink")&&(t.size=0),t.type||(t.type=mx(t.mode)),t.mode||(t.mode=t.type==="directory"?hx:dx),t.uid||(t.uid=0),t.gid||(t.gid=0),t.mtime||(t.mtime=new Date),typeof e=="string"&&(e=Buffer.from(e)),Buffer.isBuffer(e)){t.size=e.length,this._encode(t);var i=this.push(e);return Ua(r,t.size),i?process.nextTick(n):this._drain=n,new qn}if(t.type==="symlink"&&!t.linkname){var s=new oi;return yf(s,function(o){if(o)return r.destroy(),n(o);t.linkname=s.linkname,r._encode(t),n()}),s}if(this._encode(t),t.type!=="file"&&t.type!=="contiguous-file")return process.nextTick(n),new qn;var a=new ai(this);return this._stream=a,yf(a,function(o){if(r._stream=null,o)return r.destroy(),n(o);if(a.written!==t.size)return r.destroy(),n(new Error("size mismatch"));Ua(r,t.size),r._finalizing&&r.finalize(),n()}),a}};Ie.prototype.finalize=function(){if(this._stream){this._finalizing=!0;return}this._finalized||(this._finalized=!0,this.push(wf),this.push(null))};Ie.prototype.destroy=function(t){this._destroyed||(this._destroyed=!0,t&&this.emit("error",t),this.emit("close"),this._stream&&this._stream.destroy&&this._stream.destroy())};Ie.prototype._encode=function(t){if(!t.pax){var e=ii.encode(t);if(e){this.push(e);return}}this._encodePax(t)};Ie.prototype._encodePax=function(t){var e=ii.encodePax({name:t.name,linkname:t.linkname,pax:t.pax}),n={name:"PaxHeader",mode:t.mode,uid:t.uid,gid:t.gid,size:e.length,mtime:t.mtime,type:"pax-header",linkname:t.linkname&&"PaxHeader",uname:t.uname,gname:t.gname,devmajor:t.devmajor,devminor:t.devminor};this.push(ii.encode(n)),this.push(e),Ua(this,e.length),n.size=t.size,n.type=t.type,this.push(ii.encode(n))};Ie.prototype._read=function(t){var e=this._drain;this._drain=za,e()};bf.exports=Ie});var Ef=x(Ya=>{Ya.extract=df();Ya.pack=xf()});var kf=x((ck,_f)=>{var gx=T("zlib"),yx=Ef(),Sf=en(),je=function(t){if(!(this instanceof je))return new je(t);t=this.options=Sf.defaults(t,{gzip:!1}),typeof t.gzipOptions!="object"&&(t.gzipOptions={}),this.supports={directory:!0,symlink:!0},this.engine=yx.pack(t),this.compressor=!1,t.gzip&&(this.compressor=gx.createGzip(t.gzipOptions),this.compressor.on("error",this._onCompressorError.bind(this)))};je.prototype._onCompressorError=function(t){this.engine.emit("error",t)};je.prototype.append=function(t,e,n){var r=this;e.mtime=e.date;function i(a,o){if(a){n(a);return}r.engine.entry(e,o,function(c){n(c,e)})}if(e.sourceType==="buffer")i(null,t);else if(e.sourceType==="stream"&&e.stats){e.size=e.stats.size;var s=r.engine.entry(e,function(a){n(a,e)});t.pipe(s)}else e.sourceType==="stream"&&Sf.collectStream(t,i)};je.prototype.finalize=function(){this.engine.finalize()};je.prototype.on=function(){return this.engine.on.apply(this.engine,arguments)};je.prototype.pipe=function(t,e){return this.compressor?this.engine.pipe.apply(this.engine,[this.compressor]).pipe(t,e):this.engine.pipe.apply(this.engine,arguments)};je.prototype.unpipe=function(){return this.compressor?this.compressor.unpipe.apply(this.compressor,arguments):this.engine.unpipe.apply(this.engine,arguments)};_f.exports=je});var If=x((lk,Tf)=>{var vx=T("util").inherits,Of=De().Transform,wx=Na(),Af=en(),st=function(t){if(!(this instanceof st))return new st(t);t=this.options=Af.defaults(t,{}),Of.call(this,t),this.supports={directory:!0,symlink:!0},this.files=[]};vx(st,Of);st.prototype._transform=function(t,e,n){n(null,t)};st.prototype._writeStringified=function(){var t=JSON.stringify(this.files);this.write(t)};st.prototype.append=function(t,e,n){var r=this;e.crc32=0;function i(s,a){if(s){n(s);return}e.size=a.length||0,e.crc32=wx.unsigned(a),r.files.push(e),n(null,e)}e.sourceType==="buffer"?i(null,t):e.sourceType==="stream"&&Af.collectStream(t,i)};st.prototype.finalize=function(){this._writeStringified(),this.end()};Tf.exports=st});var Va=x((uk,Nf)=>{var bx=xp(),Bn={},at=function(t,e){return at.create(t,e)};at.create=function(t,e){if(Bn[t]){var n=new bx(t,e);return n.setFormat(t),n.setModule(new Bn[t](e)),n}else throw new Error("create("+t+"): format not registered")};at.registerFormat=function(t,e){if(Bn[t])throw new Error("register("+t+"): format already registered");if(typeof e!="function")throw new Error("register("+t+"): format module invalid");if(typeof e.prototype.append!="function"||typeof e.prototype.finalize!="function")throw new Error("register("+t+"): format module missing methods");Bn[t]=e};at.isRegisteredFormat=function(t){return!!Bn[t]};at.registerFormat("zip",nf());at.registerFormat("tar",kf());at.registerFormat("json",If());Nf.exports=at});var Lf=x(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});ci.zipDirectory=void 0;var on=T("fs"),xx=T("path"),Ex=kr(),Sx=Va();async function _x(t,e,n){let r=`${e}.${Ix()}._tmp`;await kx(t,r),await Ox(r,e,n)}ci.zipDirectory=_x;function kx(t,e){return new Promise(async(n,r)=>{let i={dot:!0,nodir:!0,follow:!0,cwd:t},s=Ex.sync("**",i),a=(0,on.createWriteStream)(e),o=Sx("zip");o.on("warning",r),o.on("error",r),a.once("close",n),o.pipe(a);for(let c of s){let l=xx.resolve(t,c),[u,p]=await Promise.all([on.promises.readFile(l),on.promises.stat(l)]);o.append(u,{name:c,date:new Date("1980-01-01T00:00:00.000Z"),mode:p.mode})}await o.finalize()})}async function Ox(t,e,n){let r=100,i=5;for(;;)try{await Tx(e)&&await on.promises.unlink(e),await on.promises.rename(t,e);return}catch(s){if(s.code!=="EPERM"||i--<=0)throw s;n(s.message),await Ax(Math.floor(Math.random()*r)),r*=2}}function Ax(t){return new Promise(e=>setTimeout(e,t))}async function Tx(t){try{return await on.promises.stat(t),!0}catch(e){if(e.code==="ENOENT")return!1;throw e}}function Ix(){return Math.random().toString(36).replace(/[^a-z0-9]+/g,"")}});var Rf=x(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.rmRfSync=ot.emptyDirSync=ot.pathExists=void 0;var Un=T("fs"),Nx=T("path"),Lx=Un.promises;async function Rx(t){try{return await Lx.stat(t),!0}catch(e){if(e.code!=="ENOENT")throw e;return!1}}ot.pathExists=Rx;function Ga(t){Un.readdirSync(t,{withFileTypes:!0}).forEach(e=>{let n=Nx.join(t,e.name);e.isDirectory()?(Ga(n),Un.rmdirSync(n)):Un.unlinkSync(n)})}ot.emptyDirSync=Ga;function Px(t){Ga(t),Un.rmdirSync(t)}ot.rmRfSync=Px});var Mf=x(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.FileAssetHandler=void 0;var Pf=T("fs"),Ha=T("path"),Cx=ur(),Mx=Pc(),qe=_n(),Dx=Lf(),Fx=Rf(),$x=os(),jx=fr(),qx=22,Wa=class{constructor(e,n,r){this.workDir=e,this.asset=n,this.host=r,this.fileCacheRoot=Ha.join(e,".cache")}async build(){}async publish(){let e=await(0,$x.replaceAwsPlaceholders)(this.asset.destination,this.host.aws),n=`s3://${e.bucketName}/${e.objectKey}`,r=await this.host.aws.s3Client(e);this.host.emitMessage(qe.EventType.CHECK,`Check ${n}`);let i=lt.for(this.host),s=async()=>{var u;return(u=await this.host.aws.discoverTargetAccount(e))==null?void 0:u.accountId};switch(await i.bucketOwnership(r,e.bucketName)){case ct.MINE:break;case ct.DOES_NOT_EXIST:throw new Error(`No bucket named '${e.bucketName}'. Is account ${await s()} bootstrapped?`);case ct.SOMEONE_ELSES_OR_NO_ACCESS:throw new Error(`Bucket named '${e.bucketName}' exists, but not in account ${await s()}. Wrong account?`)}if(await Bx(r,e.bucketName,e.objectKey)){this.host.emitMessage(qe.EventType.FOUND,`Found ${n}`);return}let a={},o=await i.bucketEncryption(r,e.bucketName);switch(o.type){case"no_encryption":break;case"aes256":a={ServerSideEncryption:"AES256"};break;case"kms":a={ServerSideEncryption:"aws:kms",SSEKMSKeyId:o.kmsKeyId};break;case"does_not_exist":this.host.emitMessage(qe.EventType.DEBUG,`No bucket named '${e.bucketName}'. Is account ${await s()} bootstrapped?`);break;case"access_denied":this.host.emitMessage(qe.EventType.DEBUG,`Could not read encryption settings of bucket '${e.bucketName}': uploading with default settings ("cdk bootstrap" to version 9 if your organization's policies prevent a successful upload or to get rid of this message).`);break}if(this.host.aborted)return;let c=this.asset.source.executable?await this.externalPackageFile(this.asset.source.executable):await this.packageFile(this.asset.source);this.host.emitMessage(qe.EventType.UPLOAD,`Upload ${n}`);let l=Object.assign({},{Bucket:e.bucketName,Key:e.objectKey,Body:(0,Pf.createReadStream)(c.packagedPath),ContentType:c.contentType},a);await r.upload(l).promise()}async packageFile(e){if(!e.path)throw new Error(`'path' is expected in the File asset source, got: ${JSON.stringify(e)}`);let n=Ha.resolve(this.workDir,e.path);if(e.packaging===Cx.FileAssetPackaging.ZIP_DIRECTORY){let r="application/zip";await Pf.promises.mkdir(this.fileCacheRoot,{recursive:!0});let i=Ha.join(this.fileCacheRoot,`${this.asset.id.assetId}.zip`);return await(0,Fx.pathExists)(i)?(this.host.emitMessage(qe.EventType.CACHED,`From cache ${i}`),{packagedPath:i,contentType:r}):(this.host.emitMessage(qe.EventType.BUILD,`Zip ${n} -> ${i}`),await(0,Dx.zipDirectory)(n,i,s=>this.host.emitMessage(qe.EventType.DEBUG,s)),{packagedPath:i,contentType:r})}else{let r=Mx.getType(n)??"application/octet-stream";return{packagedPath:n,contentType:r}}}async externalPackageFile(e){return this.host.emitMessage(qe.EventType.BUILD,`Building asset source using command: '${e}'`),{packagedPath:(await(0,jx.shell)(e,{quiet:!0})).trim(),contentType:"application/zip"}}};li.FileAssetHandler=Wa;var ct;(function(t){t[t.DOES_NOT_EXIST=0]="DOES_NOT_EXIST",t[t.MINE=1]="MINE",t[t.SOMEONE_ELSES_OR_NO_ACCESS=2]="SOMEONE_ELSES_OR_NO_ACCESS"})(ct||(ct={}));async function Bx(t,e,n){let r=await t.listObjectsV2({Bucket:e,Prefix:n,MaxKeys:1}).promise();return r.Contents!=null&&r.Contents.some(i=>i.Key===n&&(i.Size==null||i.Size>qx))}var lt=class{static for(e){let n=lt.caches.get(e);if(n)return n;let r=new lt;return lt.caches.set(e,r),r}constructor(){this.ownerships=new Map,this.encryptions=new Map}async bucketOwnership(e,n){return Cf(this.ownerships,n,()=>this._bucketOwnership(e,n))}async bucketEncryption(e,n){return Cf(this.encryptions,n,()=>this._bucketEncryption(e,n))}async _bucketOwnership(e,n){try{return await e.getBucketLocation({Bucket:n}).promise(),ct.MINE}catch(r){if(r.code==="NoSuchBucket")return ct.DOES_NOT_EXIST;if(["AccessDenied","AllAccessDisabled"].includes(r.code))return ct.SOMEONE_ELSES_OR_NO_ACCESS;throw r}}async _bucketEncryption(e,n){var r,i,s,a;try{let o=await e.getBucketEncryption({Bucket:n}).promise();if((((i=(r=o==null?void 0:o.ServerSideEncryptionConfiguration)==null?void 0:r.Rules)==null?void 0:i.length)??0)>0){let l=(a=(s=o==null?void 0:o.ServerSideEncryptionConfiguration)==null?void 0:s.Rules[0])==null?void 0:a.ApplyServerSideEncryptionByDefault,u=l==null?void 0:l.SSEAlgorithm;if(u==="AES256")return{type:"aes256"};if(u==="aws:kms")return{type:"kms",kmsKeyId:l==null?void 0:l.KMSMasterKeyID}}return{type:"no_encryption"}}catch(o){return o.code==="NoSuchBucket"?{type:"does_not_exist"}:o.code==="ServerSideEncryptionConfigurationNotFoundError"?{type:"no_encryption"}:["AccessDenied","AllAccessDisabled"].includes(o.code)?{type:"access_denied"}:{type:"no_encryption"}}}};lt.caches=new WeakMap;async function Cf(t,e,n){if(t.has(e))return t.get(e);let r=await n(e);return t.set(e,r),r}});var Qa=x(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.DestinationPattern=xe.DestinationIdentifier=xe.DockerImageManifestEntry=xe.FileManifestEntry=xe.AssetManifest=void 0;var Ux=T("fs"),Df=T("path"),zx=ur(),Ne=class{static fromFile(e){try{let n=zx.Manifest.loadAssetManifest(e);return new Ne(Df.dirname(e),n)}catch(n){throw new Error(`Canot read asset manifest '${e}': ${n.message}`)}}static fromPath(e){let n;try{n=Ux.statSync(e)}catch(r){throw new Error(`Cannot read asset manifest at '${e}': ${r.message}`)}return n.isDirectory()?Ne.fromFile(Df.join(e,Ne.DEFAULT_FILENAME)):Ne.fromFile(e)}constructor(e,n){this.manifest=n,this.directory=e}select(e){if(e===void 0)return this;let n={version:this.manifest.version,dockerImages:{},files:{}};for(let r of Yx)for(let[i,s]of Object.entries(this.manifest[r]||{})){let a=Vx(s.destinations,(o,c)=>e.some(l=>l.matches(new Yn(i,c))));Object.keys(a).length>0&&(n[r][i]={...s,destinations:a})}return new Ne(this.directory,n)}list(){return[...e("file",this.manifest.files||{}),...e("docker-image",this.manifest.dockerImages||{})];function e(n,r){let i=new Array;for(let[s,a]of Object.entries(r||{})){i.push(`${s} ${n} ${JSON.stringify(a.source)}`);let o=Object.entries(a.destinations).map(([c,l])=>` ${s}:${c} ${JSON.stringify(l)}`);i.push(...Gx(o,"  "))}return i}}get entries(){return[...Ka(this.manifest.files||{},zn),...Ka(this.manifest.dockerImages||{},ui)]}get files(){return Ka(this.manifest.files||{},zn)}};xe.AssetManifest=Ne;Ne.DEFAULT_FILENAME="assets.json";function Ka(t,e){let n=new Array;for(let[r,i]of Object.entries(t))for(let[s,a]of Object.entries(i.destinations))n.push(new e(new Yn(r,s),i.source,a));return n}var Yx=["files","dockerImages"],zn=class{constructor(e,n,r){this.id=e,this.source=n,this.destination=r,this.type="file",this.genericSource=n,this.genericDestination=r}};xe.FileManifestEntry=zn;var ui=class{constructor(e,n,r){this.id=e,this.source=n,this.destination=r,this.type="docker-image",this.genericSource=n,this.genericDestination=r}};xe.DockerImageManifestEntry=ui;var Yn=class{constructor(e,n){this.assetId=e,this.destinationId=n}toString(){return this.destinationId?`${this.assetId}:${this.destinationId}`:this.assetId}};xe.DestinationIdentifier=Yn;function Vx(t,e){let n={};for(let[r,i]of Object.entries(t))e(i,r)&&(n[r]=i);return n}var cn=class{static parse(e){if(!e)throw new Error("Empty string is not a valid destination identifier");let n=e.split(":").map(r=>r!=="*"?r:void 0);if(n.length===1)return new cn(n[0]);if(n.length===2)return new cn(n[0]||void 0,n[1]||void 0);throw new Error(`Asset identifier must contain at most 2 ':'-separated parts, got '${e}'`)}constructor(e,n){this.assetId=e,this.destinationId=n}matches(e){return(this.assetId===void 0||this.assetId===e.assetId)&&(this.destinationId===void 0||this.destinationId===e.destinationId)}toString(){return`${this.assetId??"*"}:${this.destinationId??"*"}`}};xe.DestinationPattern=cn;function Gx(t,e=""){let n=new Array;for(let r=0;r<t.length;r++){let s=r===t.length-1?"\u2514":"\u251C";n.push(`${e}${s}${t[r]}`)}return n}});var $f=x(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});pi.makeAssetHandler=void 0;var Hx=kc(),Wx=Mf(),Ff=Qa();function Kx(t,e,n){if(e instanceof Ff.FileManifestEntry)return new Wx.FileAssetHandler(t.directory,e,n);if(e instanceof Ff.DockerImageManifestEntry)return new Hx.ContainerImageAssetHandler(t.directory,e,n);throw new Error(`Unrecognized asset type: '${e}'`)}pi.makeAssetHandler=Kx});var jf=x(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.AssetPublishing=void 0;var Qx=_c(),Zx=$f(),Za=_n(),Ja=class{constructor(e,n){this.manifest=e,this.options=n,this.message="Starting",this.failures=new Array,this.completedOperations=0,this.aborted=!1,this.assets=e.entries,this.totalOperations=this.assets.length,this.publishInParallel=n.publishInParallel??!1,this.buildAssets=n.buildAssets??!0,this.publishAssets=n.publishAssets??!0;let i=(()=>this.buildAssets&&this.publishAssets?{startMessagePrefix:"Building and publishing",successMessagePrefix:"Built and published",errorMessagePrefix:"Error building and publishing"}:this.buildAssets?{startMessagePrefix:"Building",successMessagePrefix:"Built",errorMessagePrefix:"Error building"}:{startMessagePrefix:"Publishing",successMessagePrefix:"Published",errorMessagePrefix:"Error publishing"})();this.startMessagePrefix=i.startMessagePrefix,this.successMessagePrefix=i.successMessagePrefix,this.errorMessagePrefix=i.errorMessagePrefix;let s=this;this.handlerHost={aws:this.options.aws,get aborted(){return s.aborted},emitMessage(a,o){s.progressEvent(a,o)},dockerFactory:new Qx.DockerFactory}}async publish(){if(this.publishInParallel)await Promise.all(this.assets.map(async e=>this.publishAsset(e)));else for(let e of this.assets)if(!await this.publishAsset(e))break;if((this.options.throwOnError??!0)&&this.failures.length>0)throw new Error(`${this.errorMessagePrefix}: ${this.failures.map(e=>e.error.message)}`)}async publishAsset(e){try{if(this.progressEvent(Za.EventType.START,`${this.startMessagePrefix} ${e.id}`))return!1;let n=(0,Zx.makeAssetHandler)(this.manifest,e,this.handlerHost);if(this.buildAssets&&await n.build(),this.publishAssets&&await n.publish(),this.aborted)throw new Error("Aborted");if(this.completedOperations++,this.progressEvent(Za.EventType.SUCCESS,`${this.successMessagePrefix} ${e.id}`))return!1}catch(n){if(this.failures.push({asset:e,error:n}),this.completedOperations++,this.progressEvent(Za.EventType.FAIL,n.message))return!1}return!0}get percentComplete(){return this.totalOperations===0?100:Math.floor(this.completedOperations/this.totalOperations*100)}abort(){this.aborted=!0}get hasFailures(){return this.failures.length>0}progressEvent(e,n){return this.message=n,this.options.progressListener&&this.options.progressListener.onPublishEvent(e,this),this.aborted}};fi.AssetPublishing=Ja});var qf=x(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});hi.DefaultAwsClient=void 0;var Jx=T("os"),Xa=class{constructor(e){process.env.AWS_SDK_LOAD_CONFIG="1",process.env.AWS_STS_REGIONAL_ENDPOINTS="regional",process.env.AWS_NODEJS_CONNECTION_REUSE_ENABLED="1",e&&(process.env.AWS_PROFILE=e),process.env.AWS_SDK_JS_SUPPRESS_MAINTENANCE_MODE_MESSAGE="1",this.AWS=ts()}async s3Client(e){return new this.AWS.S3(await this.awsOptions(e))}async ecrClient(e){return new this.AWS.ECR(await this.awsOptions(e))}async secretsManagerClient(e){return new this.AWS.SecretsManager(await this.awsOptions(e))}async discoverPartition(){return(await this.discoverCurrentAccount()).partition}async discoverDefaultRegion(){return this.AWS.config.region||"us-east-1"}async discoverCurrentAccount(){if(this.account===void 0){let n=await new this.AWS.STS().getCallerIdentity().promise();if(!n.Account||!n.Arn)throw new Error(`Unrecognized response from STS: '${JSON.stringify(n)}'`);this.account={accountId:n.Account,partition:n.Arn.split(":")[1]}}return this.account}async discoverTargetAccount(e){let r=await new this.AWS.STS(await this.awsOptions(e)).getCallerIdentity().promise();if(!r.Account||!r.Arn)throw new Error(`Unrecognized response from STS: '${JSON.stringify(r)}'`);return{accountId:r.Account,partition:r.Arn.split(":")[1]}}async awsOptions(e){let n;return e.assumeRoleArn&&(n=await this.assumeRole(e.region,e.assumeRoleArn,e.assumeRoleExternalId)),{region:e.region,customUserAgent:"cdk-assets",credentials:n}}async assumeRole(e,n,r){return new this.AWS.ChainableTemporaryCredentials({params:{RoleArn:n,ExternalId:r,RoleSessionName:`cdk-assets-${Xx()}`},stsConfig:{region:e,customUserAgent:"cdk-assets"}})}};hi.DefaultAwsClient=Xa;function Xx(){try{return Jx.userInfo().username.replace(/[^\w+=,.@-]/g,"@")}catch{return"noname"}}});var mi=x(Le=>{"use strict";var e0=Le&&Le.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),di=Le&&Le.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&e0(e,t,n)};Object.defineProperty(Le,"__esModule",{value:!0});di(jf(),Le);di(Qa(),Le);di(qf(),Le);di(_n(),Le)});var eo=x(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.buildAssets=ln.publishAssets=void 0;var gi=Ut(),Uf=mi(),Bf=rs(),Re=Et();async function t0(t,e,n,r={}){if(n.account===void 0||n.account===gi.UNKNOWN_ACCOUNT||n.region===void 0||n.account===gi.UNKNOWN_REGION)throw new Error(`Asset publishing requires resolved account and region, got ${JSON.stringify(n)}`);let i=new Uf.AssetPublishing(t,{aws:new yi(e,n),progressListener:new vi(r.quiet??!1),throwOnError:!1,publishInParallel:r.parallel??!0,buildAssets:r.buildAssets??!0,publishAssets:!0});if(await i.publish(),i.hasFailures)throw new Error("Failed to publish one or more assets. See the error messages above for more information.")}ln.publishAssets=t0;async function n0(t,e,n,r={}){if(n.account===void 0||n.account===gi.UNKNOWN_ACCOUNT||n.region===void 0||n.account===gi.UNKNOWN_REGION)throw new Error(`Asset building requires resolved account and region, got ${JSON.stringify(n)}`);let i=new Uf.AssetPublishing(t,{aws:new yi(e,n),progressListener:new vi(r.quiet??!1),throwOnError:!1,publishInParallel:r.parallel??!0,buildAssets:!0,publishAssets:!1});if(await i.publish(),i.hasFailures)throw new Error("Failed to build one or more assets. See the error messages above for more information.")}ln.buildAssets=n0;var yi=class{constructor(e,n){this.aws=e,this.targetEnv=n,this.sdkCache=new Map}async discoverPartition(){return await this.aws.baseCredentialsPartition(this.targetEnv,Bf.Mode.ForWriting)??"aws"}async discoverDefaultRegion(){return this.targetEnv.region}async discoverCurrentAccount(){return await this.aws.defaultAccount()??{accountId:"<unknown account>",partition:"aws"}}async discoverTargetAccount(e){return(await this.sdk(e)).currentAccount()}async s3Client(e){return(await this.sdk(e)).s3()}async ecrClient(e){return(await this.sdk(e)).ecr()}async secretsManagerClient(e){return(await this.sdk(e)).secretsManager()}async sdk(e){let n={...this.targetEnv,region:e.region??this.targetEnv.region},r=JSON.stringify({env:n,assumeRuleArn:e.assumeRoleArn,assumeRoleExternalId:e.assumeRoleExternalId}),i=this.sdkCache.get(r);if(i)return i;let s=(await this.aws.forEnvironment(n,Bf.Mode.ForWriting,{assumeRoleArn:e.assumeRoleArn,assumeRoleExternalId:e.assumeRoleExternalId})).sdk;return this.sdkCache.set(r,s),s}},r0={build:Re.debug,cached:Re.debug,check:Re.debug,debug:Re.debug,fail:Re.error,found:Re.debug,start:Re.print,success:Re.print,upload:Re.debug},vi=class{constructor(e){this.quiet=e}onPublishEvent(e,n){(this.quiet&&e!=="fail"?Re.debug:r0[e])(`[${n.percentComplete}%] ${e}: ${n.message}`)}}});var Yf=x(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});xi.addMetadataAssetsToManifest=void 0;var c0=T("path"),io=ur(),l0=Ut(),u0=ns(),so=Et();async function p0(t,e,n,r){r=r||[];let i=t.assets;if(i.length===0)return{};if(!n.found)throw new Error(`This stack uses assets, so the toolkit stack must be deployed to the environment (Run "${u0.blue("cdk bootstrap "+t.environment.name)}")`);let s={};for(let a of i){if(r.indexOf(a.id)>-1){so.debug(`Reusing asset ${a.id}: ${JSON.stringify(a)}`);continue}if(so.debug(`Preparing asset ${a.id}: ${JSON.stringify(a)}`),!t.assembly)throw new Error("Unexpected: stack assembly is required in order to find assets in assembly directory");Object.assign(s,await f0(a,e,n))}return s}xi.addMetadataAssetsToManifest=p0;async function f0(t,e,n){switch(t.packaging){case"zip":case"file":return h0(t,e,n,t.packaging==="zip"?io.FileAssetPackaging.ZIP_DIRECTORY:io.FileAssetPackaging.FILE);case"container-image":return d0(t,e,n);default:throw new Error(`Unsupported packaging type: ${t.packaging}. You might need to upgrade your aws-cdk toolkit to support this asset type.`)}}function h0(t,e,n,r){let i=r===io.FileAssetPackaging.ZIP_DIRECTORY?".zip":c0.extname(t.path),s=`${t.sourceHash}${i}`,a=t.id===t.sourceHash?"assets/":`assets/${t.id}/`,o=`${a}${s}`,c=`s3://${n.bucketName}/${o}`;return so.debug(`Storing asset ${t.path} at ${c}`),e.addFileAsset(t.sourceHash,{path:t.path,packaging:r},{bucketName:n.bucketName,objectKey:o}),{[t.s3BucketParameter]:n.bucketName,[t.s3KeyParameter]:`${a}${l0.ASSET_PREFIX_SEPARATOR}${s}`,[t.artifactHashParameter]:t.sourceHash}}async function d0(t,e,n){if(!t.imageNameParameter&&(!t.repositoryName||!t.imageTag))throw new Error('Invalid Docker image asset configuration: "repositoryName" and "imageTag" are required when "imageNameParameter" is left out');let r=t.repositoryName??"cdk/"+t.id.replace(/[:/]/g,"-").toLowerCase(),{repositoryUri:i}=await n.prepareEcrRepository(r),s=t.imageTag??t.sourceHash;return e.addDockerImageAsset(t.sourceHash,{directory:t.path,dockerBuildArgs:t.buildArgs,dockerBuildTarget:t.target,dockerFile:t.file,networkMode:t.networkMode,platform:t.platform,dockerOutputs:t.outputs},{repositoryName:r,imageTag:s}),t.imageNameParameter?{[t.imageNameParameter]:`${i}:${s}`}:{}}});var pt=x(ue=>{"use strict";var Be={ANCHOR:"&",COMMENT:"#",TAG:"!",DIRECTIVES_END:"-",DOCUMENT_END:"."},Vn={ALIAS:"ALIAS",BLANK_LINE:"BLANK_LINE",BLOCK_FOLDED:"BLOCK_FOLDED",BLOCK_LITERAL:"BLOCK_LITERAL",COMMENT:"COMMENT",DIRECTIVE:"DIRECTIVE",DOCUMENT:"DOCUMENT",FLOW_MAP:"FLOW_MAP",FLOW_SEQ:"FLOW_SEQ",MAP:"MAP",MAP_KEY:"MAP_KEY",MAP_VALUE:"MAP_VALUE",PLAIN:"PLAIN",QUOTE_DOUBLE:"QUOTE_DOUBLE",QUOTE_SINGLE:"QUOTE_SINGLE",SEQ:"SEQ",SEQ_ITEM:"SEQ_ITEM"},m0="tag:yaml.org,2002:",g0={MAP:"tag:yaml.org,2002:map",SEQ:"tag:yaml.org,2002:seq",STR:"tag:yaml.org,2002:str"};function Vf(t){let e=[0],n=t.indexOf(`
`);for(;n!==-1;)n+=1,e.push(n),n=t.indexOf(`
`,n);return e}function Gf(t){let e,n;return typeof t=="string"?(e=Vf(t),n=t):(Array.isArray(t)&&(t=t[0]),t&&t.context&&(t.lineStarts||(t.lineStarts=Vf(t.context.src)),e=t.lineStarts,n=t.context.src)),{lineStarts:e,src:n}}function ao(t,e){if(typeof t!="number"||t<0)return null;let{lineStarts:n,src:r}=Gf(e);if(!n||!r||t>r.length)return null;for(let s=0;s<n.length;++s){let a=n[s];if(t<a)return{line:s,col:t-n[s-1]+1};if(t===a)return{line:s+1,col:1}}let i=n.length;return{line:i,col:t-n[i-1]+1}}function y0(t,e){let{lineStarts:n,src:r}=Gf(e);if(!n||!(t>=1)||t>n.length)return null;let i=n[t-1],s=n[t];for(;s&&s>i&&r[s-1]===`
`;)--s;return r.slice(i,s)}function v0({start:t,end:e},n,r=80){let i=y0(t.line,n);if(!i)return null;let{col:s}=t;if(i.length>r)if(s<=r-10)i=i.substr(0,r-1)+"\u2026";else{let u=Math.round(r/2);i.length>s+u&&(i=i.substr(0,s+u-1)+"\u2026"),s-=i.length-r,i="\u2026"+i.substr(1-r)}let a=1,o="";e&&(e.line===t.line&&s+(e.col-t.col)<=r+1?a=e.col-t.col:(a=Math.min(i.length+1,r)-s,o="\u2026"));let c=s>1?" ".repeat(s-1):"",l="^".repeat(a);return`${i}
${c}${l}${o}`}var ut=class{static copy(e){return new ut(e.start,e.end)}constructor(e,n){this.start=e,this.end=n||e}isEmpty(){return typeof this.start!="number"||!this.end||this.end<=this.start}setOrigRange(e,n){let{start:r,end:i}=this;if(e.length===0||i<=e[0])return this.origStart=r,this.origEnd=i,n;let s=n;for(;s<e.length&&!(e[s]>r);)++s;this.origStart=r+s;let a=s;for(;s<e.length&&!(e[s]>=i);)++s;return this.origEnd=i+s,a}},J=class{static addStringTerminator(e,n,r){if(r[r.length-1]===`
`)return r;let i=J.endOfWhiteSpace(e,n);return i>=e.length||e[i]===`
`?r+`
`:r}static atDocumentBoundary(e,n,r){let i=e[n];if(!i)return!0;let s=e[n-1];if(s&&s!==`
`)return!1;if(r){if(i!==r)return!1}else if(i!==Be.DIRECTIVES_END&&i!==Be.DOCUMENT_END)return!1;let a=e[n+1],o=e[n+2];if(a!==i||o!==i)return!1;let c=e[n+3];return!c||c===`
`||c==="	"||c===" "}static endOfIdentifier(e,n){let r=e[n],i=r==="<",s=i?[`
`,"	"," ",">"]:[`
`,"	"," ","[","]","{","}",","];for(;r&&s.indexOf(r)===-1;)r=e[n+=1];return i&&r===">"&&(n+=1),n}static endOfIndent(e,n){let r=e[n];for(;r===" ";)r=e[n+=1];return n}static endOfLine(e,n){let r=e[n];for(;r&&r!==`
`;)r=e[n+=1];return n}static endOfWhiteSpace(e,n){let r=e[n];for(;r==="	"||r===" ";)r=e[n+=1];return n}static startOfLine(e,n){let r=e[n-1];if(r===`
`)return n;for(;r&&r!==`
`;)r=e[n-=1];return n+1}static endOfBlockIndent(e,n,r){let i=J.endOfIndent(e,r);if(i>r+n)return i;{let s=J.endOfWhiteSpace(e,i),a=e[s];if(!a||a===`
`)return s}return null}static atBlank(e,n,r){let i=e[n];return i===`
`||i==="	"||i===" "||r&&!i}static nextNodeIsIndented(e,n,r){return!e||n<0?!1:n>0?!0:r&&e==="-"}static normalizeOffset(e,n){let r=e[n];return r?r!==`
`&&e[n-1]===`
`?n-1:J.endOfWhiteSpace(e,n):n}static foldNewline(e,n,r){let i=0,s=!1,a="",o=e[n+1];for(;o===" "||o==="	"||o===`
`;){switch(o){case`
`:i=0,n+=1,a+=`
`;break;case"	":i<=r&&(s=!0),n=J.endOfWhiteSpace(e,n+2)-1;break;case" ":i+=1,n+=1;break}o=e[n+1]}return a||(a=" "),o&&i<=r&&(s=!0),{fold:a,offset:n,error:s}}constructor(e,n,r){Object.defineProperty(this,"context",{value:r||null,writable:!0}),this.error=null,this.range=null,this.valueRange=null,this.props=n||[],this.type=e,this.value=null}getPropValue(e,n,r){if(!this.context)return null;let{src:i}=this.context,s=this.props[e];return s&&i[s.start]===n?i.slice(s.start+(r?1:0),s.end):null}get anchor(){for(let e=0;e<this.props.length;++e){let n=this.getPropValue(e,Be.ANCHOR,!0);if(n!=null)return n}return null}get comment(){let e=[];for(let n=0;n<this.props.length;++n){let r=this.getPropValue(n,Be.COMMENT,!0);r!=null&&e.push(r)}return e.length>0?e.join(`
`):null}commentHasRequiredWhitespace(e){let{src:n}=this.context;if(this.header&&e===this.header.end||!this.valueRange)return!1;let{end:r}=this.valueRange;return e!==r||J.atBlank(n,r-1)}get hasComment(){if(this.context){let{src:e}=this.context;for(let n=0;n<this.props.length;++n)if(e[this.props[n].start]===Be.COMMENT)return!0}return!1}get hasProps(){if(this.context){let{src:e}=this.context;for(let n=0;n<this.props.length;++n)if(e[this.props[n].start]!==Be.COMMENT)return!0}return!1}get includesTrailingLines(){return!1}get jsonLike(){return[Vn.FLOW_MAP,Vn.FLOW_SEQ,Vn.QUOTE_DOUBLE,Vn.QUOTE_SINGLE].indexOf(this.type)!==-1}get rangeAsLinePos(){if(!this.range||!this.context)return;let e=ao(this.range.start,this.context.root);if(!e)return;let n=ao(this.range.end,this.context.root);return{start:e,end:n}}get rawValue(){if(!this.valueRange||!this.context)return null;let{start:e,end:n}=this.valueRange;return this.context.src.slice(e,n)}get tag(){for(let e=0;e<this.props.length;++e){let n=this.getPropValue(e,Be.TAG,!1);if(n!=null){if(n[1]==="<")return{verbatim:n.slice(2,-1)};{let[r,i,s]=n.match(/^(.*!)([^!]*)$/);return{handle:i,suffix:s}}}}return null}get valueRangeContainsNewline(){if(!this.valueRange||!this.context)return!1;let{start:e,end:n}=this.valueRange,{src:r}=this.context;for(let i=e;i<n;++i)if(r[i]===`
`)return!0;return!1}parseComment(e){let{src:n}=this.context;if(n[e]===Be.COMMENT){let r=J.endOfLine(n,e+1),i=new ut(e,r);return this.props.push(i),r}return e}setOrigRanges(e,n){return this.range&&(n=this.range.setOrigRange(e,n)),this.valueRange&&this.valueRange.setOrigRange(e,n),this.props.forEach(r=>r.setOrigRange(e,n)),n}toString(){let{context:{src:e},range:n,value:r}=this;if(r!=null)return r;let i=e.slice(n.start,n.end);return J.addStringTerminator(e,n.end,i)}},It=class extends Error{constructor(e,n,r){if(!r||!(n instanceof J))throw new Error(`Invalid arguments for new ${e}`);super(),this.name=e,this.message=r,this.source=n}makePretty(){if(!this.source)return;this.nodeType=this.source.type;let e=this.source.context&&this.source.context.root;if(typeof this.offset=="number"){this.range=new ut(this.offset,this.offset+1);let n=e&&ao(this.offset,e);if(n){let r={line:n.line,col:n.col+1};this.linePos={start:n,end:r}}delete this.offset}else this.range=this.source.range,this.linePos=this.source.rangeAsLinePos;if(this.linePos){let{line:n,col:r}=this.linePos.start;this.message+=` at line ${n}, column ${r}`;let i=e&&v0(this.linePos,e);i&&(this.message+=`:

${i}
`)}delete this.source}},oo=class extends It{constructor(e,n){super("YAMLReferenceError",e,n)}},Gn=class extends It{constructor(e,n){super("YAMLSemanticError",e,n)}},co=class extends It{constructor(e,n){super("YAMLSyntaxError",e,n)}},lo=class extends It{constructor(e,n){super("YAMLWarning",e,n)}};function w0(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var un=class extends J{static endOfLine(e,n,r){let i=e[n],s=n;for(;i&&i!==`
`&&!(r&&(i==="["||i==="]"||i==="{"||i==="}"||i===","));){let a=e[s+1];if(i===":"&&(!a||a===`
`||a==="	"||a===" "||r&&a===",")||(i===" "||i==="	")&&a==="#")break;s+=1,i=a}return s}get strValue(){if(!this.valueRange||!this.context)return null;let{start:e,end:n}=this.valueRange,{src:r}=this.context,i=r[n-1];for(;e<n&&(i===`
`||i==="	"||i===" ");)i=r[--n-1];let s="";for(let o=e;o<n;++o){let c=r[o];if(c===`
`){let{fold:l,offset:u}=J.foldNewline(r,o,-1);s+=l,o=u}else if(c===" "||c==="	"){let l=o,u=r[o+1];for(;o<n&&(u===" "||u==="	");)o+=1,u=r[o+1];u!==`
`&&(s+=o>l?r.slice(l,o+1):c)}else s+=c}let a=r[e];switch(a){case"	":{let o="Plain value cannot start with a tab character";return{errors:[new Gn(this,o)],str:s}}case"@":case"`":{let o=`Plain value cannot start with reserved character ${a}`;return{errors:[new Gn(this,o)],str:s}}default:return s}}parseBlockValue(e){let{indent:n,inFlow:r,src:i}=this.context,s=e,a=e;for(let o=i[s];o===`
`&&!J.atDocumentBoundary(i,s+1);o=i[s]){let c=J.endOfBlockIndent(i,n,s+1);if(c===null||i[c]==="#")break;i[c]===`
`?s=c:(a=un.endOfLine(i,c,r),s=a)}return this.valueRange.isEmpty()&&(this.valueRange.start=e),this.valueRange.end=a,a}parse(e,n){this.context=e;let{inFlow:r,src:i}=e,s=n,a=i[s];return a&&a!=="#"&&a!==`
`&&(s=un.endOfLine(i,n,r)),this.valueRange=new ut(n,s),s=J.endOfWhiteSpace(i,s),s=this.parseComment(s),(!this.hasComment||this.valueRange.isEmpty())&&(s=this.parseBlockValue(s)),s}};ue.Char=Be;ue.Node=J;ue.PlainValue=un;ue.Range=ut;ue.Type=Vn;ue.YAMLError=It;ue.YAMLReferenceError=oo;ue.YAMLSemanticError=Gn;ue.YAMLSyntaxError=co;ue.YAMLWarning=lo;ue._defineProperty=w0;ue.defaultTagPrefix=m0;ue.defaultTags=g0});var Wf=x(Hf=>{"use strict";var d=pt(),Rt=class extends d.Node{constructor(){super(d.Type.BLANK_LINE)}get includesTrailingLines(){return!0}parse(e,n){return this.context=e,this.range=new d.Range(n,n+1),n+1}},Hn=class extends d.Node{constructor(e,n){super(e,n),this.node=null}get includesTrailingLines(){return!!this.node&&this.node.includesTrailingLines}parse(e,n){this.context=e;let{parseNode:r,src:i}=e,{atLineStart:s,lineStart:a}=e;!s&&this.type===d.Type.SEQ_ITEM&&(this.error=new d.YAMLSemanticError(this,"Sequence items must not have preceding content on the same line"));let o=s?n-a:e.indent,c=d.Node.endOfWhiteSpace(i,n+1),l=i[c],u=l==="#",p=[],f=null;for(;l===`
`||l==="#";){if(l==="#"){let m=d.Node.endOfLine(i,c+1);p.push(new d.Range(c,m)),c=m}else{s=!0,a=c+1;let m=d.Node.endOfWhiteSpace(i,a);i[m]===`
`&&p.length===0&&(f=new Rt,a=f.parse({src:i},a)),c=d.Node.endOfIndent(i,a)}l=i[c]}if(d.Node.nextNodeIsIndented(l,c-(a+o),this.type!==d.Type.SEQ_ITEM)?this.node=r({atLineStart:s,inCollection:!1,indent:o,lineStart:a,parent:this},c):l&&a>n+1&&(c=a-1),this.node){if(f){let m=e.parent.items||e.parent.contents;m&&m.push(f)}p.length&&Array.prototype.push.apply(this.props,p),c=this.node.range.end}else if(u){let m=p[0];this.props.push(m),c=m.end}else c=d.Node.endOfLine(i,n+1);let h=this.node?this.node.valueRange.end:c;return this.valueRange=new d.Range(n,h),c}setOrigRanges(e,n){return n=super.setOrigRanges(e,n),this.node?this.node.setOrigRanges(e,n):n}toString(){let{context:{src:e},node:n,range:r,value:i}=this;if(i!=null)return i;let s=n?e.slice(r.start,n.range.start)+String(n):e.slice(r.start,r.end);return d.Node.addStringTerminator(e,r.end,s)}},Nt=class extends d.Node{constructor(){super(d.Type.COMMENT)}parse(e,n){this.context=e;let r=this.parseComment(n);return this.range=new d.Range(n,r),r}};function uo(t){let e=t;for(;e instanceof Hn;)e=e.node;if(!(e instanceof Pt))return null;let n=e.items.length,r=-1;for(let a=n-1;a>=0;--a){let o=e.items[a];if(o.type===d.Type.COMMENT){let{indent:c,lineStart:l}=o.context;if(c>0&&o.range.start>=l+c)break;r=a}else if(o.type===d.Type.BLANK_LINE)r=a;else break}if(r===-1)return null;let i=e.items.splice(r,n-r),s=i[0].range.start;for(;e.range.end=s,e.valueRange&&e.valueRange.end>s&&(e.valueRange.end=s),e!==t;)e=e.context.parent;return i}var Pt=class extends d.Node{static nextContentHasIndent(e,n,r){let i=d.Node.endOfLine(e,n)+1;n=d.Node.endOfWhiteSpace(e,i);let s=e[n];return s?n>=i+r?!0:s!=="#"&&s!==`
`?!1:Pt.nextContentHasIndent(e,n,r):!1}constructor(e){super(e.type===d.Type.SEQ_ITEM?d.Type.SEQ:d.Type.MAP);for(let r=e.props.length-1;r>=0;--r)if(e.props[r].start<e.context.lineStart){this.props=e.props.slice(0,r+1),e.props=e.props.slice(r+1);let i=e.props[0]||e.valueRange;e.range.start=i.start;break}this.items=[e];let n=uo(e);n&&Array.prototype.push.apply(this.items,n)}get includesTrailingLines(){return this.items.length>0}parse(e,n){this.context=e;let{parseNode:r,src:i}=e,s=d.Node.startOfLine(i,n),a=this.items[0];a.context.parent=this,this.valueRange=d.Range.copy(a.valueRange);let o=a.range.start-a.context.lineStart,c=n;c=d.Node.normalizeOffset(i,c);let l=i[c],u=d.Node.endOfWhiteSpace(i,s)===c,p=!1;for(;l;){for(;l===`
`||l==="#";){if(u&&l===`
`&&!p){let m=new Rt;if(c=m.parse({src:i},c),this.valueRange.end=c,c>=i.length){l=null;break}this.items.push(m),c-=1}else if(l==="#"){if(c<s+o&&!Pt.nextContentHasIndent(i,c,o))return c;let m=new Nt;if(c=m.parse({indent:o,lineStart:s,src:i},c),this.items.push(m),this.valueRange.end=c,c>=i.length){l=null;break}}if(s=c+1,c=d.Node.endOfIndent(i,s),d.Node.atBlank(i,c)){let m=d.Node.endOfWhiteSpace(i,c),b=i[m];(!b||b===`
`||b==="#")&&(c=m)}l=i[c],u=!0}if(!l)break;if(c!==s+o&&(u||l!==":")){if(c<s+o){s>n&&(c=s);break}else if(!this.error){let m="All collection items must start at the same column";this.error=new d.YAMLSyntaxError(this,m)}}if(a.type===d.Type.SEQ_ITEM){if(l!=="-"){s>n&&(c=s);break}}else if(l==="-"&&!this.error){let m=i[c+1];if(!m||m===`
`||m==="	"||m===" "){let b="A collection cannot be both a mapping and a sequence";this.error=new d.YAMLSyntaxError(this,b)}}let f=r({atLineStart:u,inCollection:!0,indent:o,lineStart:s,parent:this},c);if(!f)return c;if(this.items.push(f),this.valueRange.end=f.valueRange.end,c=d.Node.normalizeOffset(i,f.range.end),l=i[c],u=!1,p=f.includesTrailingLines,l){let m=c-1,b=i[m];for(;b===" "||b==="	";)b=i[--m];b===`
`&&(s=m+1,u=!0)}let h=uo(f);h&&Array.prototype.push.apply(this.items,h)}return c}setOrigRanges(e,n){return n=super.setOrigRanges(e,n),this.items.forEach(r=>{n=r.setOrigRanges(e,n)}),n}toString(){let{context:{src:e},items:n,range:r,value:i}=this;if(i!=null)return i;let s=e.slice(r.start,n[0].range.start)+String(n[0]);for(let a=1;a<n.length;++a){let o=n[a],{atLineStart:c,indent:l}=o.context;if(c)for(let u=0;u<l;++u)s+=" ";s+=String(o)}return d.Node.addStringTerminator(e,r.end,s)}},po=class extends d.Node{constructor(){super(d.Type.DIRECTIVE),this.name=null}get parameters(){let e=this.rawValue;return e?e.trim().split(/[ \t]+/):[]}parseName(e){let{src:n}=this.context,r=e,i=n[r];for(;i&&i!==`
`&&i!=="	"&&i!==" ";)i=n[r+=1];return this.name=n.slice(e,r),r}parseParameters(e){let{src:n}=this.context,r=e,i=n[r];for(;i&&i!==`
`&&i!=="#";)i=n[r+=1];return this.valueRange=new d.Range(e,r),r}parse(e,n){this.context=e;let r=this.parseName(n+1);return r=this.parseParameters(r),r=this.parseComment(r),this.range=new d.Range(n,r),r}},pn=class extends d.Node{static startCommentOrEndBlankLine(e,n){let r=d.Node.endOfWhiteSpace(e,n),i=e[r];return i==="#"||i===`
`?r:n}constructor(){super(d.Type.DOCUMENT),this.directives=null,this.contents=null,this.directivesEndMarker=null,this.documentEndMarker=null}parseDirectives(e){let{src:n}=this.context;this.directives=[];let r=!0,i=!1,s=e;for(;!d.Node.atDocumentBoundary(n,s,d.Char.DIRECTIVES_END);)switch(s=pn.startCommentOrEndBlankLine(n,s),n[s]){case`
`:if(r){let a=new Rt;s=a.parse({src:n},s),s<n.length&&this.directives.push(a)}else s+=1,r=!0;break;case"#":{let a=new Nt;s=a.parse({src:n},s),this.directives.push(a),r=!1}break;case"%":{let a=new po;s=a.parse({parent:this,src:n},s),this.directives.push(a),i=!0,r=!1}break;default:return i?this.error=new d.YAMLSemanticError(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),s}return n[s]?(this.directivesEndMarker=new d.Range(s,s+3),s+3):(i?this.error=new d.YAMLSemanticError(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),s)}parseContents(e){let{parseNode:n,src:r}=this.context;this.contents||(this.contents=[]);let i=e;for(;r[i-1]==="-";)i-=1;let s=d.Node.endOfWhiteSpace(r,e),a=i===e;for(this.valueRange=new d.Range(s);!d.Node.atDocumentBoundary(r,s,d.Char.DOCUMENT_END);){switch(r[s]){case`
`:if(a){let o=new Rt;s=o.parse({src:r},s),s<r.length&&this.contents.push(o)}else s+=1,a=!0;i=s;break;case"#":{let o=new Nt;s=o.parse({src:r},s),this.contents.push(o),a=!1}break;default:{let o=d.Node.endOfIndent(r,s),l=n({atLineStart:a,indent:-1,inFlow:!1,inCollection:!1,lineStart:i,parent:this},o);if(!l)return this.valueRange.end=o;this.contents.push(l),s=l.range.end,a=!1;let u=uo(l);u&&Array.prototype.push.apply(this.contents,u)}}s=pn.startCommentOrEndBlankLine(r,s)}if(this.valueRange.end=s,r[s]&&(this.documentEndMarker=new d.Range(s,s+3),s+=3,r[s])){if(s=d.Node.endOfWhiteSpace(r,s),r[s]==="#"){let o=new Nt;s=o.parse({src:r},s),this.contents.push(o)}switch(r[s]){case`
`:s+=1;break;case void 0:break;default:this.error=new d.YAMLSyntaxError(this,"Document end marker line cannot have a non-comment suffix")}}return s}parse(e,n){e.root=this,this.context=e;let{src:r}=e,i=r.charCodeAt(n)===65279?n+1:n;return i=this.parseDirectives(i),i=this.parseContents(i),i}setOrigRanges(e,n){return n=super.setOrigRanges(e,n),this.directives.forEach(r=>{n=r.setOrigRanges(e,n)}),this.directivesEndMarker&&(n=this.directivesEndMarker.setOrigRange(e,n)),this.contents.forEach(r=>{n=r.setOrigRanges(e,n)}),this.documentEndMarker&&(n=this.documentEndMarker.setOrigRange(e,n)),n}toString(){let{contents:e,directives:n,value:r}=this;if(r!=null)return r;let i=n.join("");return e.length>0&&((n.length>0||e[0].type===d.Type.COMMENT)&&(i+=`---
`),i+=e.join("")),i[i.length-1]!==`
`&&(i+=`
`),i}},fo=class extends d.Node{parse(e,n){this.context=e;let{src:r}=e,i=d.Node.endOfIdentifier(r,n+1);return this.valueRange=new d.Range(n+1,i),i=d.Node.endOfWhiteSpace(r,i),i=this.parseComment(i),i}},ft={CLIP:"CLIP",KEEP:"KEEP",STRIP:"STRIP"},ho=class extends d.Node{constructor(e,n){super(e,n),this.blockIndent=null,this.chomping=ft.CLIP,this.header=null}get includesTrailingLines(){return this.chomping===ft.KEEP}get strValue(){if(!this.valueRange||!this.context)return null;let{start:e,end:n}=this.valueRange,{indent:r,src:i}=this.context;if(this.valueRange.isEmpty())return"";let s=null,a=i[n-1];for(;a===`
`||a==="	"||a===" ";){if(n-=1,n<=e){if(this.chomping===ft.KEEP)break;return""}a===`
`&&(s=n),a=i[n-1]}let o=n+1;s&&(this.chomping===ft.KEEP?(o=s,n=this.valueRange.end):n=s);let c=r+this.blockIndent,l=this.type===d.Type.BLOCK_FOLDED,u=!0,p="",f="",h=!1;for(let m=e;m<n;++m){for(let k=0;k<c&&i[m]===" ";++k)m+=1;let b=i[m];if(b===`
`)f===`
`?p+=`
`:f=`
`;else{let k=d.Node.endOfLine(i,m),S=i.slice(m,k);m=k,l&&(b===" "||b==="	")&&m<o?(f===" "?f=`
`:!h&&!u&&f===`
`&&(f=`

`),p+=f+S,f=k<n&&i[k]||"",h=!0):(p+=f+S,f=l&&m<o?" ":`
`,h=!1),u&&S!==""&&(u=!1)}}return this.chomping===ft.STRIP?p:p+`
`}parseBlockHeader(e){let{src:n}=this.context,r=e+1,i="";for(;;){let s=n[r];switch(s){case"-":this.chomping=ft.STRIP;break;case"+":this.chomping=ft.KEEP;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":i+=s;break;default:return this.blockIndent=Number(i)||null,this.header=new d.Range(e,r),r}r+=1}}parseBlockValue(e){let{indent:n,src:r}=this.context,i=!!this.blockIndent,s=e,a=e,o=1;for(let c=r[s];c===`
`&&(s+=1,!d.Node.atDocumentBoundary(r,s));c=r[s]){let l=d.Node.endOfBlockIndent(r,n,s);if(l===null)break;let u=r[l],p=l-(s+n);if(this.blockIndent){if(u&&u!==`
`&&p<this.blockIndent){if(r[l]==="#")break;if(!this.error){let h=`Block scalars must not be less indented than their ${i?"explicit indentation indicator":"first line"}`;this.error=new d.YAMLSemanticError(this,h)}}}else if(r[l]!==`
`){if(p<o){let f="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";this.error=new d.YAMLSemanticError(this,f)}this.blockIndent=p}else p>o&&(o=p);r[l]===`
`?s=l:s=a=d.Node.endOfLine(r,l)}return this.chomping!==ft.KEEP&&(s=r[a]?a+1:a),this.valueRange=new d.Range(e+1,s),s}parse(e,n){this.context=e;let{src:r}=e,i=this.parseBlockHeader(n);return i=d.Node.endOfWhiteSpace(r,i),i=this.parseComment(i),i=this.parseBlockValue(i),i}setOrigRanges(e,n){return n=super.setOrigRanges(e,n),this.header?this.header.setOrigRange(e,n):n}},mo=class extends d.Node{constructor(e,n){super(e,n),this.items=null}prevNodeIsJsonLike(e=this.items.length){let n=this.items[e-1];return!!n&&(n.jsonLike||n.type===d.Type.COMMENT&&this.prevNodeIsJsonLike(e-1))}parse(e,n){this.context=e;let{parseNode:r,src:i}=e,{indent:s,lineStart:a}=e,o=i[n];this.items=[{char:o,offset:n}];let c=d.Node.endOfWhiteSpace(i,n+1);for(o=i[c];o&&o!=="]"&&o!=="}";){switch(o){case`
`:{a=c+1;let l=d.Node.endOfWhiteSpace(i,a);if(i[l]===`
`){let u=new Rt;a=u.parse({src:i},a),this.items.push(u)}if(c=d.Node.endOfIndent(i,a),c<=a+s&&(o=i[c],c<a+s||o!=="]"&&o!=="}")){let u="Insufficient indentation in flow collection";this.error=new d.YAMLSemanticError(this,u)}}break;case",":this.items.push({char:o,offset:c}),c+=1;break;case"#":{let l=new Nt;c=l.parse({src:i},c),this.items.push(l)}break;case"?":case":":{let l=i[c+1];if(l===`
`||l==="	"||l===" "||l===","||o===":"&&this.prevNodeIsJsonLike()){this.items.push({char:o,offset:c}),c+=1;break}}default:{let l=r({atLineStart:!1,inCollection:!1,inFlow:!0,indent:-1,lineStart:a,parent:this},c);if(!l)return this.valueRange=new d.Range(n,c),c;this.items.push(l),c=d.Node.normalizeOffset(i,l.range.end)}}c=d.Node.endOfWhiteSpace(i,c),o=i[c]}return this.valueRange=new d.Range(n,c+1),o&&(this.items.push({char:o,offset:c}),c=d.Node.endOfWhiteSpace(i,c+1),c=this.parseComment(c)),c}setOrigRanges(e,n){return n=super.setOrigRanges(e,n),this.items.forEach(r=>{if(r instanceof d.Node)n=r.setOrigRanges(e,n);else if(e.length===0)r.origOffset=r.offset;else{let i=n;for(;i<e.length&&!(e[i]>r.offset);)++i;r.origOffset=r.offset+i,n=i}}),n}toString(){let{context:{src:e},items:n,range:r,value:i}=this;if(i!=null)return i;let s=n.filter(c=>c instanceof d.Node),a="",o=r.start;return s.forEach(c=>{let l=e.slice(o,c.range.start);o=c.range.end,a+=l+String(c),a[a.length-1]===`
`&&e[o-1]!==`
`&&e[o]===`
`&&(o+=1)}),a+=e.slice(o,r.end),d.Node.addStringTerminator(e,r.end,a)}},Wn=class extends d.Node{static endOfQuote(e,n){let r=e[n];for(;r&&r!=='"';)n+=r==="\\"?2:1,r=e[n];return n+1}get strValue(){if(!this.valueRange||!this.context)return null;let e=[],{start:n,end:r}=this.valueRange,{indent:i,src:s}=this.context;s[r-1]!=='"'&&e.push(new d.YAMLSyntaxError(this,'Missing closing "quote'));let a="";for(let o=n+1;o<r-1;++o){let c=s[o];if(c===`
`){d.Node.atDocumentBoundary(s,o+1)&&e.push(new d.YAMLSemanticError(this,"Document boundary indicators are not allowed within string values"));let{fold:l,offset:u,error:p}=d.Node.foldNewline(s,o,i);a+=l,o=u,p&&e.push(new d.YAMLSemanticError(this,"Multi-line double-quoted string needs to be sufficiently indented"))}else if(c==="\\")switch(o+=1,s[o]){case"0":a+="\0";break;case"a":a+="\x07";break;case"b":a+="\b";break;case"e":a+="\x1B";break;case"f":a+="\f";break;case"n":a+=`
`;break;case"r":a+="\r";break;case"t":a+="	";break;case"v":a+="\v";break;case"N":a+="\x85";break;case"_":a+="\xA0";break;case"L":a+="\u2028";break;case"P":a+="\u2029";break;case" ":a+=" ";break;case'"':a+='"';break;case"/":a+="/";break;case"\\":a+="\\";break;case"	":a+="	";break;case"x":a+=this.parseCharCode(o+1,2,e),o+=2;break;case"u":a+=this.parseCharCode(o+1,4,e),o+=4;break;case"U":a+=this.parseCharCode(o+1,8,e),o+=8;break;case`
`:for(;s[o+1]===" "||s[o+1]==="	";)o+=1;break;default:e.push(new d.YAMLSyntaxError(this,`Invalid escape sequence ${s.substr(o-1,2)}`)),a+="\\"+s[o]}else if(c===" "||c==="	"){let l=o,u=s[o+1];for(;u===" "||u==="	";)o+=1,u=s[o+1];u!==`
`&&(a+=o>l?s.slice(l,o+1):c)}else a+=c}return e.length>0?{errors:e,str:a}:a}parseCharCode(e,n,r){let{src:i}=this.context,s=i.substr(e,n),o=s.length===n&&/^[0-9a-fA-F]+$/.test(s)?parseInt(s,16):NaN;return isNaN(o)?(r.push(new d.YAMLSyntaxError(this,`Invalid escape sequence ${i.substr(e-2,n+2)}`)),i.substr(e-2,n+2)):String.fromCodePoint(o)}parse(e,n){this.context=e;let{src:r}=e,i=Wn.endOfQuote(r,n+1);return this.valueRange=new d.Range(n,i),i=d.Node.endOfWhiteSpace(r,i),i=this.parseComment(i),i}},Kn=class extends d.Node{static endOfQuote(e,n){let r=e[n];for(;r;)if(r==="'"){if(e[n+1]!=="'")break;r=e[n+=2]}else r=e[n+=1];return n+1}get strValue(){if(!this.valueRange||!this.context)return null;let e=[],{start:n,end:r}=this.valueRange,{indent:i,src:s}=this.context;s[r-1]!=="'"&&e.push(new d.YAMLSyntaxError(this,"Missing closing 'quote"));let a="";for(let o=n+1;o<r-1;++o){let c=s[o];if(c===`
`){d.Node.atDocumentBoundary(s,o+1)&&e.push(new d.YAMLSemanticError(this,"Document boundary indicators are not allowed within string values"));let{fold:l,offset:u,error:p}=d.Node.foldNewline(s,o,i);a+=l,o=u,p&&e.push(new d.YAMLSemanticError(this,"Multi-line single-quoted string needs to be sufficiently indented"))}else if(c==="'")a+=c,o+=1,s[o]!=="'"&&e.push(new d.YAMLSyntaxError(this,"Unescaped single quote? This should not happen."));else if(c===" "||c==="	"){let l=o,u=s[o+1];for(;u===" "||u==="	";)o+=1,u=s[o+1];u!==`
`&&(a+=o>l?s.slice(l,o+1):c)}else a+=c}return e.length>0?{errors:e,str:a}:a}parse(e,n){this.context=e;let{src:r}=e,i=Kn.endOfQuote(r,n+1);return this.valueRange=new d.Range(n,i),i=d.Node.endOfWhiteSpace(r,i),i=this.parseComment(i),i}};function b0(t,e){switch(t){case d.Type.ALIAS:return new fo(t,e);case d.Type.BLOCK_FOLDED:case d.Type.BLOCK_LITERAL:return new ho(t,e);case d.Type.FLOW_MAP:case d.Type.FLOW_SEQ:return new mo(t,e);case d.Type.MAP_KEY:case d.Type.MAP_VALUE:case d.Type.SEQ_ITEM:return new Hn(t,e);case d.Type.COMMENT:case d.Type.PLAIN:return new d.PlainValue(t,e);case d.Type.QUOTE_DOUBLE:return new Wn(t,e);case d.Type.QUOTE_SINGLE:return new Kn(t,e);default:return null}}var Lt=class{static parseType(e,n,r){switch(e[n]){case"*":return d.Type.ALIAS;case">":return d.Type.BLOCK_FOLDED;case"|":return d.Type.BLOCK_LITERAL;case"{":return d.Type.FLOW_MAP;case"[":return d.Type.FLOW_SEQ;case"?":return!r&&d.Node.atBlank(e,n+1,!0)?d.Type.MAP_KEY:d.Type.PLAIN;case":":return!r&&d.Node.atBlank(e,n+1,!0)?d.Type.MAP_VALUE:d.Type.PLAIN;case"-":return!r&&d.Node.atBlank(e,n+1,!0)?d.Type.SEQ_ITEM:d.Type.PLAIN;case'"':return d.Type.QUOTE_DOUBLE;case"'":return d.Type.QUOTE_SINGLE;default:return d.Type.PLAIN}}constructor(e={},{atLineStart:n,inCollection:r,inFlow:i,indent:s,lineStart:a,parent:o}={}){d._defineProperty(this,"parseNode",(c,l)=>{if(d.Node.atDocumentBoundary(this.src,l))return null;let u=new Lt(this,c),{props:p,type:f,valueStart:h}=u.parseProps(l),m=b0(f,p),b=m.parse(u,h);if(m.range=new d.Range(l,b),b<=l&&(m.error=new Error("Node#parse consumed no characters"),m.error.parseEnd=b,m.error.source=m,m.range.end=l+1),u.nodeStartsCollection(m)){!m.error&&!u.atLineStart&&u.parent.type===d.Type.DOCUMENT&&(m.error=new d.YAMLSyntaxError(m,"Block collection must not have preceding content here (e.g. directives-end indicator)"));let k=new Pt(m);return b=k.parse(new Lt(u),b),k.range=new d.Range(l,b),k}return m}),this.atLineStart=n??(e.atLineStart||!1),this.inCollection=r??(e.inCollection||!1),this.inFlow=i??(e.inFlow||!1),this.indent=s??e.indent,this.lineStart=a??e.lineStart,this.parent=o??(e.parent||{}),this.root=e.root,this.src=e.src}nodeStartsCollection(e){let{inCollection:n,inFlow:r,src:i}=this;if(n||r)return!1;if(e instanceof Hn)return!0;let s=e.range.end;return i[s]===`
`||i[s-1]===`
`?!1:(s=d.Node.endOfWhiteSpace(i,s),i[s]===":")}parseProps(e){let{inFlow:n,parent:r,src:i}=this,s=[],a=!1;e=this.atLineStart?d.Node.endOfIndent(i,e):d.Node.endOfWhiteSpace(i,e);let o=i[e];for(;o===d.Char.ANCHOR||o===d.Char.COMMENT||o===d.Char.TAG||o===`
`;){if(o===`
`){let l=e,u;do u=l+1,l=d.Node.endOfIndent(i,u);while(i[l]===`
`);let p=l-(u+this.indent),f=r.type===d.Type.SEQ_ITEM&&r.context.atLineStart;if(i[l]!=="#"&&!d.Node.nextNodeIsIndented(i[l],p,!f))break;this.atLineStart=!0,this.lineStart=u,a=!1,e=l}else if(o===d.Char.COMMENT){let l=d.Node.endOfLine(i,e+1);s.push(new d.Range(e,l)),e=l}else{let l=d.Node.endOfIdentifier(i,e+1);o===d.Char.TAG&&i[l]===","&&/^[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+,\d\d\d\d(-\d\d){0,2}\/\S/.test(i.slice(e+1,l+13))&&(l=d.Node.endOfIdentifier(i,l+5)),s.push(new d.Range(e,l)),a=!0,e=d.Node.endOfWhiteSpace(i,l)}o=i[e]}a&&o===":"&&d.Node.atBlank(i,e+1,!0)&&(e-=1);let c=Lt.parseType(i,e,n);return{props:s,type:c,valueStart:e}}};function x0(t){let e=[];t.indexOf("\r")!==-1&&(t=t.replace(/\r\n?/g,(i,s)=>(i.length>1&&e.push(s),`
`)));let n=[],r=0;do{let i=new pn,s=new Lt({src:t});r=i.parse(s,r),n.push(i)}while(r<t.length);return n.setOrigRanges=()=>{if(e.length===0)return!1;for(let s=1;s<e.length;++s)e[s]-=s;let i=0;for(let s=0;s<n.length;++s)i=n[s].setOrigRanges(e,i);return e.splice(0,e.length),!0},n.toString=()=>n.join(`...
`),n}Hf.parse=x0});var hn=x(V=>{"use strict";var g=pt();function E0(t,e,n){return n?`#${n.replace(/[\s\S]^/gm,`$&${e}#`)}
${e}${t}`:t}function fn(t,e,n){return n?n.indexOf(`
`)===-1?`${t} #${n}`:`${t}
`+n.replace(/^/gm,`${e||""}#`):t}var me=class{};function ht(t,e,n){if(Array.isArray(t))return t.map((r,i)=>ht(r,String(i),n));if(t&&typeof t.toJSON=="function"){let r=n&&n.anchors&&n.anchors.get(t);r&&(n.onCreate=s=>{r.res=s,delete n.onCreate});let i=t.toJSON(e,n);return r&&n.onCreate&&n.onCreate(i),i}return(!n||!n.keep)&&typeof t=="bigint"?Number(t):t}var re=class extends me{constructor(e){super(),this.value=e}toJSON(e,n){return n&&n.keep?this.value:ht(this.value,e,n)}toString(){return String(this.value)}};function Kf(t,e,n){let r=n;for(let i=e.length-1;i>=0;--i){let s=e[i];if(Number.isInteger(s)&&s>=0){let a=[];a[s]=r,r=a}else{let a={};Object.defineProperty(a,s,{value:r,writable:!0,enumerable:!0,configurable:!0}),r=a}}return t.createNode(r,!1)}var Jf=t=>t==null||typeof t=="object"&&t[Symbol.iterator]().next().done,W=class extends me{constructor(e){super(),g._defineProperty(this,"items",[]),this.schema=e}addIn(e,n){if(Jf(e))this.add(n);else{let[r,...i]=e,s=this.get(r,!0);if(s instanceof W)s.addIn(i,n);else if(s===void 0&&this.schema)this.set(r,Kf(this.schema,i,n));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}deleteIn([e,...n]){if(n.length===0)return this.delete(e);let r=this.get(e,!0);if(r instanceof W)return r.deleteIn(n);throw new Error(`Expected YAML collection at ${e}. Remaining path: ${n}`)}getIn([e,...n],r){let i=this.get(e,!0);return n.length===0?!r&&i instanceof re?i.value:i:i instanceof W?i.getIn(n,r):void 0}hasAllNullValues(){return this.items.every(e=>{if(!e||e.type!=="PAIR")return!1;let n=e.value;return n==null||n instanceof re&&n.value==null&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn([e,...n]){if(n.length===0)return this.has(e);let r=this.get(e,!0);return r instanceof W?r.hasIn(n):!1}setIn([e,...n],r){if(n.length===0)this.set(e,r);else{let i=this.get(e,!0);if(i instanceof W)i.setIn(n,r);else if(i===void 0&&this.schema)this.set(e,Kf(this.schema,n,r));else throw new Error(`Expected YAML collection at ${e}. Remaining path: ${n}`)}}toJSON(){return null}toString(e,{blockItem:n,flowChars:r,isMap:i,itemIndent:s},a,o){let{indent:c,indentStep:l,stringify:u}=e,p=this.type===g.Type.FLOW_MAP||this.type===g.Type.FLOW_SEQ||e.inFlow;p&&(s+=l);let f=i&&this.hasAllNullValues();e=Object.assign({},e,{allNullValues:f,indent:s,inFlow:p,type:null});let h=!1,m=!1,b=this.items.reduce((S,y,v)=>{let w;y&&(!h&&y.spaceBefore&&S.push({type:"comment",str:""}),y.commentBefore&&y.commentBefore.match(/^.*$/gm).forEach(q=>{S.push({type:"comment",str:`#${q}`})}),y.comment&&(w=y.comment),p&&(!h&&y.spaceBefore||y.commentBefore||y.comment||y.key&&(y.key.commentBefore||y.key.comment)||y.value&&(y.value.commentBefore||y.value.comment))&&(m=!0)),h=!1;let A=u(y,e,()=>w=null,()=>h=!0);return p&&!m&&A.includes(`
`)&&(m=!0),p&&v<this.items.length-1&&(A+=","),A=fn(A,s,w),h&&(w||p)&&(h=!1),S.push({type:"item",str:A}),S},[]),k;if(b.length===0)k=r.start+r.end;else if(p){let{start:S,end:y}=r,v=b.map(w=>w.str);if(m||v.reduce((w,A)=>w+A.length+2,2)>W.maxFlowStringSingleLineLength){k=S;for(let w of v)k+=w?`
${l}${c}${w}`:`
`;k+=`
${c}${y}`}else k=`${S} ${v.join(" ")} ${y}`}else{let S=b.map(n);k=S.shift();for(let y of S)k+=y?`
${c}${y}`:`
`}return this.comment?(k+=`
`+this.comment.replace(/^/gm,`${c}#`),a&&a()):h&&o&&o(),k}};g._defineProperty(W,"maxFlowStringSingleLineLength",60);function Ei(t){let e=t instanceof re?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),Number.isInteger(e)&&e>=0?e:null}var dt=class extends W{add(e){this.items.push(e)}delete(e){let n=Ei(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){let r=Ei(e);if(typeof r!="number")return;let i=this.items[r];return!n&&i instanceof re?i.value:i}has(e){let n=Ei(e);return typeof n=="number"&&n<this.items.length}set(e,n){let r=Ei(e);if(typeof r!="number")throw new Error(`Expected a valid index, not ${e}.`);this.items[r]=n}toJSON(e,n){let r=[];n&&n.onCreate&&n.onCreate(r);let i=0;for(let s of this.items)r.push(ht(s,String(i++),n));return r}toString(e,n,r){return e?super.toString(e,{blockItem:i=>i.type==="comment"?i.str:`- ${i.str}`,flowChars:{start:"[",end:"]"},isMap:!1,itemIndent:(e.indent||"")+"  "},n,r):JSON.stringify(this)}},S0=(t,e,n)=>e===null?"":typeof e!="object"?String(e):t instanceof me&&n&&n.doc?t.toString({anchors:Object.create(null),doc:n.doc,indent:"",indentStep:n.indentStep,inFlow:!0,inStringifyKey:!0,stringify:n.stringify}):JSON.stringify(e),Y=class extends me{constructor(e,n=null){super(),this.key=e,this.value=n,this.type=Y.Type.PAIR}get commentBefore(){return this.key instanceof me?this.key.commentBefore:void 0}set commentBefore(e){if(this.key==null&&(this.key=new re(null)),this.key instanceof me)this.key.commentBefore=e;else{let n="Pair.commentBefore is an alias for Pair.key.commentBefore. To set it, the key must be a Node.";throw new Error(n)}}addToJSMap(e,n){let r=ht(this.key,"",e);if(n instanceof Map){let i=ht(this.value,r,e);n.set(r,i)}else if(n instanceof Set)n.add(r);else{let i=S0(this.key,r,e),s=ht(this.value,i,e);i in n?Object.defineProperty(n,i,{value:s,writable:!0,enumerable:!0,configurable:!0}):n[i]=s}return n}toJSON(e,n){let r=n&&n.mapAsMap?new Map:{};return this.addToJSMap(n,r)}toString(e,n,r){if(!e||!e.doc)return JSON.stringify(this);let{indent:i,indentSeq:s,simpleKeys:a}=e.doc.options,{key:o,value:c}=this,l=o instanceof me&&o.comment;if(a){if(l)throw new Error("With simple keys, key nodes cannot have comments");if(o instanceof W){let A="With simple keys, collection cannot be used as a key value";throw new Error(A)}}let u=!a&&(!o||l||(o instanceof me?o instanceof W||o.type===g.Type.BLOCK_FOLDED||o.type===g.Type.BLOCK_LITERAL:typeof o=="object")),{doc:p,indent:f,indentStep:h,stringify:m}=e;e=Object.assign({},e,{implicitKey:!u,indent:f+h});let b=!1,k=m(o,e,()=>l=null,()=>b=!0);if(k=fn(k,e.indent,l),!u&&k.length>1024){if(a)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");u=!0}if(e.allNullValues&&!a)return this.comment?(k=fn(k,e.indent,this.comment),n&&n()):b&&!l&&r&&r(),e.inFlow&&!u?k:`? ${k}`;k=u?`? ${k}
${f}:`:`${k}:`,this.comment&&(k=fn(k,e.indent,this.comment),n&&n());let S="",y=null;if(c instanceof me){if(c.spaceBefore&&(S=`
`),c.commentBefore){let A=c.commentBefore.replace(/^/gm,`${e.indent}#`);S+=`
${A}`}y=c.comment}else c&&typeof c=="object"&&(c=p.schema.createNode(c,!0));e.implicitKey=!1,!u&&!this.comment&&c instanceof re&&(e.indentAtStart=k.length+1),b=!1,!s&&i>=2&&!e.inFlow&&!u&&c instanceof dt&&c.type!==g.Type.FLOW_SEQ&&!c.tag&&!p.anchors.getName(c)&&(e.indent=e.indent.substr(2));let v=m(c,e,()=>y=null,()=>b=!0),w=" ";return S||this.comment?w=`${S}
${e.indent}`:!u&&c instanceof W?(!(v[0]==="["||v[0]==="{")||v.includes(`
`))&&(w=`
${e.indent}`):v[0]===`
`&&(w=""),b&&!y&&r&&r(),fn(k+w+v,e.indent,y)}};g._defineProperty(Y,"Type",{PAIR:"PAIR",MERGE_PAIR:"MERGE_PAIR"});var Si=(t,e)=>{if(t instanceof Ue){let n=e.get(t.source);return n.count*n.aliasCount}else if(t instanceof W){let n=0;for(let r of t.items){let i=Si(r,e);i>n&&(n=i)}return n}else if(t instanceof Y){let n=Si(t.key,e),r=Si(t.value,e);return Math.max(n,r)}return 1},Ue=class extends me{static stringify({range:e,source:n},{anchors:r,doc:i,implicitKey:s,inStringifyKey:a}){let o=Object.keys(r).find(l=>r[l]===n);if(!o&&a&&(o=i.anchors.getName(n)||i.anchors.newName()),o)return`*${o}${s?" ":""}`;let c=i.anchors.getName(n)?"Alias node must be after source node":"Source node not found for alias node";throw new Error(`${c} [${e}]`)}constructor(e){super(),this.source=e,this.type=g.Type.ALIAS}set tag(e){throw new Error("Alias nodes cannot have tags")}toJSON(e,n){if(!n)return ht(this.source,e,n);let{anchors:r,maxAliasCount:i}=n,s=r.get(this.source);if(!s||s.res===void 0){let a="This should not happen: Alias anchor was not resolved?";throw this.cstNode?new g.YAMLReferenceError(this.cstNode,a):new ReferenceError(a)}if(i>=0&&(s.count+=1,s.aliasCount===0&&(s.aliasCount=Si(this.source,r)),s.count*s.aliasCount>i)){let a="Excessive alias count indicates a resource exhaustion attack";throw this.cstNode?new g.YAMLReferenceError(this.cstNode,a):new ReferenceError(a)}return s.res}toString(e){return Ue.stringify(this,e)}};g._defineProperty(Ue,"default",!0);function Qn(t,e){let n=e instanceof re?e.value:e;for(let r of t)if(r instanceof Y&&(r.key===e||r.key===n||r.key&&r.key.value===n))return r}var Zn=class extends W{add(e,n){e?e instanceof Y||(e=new Y(e.key||e,e.value)):e=new Y(e);let r=Qn(this.items,e.key),i=this.schema&&this.schema.sortMapEntries;if(r)if(n)r.value=e.value;else throw new Error(`Key ${e.key} already set`);else if(i){let s=this.items.findIndex(a=>i(e,a)<0);s===-1?this.items.push(e):this.items.splice(s,0,e)}else this.items.push(e)}delete(e){let n=Qn(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){let r=Qn(this.items,e),i=r&&r.value;return!n&&i instanceof re?i.value:i}has(e){return!!Qn(this.items,e)}set(e,n){this.add(new Y(e,n),!0)}toJSON(e,n,r){let i=r?new r:n&&n.mapAsMap?new Map:{};n&&n.onCreate&&n.onCreate(i);for(let s of this.items)s.addToJSMap(n,i);return i}toString(e,n,r){if(!e)return JSON.stringify(this);for(let i of this.items)if(!(i instanceof Y))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return super.toString(e,{blockItem:i=>i.str,flowChars:{start:"{",end:"}"},isMap:!0,itemIndent:e.indent||""},n,r)}},Xf="<<",Oi=class extends Y{constructor(e){if(e instanceof Y){let n=e.value;n instanceof dt||(n=new dt,n.items.push(e.value),n.range=e.value.range),super(e.key,n),this.range=e.range}else super(new re(Xf),new dt);this.type=Y.Type.MERGE_PAIR}addToJSMap(e,n){for(let{source:r}of this.value.items){if(!(r instanceof Zn))throw new Error("Merge sources must be maps");let i=r.toJSON(null,e,Map);for(let[s,a]of i)n instanceof Map?n.has(s)||n.set(s,a):n instanceof Set?n.add(s):Object.prototype.hasOwnProperty.call(n,s)||Object.defineProperty(n,s,{value:a,writable:!0,enumerable:!0,configurable:!0})}return n}toString(e,n){let r=this.value;if(r.items.length>1)return super.toString(e,n);this.value=r.items[0];let i=super.toString(e,n);return this.value=r,i}},_0={defaultType:g.Type.BLOCK_LITERAL,lineWidth:76},k0={trueStr:"true",falseStr:"false"},O0={asBigInt:!1},A0={nullStr:"null"},Mt={defaultType:g.Type.PLAIN,doubleQuoted:{jsonEncoding:!1,minMultiLineLength:40},fold:{lineWidth:80,minContentWidth:20}};function yo(t,e,n){for(let{format:r,test:i,resolve:s}of e)if(i){let a=t.match(i);if(a){let o=s.apply(null,a);return o instanceof re||(o=new re(o)),r&&(o.format=r),o}}return n&&(t=n(t)),new re(t)}var eh="flow",go="block",_i="quoted",Qf=(t,e)=>{let n=t[e+1];for(;n===" "||n==="	";){do n=t[e+=1];while(n&&n!==`
`);n=t[e+1]}return e};function Ai(t,e,n,{indentAtStart:r,lineWidth:i=80,minContentWidth:s=20,onFold:a,onOverflow:o}){if(!i||i<0)return t;let c=Math.max(1+s,1+i-e.length);if(t.length<=c)return t;let l=[],u={},p=i-e.length;typeof r=="number"&&(r>i-Math.max(2,s)?l.push(0):p=i-r);let f,h,m=!1,b=-1,k=-1,S=-1;n===go&&(b=Qf(t,b),b!==-1&&(p=b+c));for(let v;v=t[b+=1];){if(n===_i&&v==="\\"){switch(k=b,t[b+1]){case"x":b+=3;break;case"u":b+=5;break;case"U":b+=9;break;default:b+=1}S=b}if(v===`
`)n===go&&(b=Qf(t,b)),p=b+c,f=void 0;else{if(v===" "&&h&&h!==" "&&h!==`
`&&h!=="	"){let w=t[b+1];w&&w!==" "&&w!==`
`&&w!=="	"&&(f=b)}if(b>=p)if(f)l.push(f),p=f+c,f=void 0;else if(n===_i){for(;h===" "||h==="	";)h=v,v=t[b+=1],m=!0;let w=b>S+1?b-2:k-1;if(u[w])return t;l.push(w),u[w]=!0,p=w+c,f=void 0}else m=!0}h=v}if(m&&o&&o(),l.length===0)return t;a&&a();let y=t.slice(0,l[0]);for(let v=0;v<l.length;++v){let w=l[v],A=l[v+1]||t.length;w===0?y=`
${e}${t.slice(0,A)}`:(n===_i&&u[w]&&(y+=`${t[w]}\\`),y+=`
${e}${t.slice(w+1,A)}`)}return y}var vo=({indentAtStart:t})=>t?Object.assign({indentAtStart:t},Mt.fold):Mt.fold,Ti=t=>/^(%|---|\.\.\.)/m.test(t);function T0(t,e,n){if(!e||e<0)return!1;let r=e-n,i=t.length;if(i<=r)return!1;for(let s=0,a=0;s<i;++s)if(t[s]===`
`){if(s-a>r)return!0;if(a=s+1,i-a<=r)return!1}return!0}function Ct(t,e){let{implicitKey:n}=e,{jsonEncoding:r,minMultiLineLength:i}=Mt.doubleQuoted,s=JSON.stringify(t);if(r)return s;let a=e.indent||(Ti(t)?"  ":""),o="",c=0;for(let l=0,u=s[l];u;u=s[++l])if(u===" "&&s[l+1]==="\\"&&s[l+2]==="n"&&(o+=s.slice(c,l)+"\\ ",l+=1,c=l,u="\\"),u==="\\")switch(s[l+1]){case"u":{o+=s.slice(c,l);let p=s.substr(l+2,4);switch(p){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:p.substr(0,2)==="00"?o+="\\x"+p.substr(2):o+=s.substr(l,6)}l+=5,c=l+1}break;case"n":if(n||s[l+2]==='"'||s.length<i)l+=1;else{for(o+=s.slice(c,l)+`

`;s[l+2]==="\\"&&s[l+3]==="n"&&s[l+4]!=='"';)o+=`
`,l+=2;o+=a,s[l+2]===" "&&(o+="\\"),l+=1,c=l+1}break;default:l+=1}return o=c?o+s.slice(c):s,n?o:Ai(o,a,_i,vo(e))}function th(t,e){if(e.implicitKey){if(/\n/.test(t))return Ct(t,e)}else if(/[ \t]\n|\n[ \t]/.test(t))return Ct(t,e);let n=e.indent||(Ti(t)?"  ":""),r="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?r:Ai(r,n,eh,vo(e))}function ki({comment:t,type:e,value:n},r,i,s){if(/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return Ct(n,r);let a=r.indent||(r.forceBlockIndent||Ti(n)?"  ":""),o=a?"2":"1",c=e===g.Type.BLOCK_FOLDED?!1:e===g.Type.BLOCK_LITERAL?!0:!T0(n,Mt.fold.lineWidth,a.length),l=c?"|":">";if(!n)return l+`
`;let u="",p="";if(n=n.replace(/[\n\t ]*$/,h=>{let m=h.indexOf(`
`);return m===-1?l+="-":(n===h||m!==h.length-1)&&(l+="+",s&&s()),p=h.replace(/\n$/,""),""}).replace(/^[\n ]*/,h=>{h.indexOf(" ")!==-1&&(l+=o);let m=h.match(/ +$/);return m?(u=h.slice(0,-m[0].length),m[0]):(u=h,"")}),p&&(p=p.replace(/\n+(?!\n|$)/g,`$&${a}`)),u&&(u=u.replace(/\n+/g,`$&${a}`)),t&&(l+=" #"+t.replace(/ ?[\r\n]+/g," "),i&&i()),!n)return`${l}${o}
${a}${p}`;if(c)return n=n.replace(/\n+/g,`$&${a}`),`${l}
${a}${u}${n}${p}`;n=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${a}`);let f=Ai(`${u}${n}${p}`,a,go,Mt.fold);return`${l}
${a}${f}`}function I0(t,e,n,r){let{comment:i,type:s,value:a}=t,{actualString:o,implicitKey:c,indent:l,inFlow:u}=e;if(c&&/[\n[\]{},]/.test(a)||u&&/[[\]{},]/.test(a))return Ct(a,e);if(!a||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(a))return c||u||a.indexOf(`
`)===-1?a.indexOf('"')!==-1&&a.indexOf("'")===-1?th(a,e):Ct(a,e):ki(t,e,n,r);if(!c&&!u&&s!==g.Type.PLAIN&&a.indexOf(`
`)!==-1)return ki(t,e,n,r);if(l===""&&Ti(a))return e.forceBlockIndent=!0,ki(t,e,n,r);let p=a.replace(/\n+/g,`$&
${l}`);if(o){let{tags:h}=e.doc.schema;if(typeof yo(p,h,h.scalarFallback).value!="string")return Ct(a,e)}let f=c?p:Ai(p,l,eh,vo(e));return i&&!u&&(f.indexOf(`
`)!==-1||i.indexOf(`
`)!==-1)?(n&&n(),E0(f,l,i)):f}function N0(t,e,n,r){let{defaultType:i}=Mt,{implicitKey:s,inFlow:a}=e,{type:o,value:c}=t;typeof c!="string"&&(c=String(c),t=Object.assign({},t,{value:c}));let l=p=>{switch(p){case g.Type.BLOCK_FOLDED:case g.Type.BLOCK_LITERAL:return ki(t,e,n,r);case g.Type.QUOTE_DOUBLE:return Ct(c,e);case g.Type.QUOTE_SINGLE:return th(c,e);case g.Type.PLAIN:return I0(t,e,n,r);default:return null}};(o!==g.Type.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f]/.test(c)||(s||a)&&(o===g.Type.BLOCK_FOLDED||o===g.Type.BLOCK_LITERAL))&&(o=g.Type.QUOTE_DOUBLE);let u=l(o);if(u===null&&(u=l(i),u===null))throw new Error(`Unsupported default string type ${i}`);return u}function L0({format:t,minFractionDigits:e,tag:n,value:r}){if(typeof r=="bigint")return String(r);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let i=JSON.stringify(r);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(i)){let s=i.indexOf(".");s<0&&(s=i.length,i+=".");let a=e-(i.length-s-1);for(;a-- >0;)i+="0"}return i}function nh(t,e){let n,r;switch(e.type){case g.Type.FLOW_MAP:n="}",r="flow map";break;case g.Type.FLOW_SEQ:n="]",r="flow sequence";break;default:t.push(new g.YAMLSemanticError(e,"Not a flow collection!?"));return}let i;for(let s=e.items.length-1;s>=0;--s){let a=e.items[s];if(!a||a.type!==g.Type.COMMENT){i=a;break}}if(i&&i.char!==n){let s=`Expected ${r} to end with ${n}`,a;typeof i.offset=="number"?(a=new g.YAMLSemanticError(e,s),a.offset=i.offset+1):(a=new g.YAMLSemanticError(i,s),i.range&&i.range.end&&(a.offset=i.range.end-i.range.start)),t.push(a)}}function rh(t,e){let n=e.context.src[e.range.start-1];if(n!==`
`&&n!=="	"&&n!==" "){let r="Comments must be separated from other tokens by white space characters";t.push(new g.YAMLSemanticError(e,r))}}function ih(t,e){let n=String(e),r=n.substr(0,8)+"..."+n.substr(-8);return new g.YAMLSemanticError(t,`The "${r}" key is too long`)}function sh(t,e){for(let{afterKey:n,before:r,comment:i}of e){let s=t.items[r];s?(n&&s.value&&(s=s.value),i===void 0?(n||!s.commentBefore)&&(s.spaceBefore=!0):s.commentBefore?s.commentBefore+=`
`+i:s.commentBefore=i):i!==void 0&&(t.comment?t.comment+=`
`+i:t.comment=i)}}function wo(t,e){let n=e.strValue;return n?typeof n=="string"?n:(n.errors.forEach(r=>{r.source||(r.source=e),t.errors.push(r)}),n.str):""}function R0(t,e){let{handle:n,suffix:r}=e.tag,i=t.tagPrefixes.find(s=>s.handle===n);if(!i){let s=t.getDefaults().tagPrefixes;if(s&&(i=s.find(a=>a.handle===n)),!i)throw new g.YAMLSemanticError(e,`The ${n} tag handle is non-default and was not declared.`)}if(!r)throw new g.YAMLSemanticError(e,`The ${n} tag has no suffix.`);if(n==="!"&&(t.version||t.options.version)==="1.0"){if(r[0]==="^")return t.warnings.push(new g.YAMLWarning(e,"YAML 1.0 ^ tag expansion is not supported")),r;if(/[:/]/.test(r)){let s=r.match(/^([a-z0-9-]+)\/(.*)/i);return s?`tag:${s[1]}.yaml.org,2002:${s[2]}`:`tag:${r}`}}return i.prefix+decodeURIComponent(r)}function P0(t,e){let{tag:n,type:r}=e,i=!1;if(n){let{handle:s,suffix:a,verbatim:o}=n;if(o){if(o!=="!"&&o!=="!!")return o;let c=`Verbatim tags aren't resolved, so ${o} is invalid.`;t.errors.push(new g.YAMLSemanticError(e,c))}else if(s==="!"&&!a)i=!0;else try{return R0(t,e)}catch(c){t.errors.push(c)}}switch(r){case g.Type.BLOCK_FOLDED:case g.Type.BLOCK_LITERAL:case g.Type.QUOTE_DOUBLE:case g.Type.QUOTE_SINGLE:return g.defaultTags.STR;case g.Type.FLOW_MAP:case g.Type.MAP:return g.defaultTags.MAP;case g.Type.FLOW_SEQ:case g.Type.SEQ:return g.defaultTags.SEQ;case g.Type.PLAIN:return i?g.defaultTags.STR:null;default:return null}}function Zf(t,e,n){let{tags:r}=t.schema,i=[];for(let a of r)if(a.tag===n)if(a.test)i.push(a);else{let o=a.resolve(t,e);return o instanceof W?o:new re(o)}let s=wo(t,e);return typeof s=="string"&&i.length>0?yo(s,i,r.scalarFallback):null}function C0({type:t}){switch(t){case g.Type.FLOW_MAP:case g.Type.MAP:return g.defaultTags.MAP;case g.Type.FLOW_SEQ:case g.Type.SEQ:return g.defaultTags.SEQ;default:return g.defaultTags.STR}}function M0(t,e,n){try{let r=Zf(t,e,n);if(r)return n&&e.tag&&(r.tag=n),r}catch(r){return r.source||(r.source=e),t.errors.push(r),null}try{let r=C0(e);if(!r)throw new Error(`The tag ${n} is unavailable`);let i=`The tag ${n} is unavailable, falling back to ${r}`;t.warnings.push(new g.YAMLWarning(e,i));let s=Zf(t,e,r);return s.tag=n,s}catch(r){let i=new g.YAMLReferenceError(e,r.message);return i.stack=r.stack,t.errors.push(i),null}}var D0=t=>{if(!t)return!1;let{type:e}=t;return e===g.Type.MAP_KEY||e===g.Type.MAP_VALUE||e===g.Type.SEQ_ITEM};function F0(t,e){let n={before:[],after:[]},r=!1,i=!1,s=D0(e.context.parent)?e.context.parent.props.concat(e.props):e.props;for(let{start:a,end:o}of s)switch(e.context.src[a]){case g.Char.COMMENT:{if(!e.commentHasRequiredWhitespace(a)){let p="Comments must be separated from other tokens by white space characters";t.push(new g.YAMLSemanticError(e,p))}let{header:c,valueRange:l}=e;(l&&(a>l.start||c&&a>c.start)?n.after:n.before).push(e.context.src.slice(a+1,o));break}case g.Char.ANCHOR:if(r){let c="A node can have at most one anchor";t.push(new g.YAMLSemanticError(e,c))}r=!0;break;case g.Char.TAG:if(i){let c="A node can have at most one tag";t.push(new g.YAMLSemanticError(e,c))}i=!0;break}return{comments:n,hasAnchor:r,hasTag:i}}function $0(t,e){let{anchors:n,errors:r,schema:i}=t;if(e.type===g.Type.ALIAS){let a=e.rawValue,o=n.getNode(a);if(!o){let l=`Aliased anchor not found: ${a}`;return r.push(new g.YAMLReferenceError(e,l)),null}let c=new Ue(o);return n._cstAliases.push(c),c}let s=P0(t,e);if(s)return M0(t,e,s);if(e.type!==g.Type.PLAIN){let a=`Failed to resolve ${e.type} node here`;return r.push(new g.YAMLSyntaxError(e,a)),null}try{let a=wo(t,e);return yo(a,i.tags,i.tags.scalarFallback)}catch(a){return a.source||(a.source=e),r.push(a),null}}function mt(t,e){if(!e)return null;e.error&&t.errors.push(e.error);let{comments:n,hasAnchor:r,hasTag:i}=F0(t.errors,e);if(r){let{anchors:a}=t,o=e.anchor,c=a.getNode(o);c&&(a.map[a.newName(o)]=c),a.map[o]=e}if(e.type===g.Type.ALIAS&&(r||i)){let a="An alias node must not specify any properties";t.errors.push(new g.YAMLSemanticError(e,a))}let s=$0(t,e);if(s){s.range=[e.range.start,e.range.end],t.options.keepCstNodes&&(s.cstNode=e),t.options.keepNodeTypes&&(s.type=e.type);let a=n.before.join(`
`);a&&(s.commentBefore=s.commentBefore?`${s.commentBefore}
${a}`:a);let o=n.after.join(`
`);o&&(s.comment=s.comment?`${s.comment}
${o}`:o)}return e.resolved=s}function j0(t,e){if(e.type!==g.Type.MAP&&e.type!==g.Type.FLOW_MAP){let a=`A ${e.type} node cannot be resolved as a mapping`;return t.errors.push(new g.YAMLSyntaxError(e,a)),null}let{comments:n,items:r}=e.type===g.Type.FLOW_MAP?z0(t,e):U0(t,e),i=new Zn;i.items=r,sh(i,n);let s=!1;for(let a=0;a<r.length;++a){let{key:o}=r[a];if(o instanceof W&&(s=!0),t.schema.merge&&o&&o.value===Xf){r[a]=new Oi(r[a]);let c=r[a].value.items,l=null;c.some(u=>{if(u instanceof Ue){let{type:p}=u.source;return p===g.Type.MAP||p===g.Type.FLOW_MAP?!1:l="Merge nodes aliases can only point to maps"}return l="Merge nodes can only have Alias nodes as values"}),l&&t.errors.push(new g.YAMLSemanticError(e,l))}else for(let c=a+1;c<r.length;++c){let{key:l}=r[c];if(o===l||o&&l&&Object.prototype.hasOwnProperty.call(o,"value")&&o.value===l.value){let u=`Map keys must be unique; "${o}" is repeated`;t.errors.push(new g.YAMLSemanticError(e,u));break}}}if(s&&!t.options.mapAsMap){let a="Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this.";t.warnings.push(new g.YAMLWarning(e,a))}return e.resolved=i,i}var q0=({context:{lineStart:t,node:e,src:n},props:r})=>{if(r.length===0)return!1;let{start:i}=r[0];if(e&&i>e.valueRange.start||n[i]!==g.Char.COMMENT)return!1;for(let s=t;s<i;++s)if(n[s]===`
`)return!1;return!0};function B0(t,e){if(!q0(t))return;let n=t.getPropValue(0,g.Char.COMMENT,!0),r=!1,i=e.value.commentBefore;if(i&&i.startsWith(n))e.value.commentBefore=i.substr(n.length+1),r=!0;else{let s=e.value.comment;!t.node&&s&&s.startsWith(n)&&(e.value.comment=s.substr(n.length+1),r=!0)}r&&(e.comment=n)}function U0(t,e){let n=[],r=[],i,s=null;for(let a=0;a<e.items.length;++a){let o=e.items[a];switch(o.type){case g.Type.BLANK_LINE:n.push({afterKey:!!i,before:r.length});break;case g.Type.COMMENT:n.push({afterKey:!!i,before:r.length,comment:o.comment});break;case g.Type.MAP_KEY:i!==void 0&&r.push(new Y(i)),o.error&&t.errors.push(o.error),i=mt(t,o.node),s=null;break;case g.Type.MAP_VALUE:{if(i===void 0&&(i=null),o.error&&t.errors.push(o.error),!o.context.atLineStart&&o.node&&o.node.type===g.Type.MAP&&!o.node.context.atLineStart){let u="Nested mappings are not allowed in compact mappings";t.errors.push(new g.YAMLSemanticError(o.node,u))}let c=o.node;if(!c&&o.props.length>0){c=new g.PlainValue(g.Type.PLAIN,[]),c.context={parent:o,src:o.context.src};let u=o.range.start+1;if(c.range={start:u,end:u},c.valueRange={start:u,end:u},typeof o.range.origStart=="number"){let p=o.range.origStart+1;c.range.origStart=c.range.origEnd=p,c.valueRange.origStart=c.valueRange.origEnd=p}}let l=new Y(i,mt(t,c));B0(o,l),r.push(l),i&&typeof s=="number"&&o.range.start>s+1024&&t.errors.push(ih(e,i)),i=void 0,s=null}break;default:i!==void 0&&r.push(new Y(i)),i=mt(t,o),s=o.range.start,o.error&&t.errors.push(o.error);e:for(let c=a+1;;++c){let l=e.items[c];switch(l&&l.type){case g.Type.BLANK_LINE:case g.Type.COMMENT:continue e;case g.Type.MAP_VALUE:break e;default:{let u="Implicit map keys need to be followed by map values";t.errors.push(new g.YAMLSemanticError(o,u));break e}}}if(o.valueRangeContainsNewline){let c="Implicit map keys need to be on a single line";t.errors.push(new g.YAMLSemanticError(o,c))}}}return i!==void 0&&r.push(new Y(i)),{comments:n,items:r}}function z0(t,e){let n=[],r=[],i,s=!1,a="{";for(let o=0;o<e.items.length;++o){let c=e.items[o];if(typeof c.char=="string"){let{char:l,offset:u}=c;if(l==="?"&&i===void 0&&!s){s=!0,a=":";continue}if(l===":"){if(i===void 0&&(i=null),a===":"){a=",";continue}}else if(s&&(i===void 0&&l!==","&&(i=null),s=!1),i!==void 0&&(r.push(new Y(i)),i=void 0,l===",")){a=":";continue}if(l==="}"){if(o===e.items.length-1)continue}else if(l===a){a=":";continue}let p=`Flow map contains an unexpected ${l}`,f=new g.YAMLSyntaxError(e,p);f.offset=u,t.errors.push(f)}else c.type===g.Type.BLANK_LINE?n.push({afterKey:!!i,before:r.length}):c.type===g.Type.COMMENT?(rh(t.errors,c),n.push({afterKey:!!i,before:r.length,comment:c.comment})):i===void 0?(a===","&&t.errors.push(new g.YAMLSemanticError(c,"Separator , missing in flow map")),i=mt(t,c)):(a!==","&&t.errors.push(new g.YAMLSemanticError(c,"Indicator : missing in flow map entry")),r.push(new Y(i,mt(t,c))),i=void 0,s=!1)}return nh(t.errors,e),i!==void 0&&r.push(new Y(i)),{comments:n,items:r}}function Y0(t,e){if(e.type!==g.Type.SEQ&&e.type!==g.Type.FLOW_SEQ){let s=`A ${e.type} node cannot be resolved as a sequence`;return t.errors.push(new g.YAMLSyntaxError(e,s)),null}let{comments:n,items:r}=e.type===g.Type.FLOW_SEQ?G0(t,e):V0(t,e),i=new dt;if(i.items=r,sh(i,n),!t.options.mapAsMap&&r.some(s=>s instanceof Y&&s.key instanceof W)){let s="Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this.";t.warnings.push(new g.YAMLWarning(e,s))}return e.resolved=i,i}function V0(t,e){let n=[],r=[];for(let i=0;i<e.items.length;++i){let s=e.items[i];switch(s.type){case g.Type.BLANK_LINE:n.push({before:r.length});break;case g.Type.COMMENT:n.push({comment:s.comment,before:r.length});break;case g.Type.SEQ_ITEM:if(s.error&&t.errors.push(s.error),r.push(mt(t,s.node)),s.hasProps){let a="Sequence items cannot have tags or anchors before the - indicator";t.errors.push(new g.YAMLSemanticError(s,a))}break;default:s.error&&t.errors.push(s.error),t.errors.push(new g.YAMLSyntaxError(s,`Unexpected ${s.type} node in sequence`))}}return{comments:n,items:r}}function G0(t,e){let n=[],r=[],i=!1,s,a=null,o="[",c=null;for(let l=0;l<e.items.length;++l){let u=e.items[l];if(typeof u.char=="string"){let{char:p,offset:f}=u;if(p!==":"&&(i||s!==void 0)&&(i&&s===void 0&&(s=o?r.pop():null),r.push(new Y(s)),i=!1,s=void 0,a=null),p===o)o=null;else if(!o&&p==="?")i=!0;else if(o!=="["&&p===":"&&s===void 0){if(o===","){if(s=r.pop(),s instanceof Y){let h="Chaining flow sequence pairs is invalid",m=new g.YAMLSemanticError(e,h);m.offset=f,t.errors.push(m)}if(!i&&typeof a=="number"){let h=u.range?u.range.start:u.offset;h>a+1024&&t.errors.push(ih(e,s));let{src:m}=c.context;for(let b=a;b<h;++b)if(m[b]===`
`){let k="Implicit keys of flow sequence pairs need to be on a single line";t.errors.push(new g.YAMLSemanticError(c,k));break}}}else s=null;a=null,i=!1,o=null}else if(o==="["||p!=="]"||l<e.items.length-1){let h=`Flow sequence contains an unexpected ${p}`,m=new g.YAMLSyntaxError(e,h);m.offset=f,t.errors.push(m)}}else if(u.type===g.Type.BLANK_LINE)n.push({before:r.length});else if(u.type===g.Type.COMMENT)rh(t.errors,u),n.push({comment:u.comment,before:r.length});else{if(o){let f=`Expected a ${o} in flow sequence`;t.errors.push(new g.YAMLSemanticError(u,f))}let p=mt(t,u);s===void 0?(r.push(p),c=u):(r.push(new Y(s,p)),s=void 0),a=u.range.start,o=","}}return nh(t.errors,e),s!==void 0&&r.push(new Y(s)),{comments:n,items:r}}V.Alias=Ue;V.Collection=W;V.Merge=Oi;V.Node=me;V.Pair=Y;V.Scalar=re;V.YAMLMap=Zn;V.YAMLSeq=dt;V.addComment=fn;V.binaryOptions=_0;V.boolOptions=k0;V.findPair=Qn;V.intOptions=O0;V.isEmptyPath=Jf;V.nullOptions=A0;V.resolveMap=j0;V.resolveNode=mt;V.resolveSeq=Y0;V.resolveString=wo;V.strOptions=Mt;V.stringifyNumber=L0;V.stringifyString=N0;V.toJSON=ht});var Ii=x(_e=>{"use strict";var ge=pt(),j=hn(),H0={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve:(t,e)=>{let n=j.resolveString(t,e);if(typeof Buffer=="function")return Buffer.from(n,"base64");if(typeof atob=="function"){let r=atob(n.replace(/[\n\r]/g,"")),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}else{let r="This environment does not support reading binary tags; either Buffer or atob is required";return t.errors.push(new ge.YAMLReferenceError(e,r)),null}},options:j.binaryOptions,stringify:({comment:t,type:e,value:n},r,i,s)=>{let a;if(typeof Buffer=="function")a=n instanceof Buffer?n.toString("base64"):Buffer.from(n.buffer).toString("base64");else if(typeof btoa=="function"){let o="";for(let c=0;c<n.length;++c)o+=String.fromCharCode(n[c]);a=btoa(o)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=j.binaryOptions.defaultType),e===ge.Type.QUOTE_DOUBLE)n=a;else{let{lineWidth:o}=j.binaryOptions,c=Math.ceil(a.length/o),l=new Array(c);for(let u=0,p=0;u<c;++u,p+=o)l[u]=a.substr(p,o);n=l.join(e===ge.Type.BLOCK_LITERAL?`
`:" ")}return j.stringifyString({comment:t,type:e,value:n},r,i,s)}};function oh(t,e){let n=j.resolveSeq(t,e);for(let r=0;r<n.items.length;++r){let i=n.items[r];if(!(i instanceof j.Pair)){if(i instanceof j.YAMLMap){if(i.items.length>1){let a="Each pair must have its own sequence indicator";throw new ge.YAMLSemanticError(e,a)}let s=i.items[0]||new j.Pair;i.commentBefore&&(s.commentBefore=s.commentBefore?`${i.commentBefore}
${s.commentBefore}`:i.commentBefore),i.comment&&(s.comment=s.comment?`${i.comment}
${s.comment}`:i.comment),i=s}n.items[r]=i instanceof j.Pair?i:new j.Pair(i)}}return n}function ch(t,e,n){let r=new j.YAMLSeq(t);r.tag="tag:yaml.org,2002:pairs";for(let i of e){let s,a;if(Array.isArray(i))if(i.length===2)s=i[0],a=i[1];else throw new TypeError(`Expected [key, value] tuple: ${i}`);else if(i&&i instanceof Object){let c=Object.keys(i);if(c.length===1)s=c[0],a=i[s];else throw new TypeError(`Expected { key: value } tuple: ${i}`)}else s=i;let o=t.createPair(s,a,n);r.items.push(o)}return r}var W0={default:!1,tag:"tag:yaml.org,2002:pairs",resolve:oh,createNode:ch},gt=class extends j.YAMLSeq{constructor(){super(),ge._defineProperty(this,"add",j.YAMLMap.prototype.add.bind(this)),ge._defineProperty(this,"delete",j.YAMLMap.prototype.delete.bind(this)),ge._defineProperty(this,"get",j.YAMLMap.prototype.get.bind(this)),ge._defineProperty(this,"has",j.YAMLMap.prototype.has.bind(this)),ge._defineProperty(this,"set",j.YAMLMap.prototype.set.bind(this)),this.tag=gt.tag}toJSON(e,n){let r=new Map;n&&n.onCreate&&n.onCreate(r);for(let i of this.items){let s,a;if(i instanceof j.Pair?(s=j.toJSON(i.key,"",n),a=j.toJSON(i.value,s,n)):s=j.toJSON(i,"",n),r.has(s))throw new Error("Ordered maps must not include duplicate keys");r.set(s,a)}return r}};ge._defineProperty(gt,"tag","tag:yaml.org,2002:omap");function K0(t,e){let n=oh(t,e),r=[];for(let{key:i}of n.items)if(i instanceof j.Scalar)if(r.includes(i.value)){let s="Ordered maps must not include duplicate keys";throw new ge.YAMLSemanticError(e,s)}else r.push(i.value);return Object.assign(new gt,n)}function Q0(t,e,n){let r=ch(t,e,n),i=new gt;return i.items=r.items,i}var Z0={identify:t=>t instanceof Map,nodeClass:gt,default:!1,tag:"tag:yaml.org,2002:omap",resolve:K0,createNode:Q0},yt=class extends j.YAMLMap{constructor(){super(),this.tag=yt.tag}add(e){let n=e instanceof j.Pair?e:new j.Pair(e);j.findPair(this.items,n.key)||this.items.push(n)}get(e,n){let r=j.findPair(this.items,e);return!n&&r instanceof j.Pair?r.key instanceof j.Scalar?r.key.value:r.key:r}set(e,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);let r=j.findPair(this.items,e);r&&!n?this.items.splice(this.items.indexOf(r),1):!r&&n&&this.items.push(new j.Pair(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues())return super.toString(e,n,r);throw new Error("Set items must all have null values")}};ge._defineProperty(yt,"tag","tag:yaml.org,2002:set");function J0(t,e){let n=j.resolveMap(t,e);if(!n.hasAllNullValues())throw new ge.YAMLSemanticError(e,"Set items must all have null values");return Object.assign(new yt,n)}function X0(t,e,n){let r=new yt;for(let i of e)r.items.push(t.createPair(i,null,n));return r}var eE={identify:t=>t instanceof Set,nodeClass:yt,default:!1,tag:"tag:yaml.org,2002:set",resolve:J0,createNode:X0},bo=(t,e)=>{let n=e.split(":").reduce((r,i)=>r*60+Number(i),0);return t==="-"?-n:n},lh=({value:t})=>{if(isNaN(t)||!isFinite(t))return j.stringifyNumber(t);let e="";t<0&&(e="-",t=Math.abs(t));let n=[t%60];return t<60?n.unshift(0):(t=Math.round((t-n[0])/60),n.unshift(t%60),t>=60&&(t=Math.round((t-n[0])/60),n.unshift(t))),e+n.map(r=>r<10?"0"+String(r):String(r)).join(":").replace(/000000\d*$/,"")},tE={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+)$/,resolve:(t,e,n)=>bo(e,n.replace(/_/g,"")),stringify:lh},nE={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*)$/,resolve:(t,e,n)=>bo(e,n.replace(/_/g,"")),stringify:lh},rE={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^(?:([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?)$"),resolve:(t,e,n,r,i,s,a,o,c)=>{o&&(o=(o+"00").substr(1,3));let l=Date.UTC(e,n-1,r,i||0,s||0,a||0,o||0);if(c&&c!=="Z"){let u=bo(c[0],c.slice(1));Math.abs(u)<30&&(u*=60),l-=6e4*u}return new Date(l)},stringify:({value:t})=>t.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")};function xo(t){let e=typeof process<"u"&&process.env||{};return t?typeof YAML_SILENCE_DEPRECATION_WARNINGS<"u"?!YAML_SILENCE_DEPRECATION_WARNINGS:!e.YAML_SILENCE_DEPRECATION_WARNINGS:typeof YAML_SILENCE_WARNINGS<"u"?!YAML_SILENCE_WARNINGS:!e.YAML_SILENCE_WARNINGS}function Eo(t,e){if(xo(!1)){let n=typeof process<"u"&&process.emitWarning;n?n(t,e):console.warn(e?`${e}: ${t}`:t)}}function iE(t){if(xo(!0)){let e=t.replace(/.*yaml[/\\]/i,"").replace(/\.js$/,"").replace(/\\/g,"/");Eo(`The endpoint 'yaml/${e}' will be removed in a future release.`,"DeprecationWarning")}}var ah={};function sE(t,e){if(!ah[t]&&xo(!0)){ah[t]=!0;let n=`The option '${t}' will be removed in a future release`;n+=e?`, use '${e}' instead.`:".",Eo(n,"DeprecationWarning")}}_e.binary=H0;_e.floatTime=nE;_e.intTime=tE;_e.omap=Z0;_e.pairs=W0;_e.set=eE;_e.timestamp=rE;_e.warn=Eo;_e.warnFileDeprecation=iE;_e.warnOptionDeprecation=sE});var Mi=x(Eh=>{"use strict";var Ri=pt(),N=hn(),se=Ii();function aE(t,e,n){let r=new N.YAMLMap(t);if(e instanceof Map)for(let[i,s]of e)r.items.push(t.createPair(i,s,n));else if(e&&typeof e=="object")for(let i of Object.keys(e))r.items.push(t.createPair(i,e[i],n));return typeof t.sortMapEntries=="function"&&r.items.sort(t.sortMapEntries),r}var Xn={createNode:aE,default:!0,nodeClass:N.YAMLMap,tag:"tag:yaml.org,2002:map",resolve:N.resolveMap};function oE(t,e,n){let r=new N.YAMLSeq(t);if(e&&e[Symbol.iterator])for(let i of e){let s=t.createNode(i,n.wrapScalars,null,n);r.items.push(s)}return r}var Pi={createNode:oE,default:!0,nodeClass:N.YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve:N.resolveSeq},cE={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:N.resolveString,stringify(t,e,n,r){return e=Object.assign({actualString:!0},e),N.stringifyString(t,e,n,r)},options:N.strOptions},_o=[Xn,Pi,cE],Ci=t=>typeof t=="bigint"||Number.isInteger(t),ko=(t,e,n)=>N.intOptions.asBigInt?BigInt(t):parseInt(e,n);function fh(t,e,n){let{value:r}=t;return Ci(r)&&r>=0?n+r.toString(e):N.stringifyNumber(t)}var hh={identify:t=>t==null,createNode:(t,e,n)=>n.wrapScalars?new N.Scalar(null):null,default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>null,options:N.nullOptions,stringify:()=>N.nullOptions.nullStr},dh={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>t[0]==="t"||t[0]==="T",options:N.boolOptions,stringify:({value:t})=>t?N.boolOptions.trueStr:N.boolOptions.falseStr},mh={identify:t=>Ci(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o([0-7]+)$/,resolve:(t,e)=>ko(t,e,8),options:N.intOptions,stringify:t=>fh(t,8,"0o")},gh={identify:Ci,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:t=>ko(t,t,10),options:N.intOptions,stringify:N.stringifyNumber},yh={identify:t=>Ci(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x([0-9a-fA-F]+)$/,resolve:(t,e)=>ko(t,e,16),options:N.intOptions,stringify:t=>fh(t,16,"0x")},vh={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:(t,e)=>e?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:N.stringifyNumber},wh={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify:({value:t})=>Number(t).toExponential()},bh={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.([0-9]+)|[0-9]+\.([0-9]*))$/,resolve(t,e,n){let r=e||n,i=new N.Scalar(parseFloat(t));return r&&r[r.length-1]==="0"&&(i.minFractionDigits=r.length),i},stringify:N.stringifyNumber},lE=_o.concat([hh,dh,mh,gh,yh,vh,wh,bh]),uh=t=>typeof t=="bigint"||Number.isInteger(t),Ni=({value:t})=>JSON.stringify(t),xh=[Xn,Pi,{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:N.resolveString,stringify:Ni},{identify:t=>t==null,createNode:(t,e,n)=>n.wrapScalars?new N.Scalar(null):null,default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Ni},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:t=>t==="true",stringify:Ni},{identify:uh,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:t=>N.intOptions.asBigInt?BigInt(t):parseInt(t,10),stringify:({value:t})=>uh(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:Ni}];xh.scalarFallback=t=>{throw new SyntaxError(`Unresolved plain scalar ${JSON.stringify(t)}`)};var ph=({value:t})=>t?N.boolOptions.trueStr:N.boolOptions.falseStr,Jn=t=>typeof t=="bigint"||Number.isInteger(t);function Li(t,e,n){let r=e.replace(/_/g,"");if(N.intOptions.asBigInt){switch(n){case 2:r=`0b${r}`;break;case 8:r=`0o${r}`;break;case 16:r=`0x${r}`;break}let s=BigInt(r);return t==="-"?BigInt(-1)*s:s}let i=parseInt(r,n);return t==="-"?-1*i:i}function So(t,e,n){let{value:r}=t;if(Jn(r)){let i=r.toString(e);return r<0?"-"+n+i.substr(1):n+i}return N.stringifyNumber(t)}var uE=_o.concat([{identify:t=>t==null,createNode:(t,e,n)=>n.wrapScalars?new N.Scalar(null):null,default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>null,options:N.nullOptions,stringify:()=>N.nullOptions.nullStr},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>!0,options:N.boolOptions,stringify:ph},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>!1,options:N.boolOptions,stringify:ph},{identify:Jn,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^([-+]?)0b([0-1_]+)$/,resolve:(t,e,n)=>Li(e,n,2),stringify:t=>So(t,2,"0b")},{identify:Jn,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^([-+]?)0([0-7_]+)$/,resolve:(t,e,n)=>Li(e,n,8),stringify:t=>So(t,8,"0")},{identify:Jn,default:!0,tag:"tag:yaml.org,2002:int",test:/^([-+]?)([0-9][0-9_]*)$/,resolve:(t,e,n)=>Li(e,n,10),stringify:N.stringifyNumber},{identify:Jn,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^([-+]?)0x([0-9a-fA-F_]+)$/,resolve:(t,e,n)=>Li(e,n,16),stringify:t=>So(t,16,"0x")},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:(t,e)=>e?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:N.stringifyNumber},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?([0-9][0-9_]*)?(\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify:({value:t})=>Number(t).toExponential()},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.([0-9_]*)$/,resolve(t,e){let n=new N.Scalar(parseFloat(t.replace(/_/g,"")));if(e){let r=e.replace(/_/g,"");r[r.length-1]==="0"&&(n.minFractionDigits=r.length)}return n},stringify:N.stringifyNumber}],se.binary,se.omap,se.pairs,se.set,se.intTime,se.floatTime,se.timestamp),pE={core:lE,failsafe:_o,json:xh,yaml11:uE},fE={binary:se.binary,bool:dh,float:bh,floatExp:wh,floatNaN:vh,floatTime:se.floatTime,int:gh,intHex:yh,intOct:mh,intTime:se.intTime,map:Xn,null:hh,omap:se.omap,pairs:se.pairs,seq:Pi,set:se.set,timestamp:se.timestamp};function hE(t,e,n){if(e){let r=n.filter(s=>s.tag===e),i=r.find(s=>!s.format)||r[0];if(!i)throw new Error(`Tag ${e} not found`);return i}return n.find(r=>(r.identify&&r.identify(t)||r.class&&t instanceof r.class)&&!r.format)}function dE(t,e,n){if(t instanceof N.Node)return t;let{defaultPrefix:r,onTagObj:i,prevObjects:s,schema:a,wrapScalars:o}=n;e&&e.startsWith("!!")&&(e=r+e.slice(2));let c=hE(t,e,a.tags);if(!c){if(typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object")return o?new N.Scalar(t):t;c=t instanceof Map?Xn:t[Symbol.iterator]?Pi:Xn}i&&(i(c),delete n.onTagObj);let l={value:void 0,node:void 0};if(t&&typeof t=="object"&&s){let u=s.get(t);if(u){let p=new N.Alias(u);return n.aliasNodes.push(p),p}l.value=t,s.set(t,l)}return l.node=c.createNode?c.createNode(n.schema,t,n):o?new N.Scalar(t):t,e&&l.node instanceof N.Node&&(l.node.tag=e),l.node}function mE(t,e,n,r){let i=t[r.replace(/\W/g,"")];if(!i){let s=Object.keys(t).map(a=>JSON.stringify(a)).join(", ");throw new Error(`Unknown schema "${r}"; use one of ${s}`)}if(Array.isArray(n))for(let s of n)i=i.concat(s);else typeof n=="function"&&(i=n(i.slice()));for(let s=0;s<i.length;++s){let a=i[s];if(typeof a=="string"){let o=e[a];if(!o){let c=Object.keys(e).map(l=>JSON.stringify(l)).join(", ");throw new Error(`Unknown custom tag "${a}"; use one of ${c}`)}i[s]=o}}return i}var gE=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0,Dt=class{constructor({customTags:e,merge:n,schema:r,sortMapEntries:i,tags:s}){this.merge=!!n,this.name=r,this.sortMapEntries=i===!0?gE:i||null,!e&&s&&se.warnOptionDeprecation("tags","customTags"),this.tags=mE(pE,fE,e||s,r)}createNode(e,n,r,i){let s={defaultPrefix:Dt.defaultPrefix,schema:this,wrapScalars:n},a=i?Object.assign(i,s):s;return dE(e,r,a)}createPair(e,n,r){r||(r={wrapScalars:!0});let i=this.createNode(e,r.wrapScalars,null,r),s=this.createNode(n,r.wrapScalars,null,r);return new N.Pair(i,s)}};Ri._defineProperty(Dt,"defaultPrefix",Ri.defaultTagPrefix);Ri._defineProperty(Dt,"defaultTags",Ri.defaultTags);Eh.Schema=Dt});var Oh=x($i=>{"use strict";var ae=pt(),L=hn(),Sh=Mi(),yE={anchorPrefix:"a",customTags:null,indent:2,indentSeq:!0,keepCstNodes:!1,keepNodeTypes:!0,keepBlobsInJSON:!0,mapAsMap:!1,maxAliasCount:100,prettyErrors:!1,simpleKeys:!1,version:"1.2"},vE={get binary(){return L.binaryOptions},set binary(t){Object.assign(L.binaryOptions,t)},get bool(){return L.boolOptions},set bool(t){Object.assign(L.boolOptions,t)},get int(){return L.intOptions},set int(t){Object.assign(L.intOptions,t)},get null(){return L.nullOptions},set null(t){Object.assign(L.nullOptions,t)},get str(){return L.strOptions},set str(t){Object.assign(L.strOptions,t)}},kh={"1.0":{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:ae.defaultTagPrefix},{handle:"!!",prefix:"tag:private.yaml.org,2002:"}]},1.1:{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:ae.defaultTagPrefix}]},1.2:{schema:"core",merge:!1,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:ae.defaultTagPrefix}]}};function _h(t,e){if((t.version||t.options.version)==="1.0"){let i=e.match(/^tag:private\.yaml\.org,2002:([^:/]+)$/);if(i)return"!"+i[1];let s=e.match(/^tag:([a-zA-Z0-9-]+)\.yaml\.org,2002:(.*)/);return s?`!${s[1]}/${s[2]}`:`!${e.replace(/^tag:/,"")}`}let n=t.tagPrefixes.find(i=>e.indexOf(i.prefix)===0);if(!n){let i=t.getDefaults().tagPrefixes;n=i&&i.find(s=>e.indexOf(s.prefix)===0)}if(!n)return e[0]==="!"?e:`!<${e}>`;let r=e.substr(n.prefix.length).replace(/[!,[\]{}]/g,i=>({"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"})[i]);return n.handle+r}function wE(t,e){if(e instanceof L.Alias)return L.Alias;if(e.tag){let i=t.filter(s=>s.tag===e.tag);if(i.length>0)return i.find(s=>s.format===e.format)||i[0]}let n,r;if(e instanceof L.Scalar){r=e.value;let i=t.filter(s=>s.identify&&s.identify(r)||s.class&&r instanceof s.class);n=i.find(s=>s.format===e.format)||i.find(s=>!s.format)}else r=e,n=t.find(i=>i.nodeClass&&r instanceof i.nodeClass);if(!n){let i=r&&r.constructor?r.constructor.name:typeof r;throw new Error(`Tag not resolved for ${i} value`)}return n}function bE(t,e,{anchors:n,doc:r}){let i=[],s=r.anchors.getName(t);return s&&(n[s]=t,i.push(`&${s}`)),t.tag?i.push(_h(r,t.tag)):e.default||i.push(_h(r,e.tag)),i.join(" ")}function Di(t,e,n,r){let{anchors:i,schema:s}=e.doc,a;if(!(t instanceof L.Node)){let l={aliasNodes:[],onTagObj:u=>a=u,prevObjects:new Map};t=s.createNode(t,!0,null,l);for(let u of l.aliasNodes){u.source=u.source.node;let p=i.getName(u.source);p||(p=i.newName(),i.map[p]=u.source)}}if(t instanceof L.Pair)return t.toString(e,n,r);a||(a=wE(s.tags,t));let o=bE(t,a,e);o.length>0&&(e.indentAtStart=(e.indentAtStart||0)+o.length+1);let c=typeof a.stringify=="function"?a.stringify(t,e,n,r):t instanceof L.Scalar?L.stringifyString(t,e,n,r):t.toString(e,n,r);return o?t instanceof L.Scalar||c[0]==="{"||c[0]==="["?`${o} ${c}`:`${o}
${e.indent}${c}`:c}var er=class{static validAnchorNode(e){return e instanceof L.Scalar||e instanceof L.YAMLSeq||e instanceof L.YAMLMap}constructor(e){ae._defineProperty(this,"map",Object.create(null)),this.prefix=e}createAlias(e,n){return this.setAnchor(e,n),new L.Alias(e)}createMergePair(...e){let n=new L.Merge;return n.value.items=e.map(r=>{if(r instanceof L.Alias){if(r.source instanceof L.YAMLMap)return r}else if(r instanceof L.YAMLMap)return this.createAlias(r);throw new Error("Merge sources must be Map nodes or their Aliases")}),n}getName(e){let{map:n}=this;return Object.keys(n).find(r=>n[r]===e)}getNames(){return Object.keys(this.map)}getNode(e){return this.map[e]}newName(e){e||(e=this.prefix);let n=Object.keys(this.map);for(let r=1;;++r){let i=`${e}${r}`;if(!n.includes(i))return i}}resolveNodes(){let{map:e,_cstAliases:n}=this;Object.keys(e).forEach(r=>{e[r]=e[r].resolved}),n.forEach(r=>{r.source=r.source.resolved}),delete this._cstAliases}setAnchor(e,n){if(e!=null&&!er.validAnchorNode(e))throw new Error("Anchors may only be set for Scalar, Seq and Map nodes");if(n&&/[\x00-\x19\s,[\]{}]/.test(n))throw new Error("Anchor names must not contain whitespace or control characters");let{map:r}=this,i=e&&Object.keys(r).find(s=>r[s]===e);if(i)if(n)i!==n&&(delete r[i],r[n]=e);else return i;else{if(!n){if(!e)return null;n=this.newName()}r[n]=e}return n}},Fi=(t,e)=>{if(t&&typeof t=="object"){let{tag:n}=t;t instanceof L.Collection?(n&&(e[n]=!0),t.items.forEach(r=>Fi(r,e))):t instanceof L.Pair?(Fi(t.key,e),Fi(t.value,e)):t instanceof L.Scalar&&n&&(e[n]=!0)}return e},xE=t=>Object.keys(Fi(t,{}));function EE(t,e){let n={before:[],after:[]},r,i=!1;for(let s of e)if(s.valueRange){if(r!==void 0){let o="Document contains trailing content not separated by a ... or --- line";t.errors.push(new ae.YAMLSyntaxError(s,o));break}let a=L.resolveNode(t,s);i&&(a.spaceBefore=!0,i=!1),r=a}else s.comment!==null?(r===void 0?n.before:n.after).push(s.comment):s.type===ae.Type.BLANK_LINE&&(i=!0,r===void 0&&n.before.length>0&&!t.commentBefore&&(t.commentBefore=n.before.join(`
`),n.before=[]));if(t.contents=r||null,!r)t.comment=n.before.concat(n.after).join(`
`)||null;else{let s=n.before.join(`
`);if(s){let a=r instanceof L.Collection&&r.items[0]?r.items[0]:r;a.commentBefore=a.commentBefore?`${s}
${a.commentBefore}`:s}t.comment=n.after.join(`
`)||null}}function SE({tagPrefixes:t},e){let[n,r]=e.parameters;if(!n||!r){let i="Insufficient parameters given for %TAG directive";throw new ae.YAMLSemanticError(e,i)}if(t.some(i=>i.handle===n)){let i="The %TAG directive must only be given at most once per handle in the same document.";throw new ae.YAMLSemanticError(e,i)}return{handle:n,prefix:r}}function _E(t,e){let[n]=e.parameters;if(e.name==="YAML:1.0"&&(n="1.0"),!n){let r="Insufficient parameters given for %YAML directive";throw new ae.YAMLSemanticError(e,r)}if(!kh[n]){let i=`Document will be parsed as YAML ${t.version||t.options.version} rather than YAML ${n}`;t.warnings.push(new ae.YAMLWarning(e,i))}return n}function kE(t,e,n){let r=[],i=!1;for(let s of e){let{comment:a,name:o}=s;switch(o){case"TAG":try{t.tagPrefixes.push(SE(t,s))}catch(c){t.errors.push(c)}i=!0;break;case"YAML":case"YAML:1.0":if(t.version){let c="The %YAML directive must only be given at most once per document.";t.errors.push(new ae.YAMLSemanticError(s,c))}try{t.version=_E(t,s)}catch(c){t.errors.push(c)}i=!0;break;default:if(o){let c=`YAML only supports %TAG and %YAML directives, and not %${o}`;t.warnings.push(new ae.YAMLWarning(s,c))}}a&&r.push(a)}if(n&&!i&&(t.version||n.version||t.options.version)==="1.1"){let s=({handle:a,prefix:o})=>({handle:a,prefix:o});t.tagPrefixes=n.tagPrefixes.map(s),t.version=n.version}t.commentBefore=r.join(`
`)||null}function dn(t){if(t instanceof L.Collection)return!0;throw new Error("Expected a YAML collection as document contents")}var Ft=class{constructor(e){this.anchors=new er(e.anchorPrefix),this.commentBefore=null,this.comment=null,this.contents=null,this.directivesEndMarker=null,this.errors=[],this.options=e,this.schema=null,this.tagPrefixes=[],this.version=null,this.warnings=[]}add(e){return dn(this.contents),this.contents.add(e)}addIn(e,n){dn(this.contents),this.contents.addIn(e,n)}delete(e){return dn(this.contents),this.contents.delete(e)}deleteIn(e){return L.isEmptyPath(e)?this.contents==null?!1:(this.contents=null,!0):(dn(this.contents),this.contents.deleteIn(e))}getDefaults(){return Ft.defaults[this.version]||Ft.defaults[this.options.version]||{}}get(e,n){return this.contents instanceof L.Collection?this.contents.get(e,n):void 0}getIn(e,n){return L.isEmptyPath(e)?!n&&this.contents instanceof L.Scalar?this.contents.value:this.contents:this.contents instanceof L.Collection?this.contents.getIn(e,n):void 0}has(e){return this.contents instanceof L.Collection?this.contents.has(e):!1}hasIn(e){return L.isEmptyPath(e)?this.contents!==void 0:this.contents instanceof L.Collection?this.contents.hasIn(e):!1}set(e,n){dn(this.contents),this.contents.set(e,n)}setIn(e,n){L.isEmptyPath(e)?this.contents=n:(dn(this.contents),this.contents.setIn(e,n))}setSchema(e,n){if(!e&&!n&&this.schema)return;typeof e=="number"&&(e=e.toFixed(1)),e==="1.0"||e==="1.1"||e==="1.2"?(this.version?this.version=e:this.options.version=e,delete this.options.schema):e&&typeof e=="string"&&(this.options.schema=e),Array.isArray(n)&&(this.options.customTags=n);let r=Object.assign({},this.getDefaults(),this.options);this.schema=new Sh.Schema(r)}parse(e,n){this.options.keepCstNodes&&(this.cstNode=e),this.options.keepNodeTypes&&(this.type="DOCUMENT");let{directives:r=[],contents:i=[],directivesEndMarker:s,error:a,valueRange:o}=e;if(a&&(a.source||(a.source=this),this.errors.push(a)),kE(this,r,n),s&&(this.directivesEndMarker=!0),this.range=o?[o.start,o.end]:null,this.setSchema(),this.anchors._cstAliases=[],EE(this,i),this.anchors.resolveNodes(),this.options.prettyErrors){for(let c of this.errors)c instanceof ae.YAMLError&&c.makePretty();for(let c of this.warnings)c instanceof ae.YAMLError&&c.makePretty()}return this}listNonDefaultTags(){return xE(this.contents).filter(e=>e.indexOf(Sh.Schema.defaultPrefix)!==0)}setTagPrefix(e,n){if(e[0]!=="!"||e[e.length-1]!=="!")throw new Error("Handle must start and end with !");if(n){let r=this.tagPrefixes.find(i=>i.handle===e);r?r.prefix=n:this.tagPrefixes.push({handle:e,prefix:n})}else this.tagPrefixes=this.tagPrefixes.filter(r=>r.handle!==e)}toJSON(e,n){let{keepBlobsInJSON:r,mapAsMap:i,maxAliasCount:s}=this.options,a=r&&(typeof e!="string"||!(this.contents instanceof L.Scalar)),o={doc:this,indentStep:"  ",keep:a,mapAsMap:a&&!!i,maxAliasCount:s,stringify:Di},c=Object.keys(this.anchors.map);c.length>0&&(o.anchors=new Map(c.map(u=>[this.anchors.map[u],{alias:[],aliasCount:0,count:1}])));let l=L.toJSON(this.contents,e,o);if(typeof n=="function"&&o.anchors)for(let{count:u,res:p}of o.anchors.values())n(p,u);return l}toString(){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");let e=this.options.indent;if(!Number.isInteger(e)||e<=0){let c=JSON.stringify(e);throw new Error(`"indent" option must be a positive integer, not ${c}`)}this.setSchema();let n=[],r=!1;if(this.version){let c="%YAML 1.2";this.schema.name==="yaml-1.1"&&(this.version==="1.0"?c="%YAML:1.0":this.version==="1.1"&&(c="%YAML 1.1")),n.push(c),r=!0}let i=this.listNonDefaultTags();this.tagPrefixes.forEach(({handle:c,prefix:l})=>{i.some(u=>u.indexOf(l)===0)&&(n.push(`%TAG ${c} ${l}`),r=!0)}),(r||this.directivesEndMarker)&&n.push("---"),this.commentBefore&&((r||!this.directivesEndMarker)&&n.unshift(""),n.unshift(this.commentBefore.replace(/^/gm,"#")));let s={anchors:Object.create(null),doc:this,indent:"",indentStep:" ".repeat(e),stringify:Di},a=!1,o=null;if(this.contents){this.contents instanceof L.Node&&(this.contents.spaceBefore&&(r||this.directivesEndMarker)&&n.push(""),this.contents.commentBefore&&n.push(this.contents.commentBefore.replace(/^/gm,"#")),s.forceBlockIndent=!!this.comment,o=this.contents.comment);let c=o?null:()=>a=!0,l=Di(this.contents,s,()=>o=null,c);n.push(L.addComment(l,"",o))}else this.contents!==void 0&&n.push(Di(this.contents,s));return this.comment&&((!a||o)&&n[n.length-1]!==""&&n.push(""),n.push(this.comment.replace(/^/gm,"#"))),n.join(`
`)+`
`}};ae._defineProperty(Ft,"defaults",kh);$i.Document=Ft;$i.defaultOptions=yE;$i.scalarOptions=vE});var Ih=x(Th=>{"use strict";var Oo=Wf(),$t=Oh(),OE=Mi(),AE=pt(),TE=Ii();hn();function IE(t,e=!0,n){n===void 0&&typeof e=="string"&&(n=e,e=!0);let r=Object.assign({},$t.Document.defaults[$t.defaultOptions.version],$t.defaultOptions);return new OE.Schema(r).createNode(t,e,n)}var mn=class extends $t.Document{constructor(e){super(Object.assign({},$t.defaultOptions,e))}};function NE(t,e){let n=[],r;for(let i of Oo.parse(t)){let s=new mn(e);s.parse(i,r),n.push(s),r=s}return n}function Ah(t,e){let n=Oo.parse(t),r=new mn(e).parse(n[0]);if(n.length>1){let i="Source contains multiple documents; please use YAML.parseAllDocuments()";r.errors.unshift(new AE.YAMLSemanticError(n[1],i))}return r}function LE(t,e){let n=Ah(t,e);if(n.warnings.forEach(r=>TE.warn(r)),n.errors.length>0)throw n.errors[0];return n.toJSON()}function RE(t,e){let n=new mn(e);return n.contents=t,String(n)}var PE={createNode:IE,defaultOptions:$t.defaultOptions,Document:mn,parse:LE,parseAllDocuments:NE,parseCST:Oo.parse,parseDocument:Ah,scalarOptions:$t.scalarOptions,stringify:RE};Th.YAML=PE});var Lh=x(($k,Nh)=>{Nh.exports=Ih().YAML});var Rh=x(oe=>{"use strict";var ye=hn(),CE=Mi();pt();Ii();oe.Alias=ye.Alias;oe.Collection=ye.Collection;oe.Merge=ye.Merge;oe.Node=ye.Node;oe.Pair=ye.Pair;oe.Scalar=ye.Scalar;oe.YAMLMap=ye.YAMLMap;oe.YAMLSeq=ye.YAMLSeq;oe.binaryOptions=ye.binaryOptions;oe.boolOptions=ye.boolOptions;oe.intOptions=ye.intOptions;oe.nullOptions=ye.nullOptions;oe.strOptions=ye.strOptions;oe.Schema=CE.Schema});var Ph=x(ce=>{var pe=Rh();ce.binaryOptions=pe.binaryOptions;ce.boolOptions=pe.boolOptions;ce.intOptions=pe.intOptions;ce.nullOptions=pe.nullOptions;ce.strOptions=pe.strOptions;ce.Schema=pe.Schema;ce.Alias=pe.Alias;ce.Collection=pe.Collection;ce.Merge=pe.Merge;ce.Node=pe.Node;ce.Pair=pe.Pair;ce.Scalar=pe.Scalar;ce.YAMLMap=pe.YAMLMap;ce.YAMLSeq=pe.YAMLSeq});var Dh=x(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.deserialize=gn.serialize=void 0;var Ch=Lh(),Ao=Ph();function ME(t){let e=Ao.strOptions.fold.lineWidth;try{return Ao.strOptions.fold.lineWidth=0,Ch.stringify(t,{schema:"yaml-1.1"})}finally{Ao.strOptions.fold.lineWidth=e}}gn.serialize=ME;function DE(t){return Mh(t)}gn.deserialize=DE;function To(t,e){return{identify(n){return typeof n=="string"},tag:`!${t}`,resolve:(n,r)=>{let i={};return i[e?`Fn::${t}`:t]=Mh(r.toString().substring(t.length+1)),i}}}var FE=["Base64","Cidr","FindInMap","GetAZs","ImportValue","Join","Sub","Select","Split","Transform","And","Equals","If","Not","Or","GetAtt"].map(t=>To(t,!0)).concat(To("Ref",!1),To("Condition",!1));function Mh(t){return Ch.parse(t,{customTags:FE,schema:"core"})}});var Io=x(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.loadStructuredFile=Pe.serializeStructure=Pe.deserializeStructure=Pe.toYAML=void 0;var $E=lc(),Fh=Dh();function $h(t){return Fh.serialize(t)}Pe.toYAML=$h;function jh(t){return Fh.deserialize(t)}Pe.deserializeStructure=jh;function jE(t,e){return e?JSON.stringify(t,void 0,2):$h(t)}Pe.serializeStructure=jE;async function qE(t){let e=await $E.readFile(t,{encoding:"utf-8"});return jh(e)}Pe.loadStructuredFile=qE});var qh=x(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.AssetManifestBuilder=void 0;var BE=ur(),UE=mi(),No=class{constructor(){this.manifest={version:BE.Manifest.version(),files:{},dockerImages:{}}}addFileAsset(e,n,r){this.manifest.files[e]={source:n,destinations:{current:r}}}addDockerImageAsset(e,n,r){this.manifest.dockerImages[e]={source:n,destinations:{current:r}}}toManifest(e){return new UE.AssetManifest(e,this.manifest)}};ji.AssetManifestBuilder=No});var Bh=x(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.contentHash=void 0;var zE=T("crypto");function YE(t){return zE.createHash("sha256").update(t).digest("hex")}qi.contentHash=YE});var nr=x(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.EvaluateCloudFormationTemplate=vt.CfnEvaluationException=vt.LazyListStackResources=void 0;var Ro=class{constructor(e,n){this.sdk=e,this.stackName=n}async listStackResources(){return this.stackResources===void 0&&(this.stackResources=this.getStackResources(void 0)),this.stackResources}async getStackResources(e){let n=new Array;return this.sdk.cloudFormation().listStackResources({StackName:this.stackName,NextToken:e}).promise().then(async r=>(n.push(...r.StackResourceSummaries??[]),r.NextToken&&n.push(...await this.getStackResources(r.NextToken)),n))}};vt.LazyListStackResources=Ro;var ze=class extends Error{};vt.CfnEvaluationException=ze;var tr=class{constructor(e){this.stackResources=e.listStackResources,this.template=e.template,this.context={"AWS::AccountId":e.account,"AWS::Region":e.region,"AWS::Partition":e.partition,...e.parameters},this.account=e.account,this.region=e.region,this.partition=e.partition,this.urlSuffix=e.urlSuffix}createNestedEvaluateCloudFormationTemplate(e,n,r){return new tr({template:n,parameters:r,account:this.account,region:this.region,partition:this.partition,urlSuffix:this.urlSuffix,listStackResources:e})}async establishResourcePhysicalName(e,n){if(n!=null)try{return await this.evaluateCfnExpression(n)}catch(r){if(!(r instanceof ze))throw r}return this.findPhysicalNameFor(e)}async findPhysicalNameFor(e){var r;return(r=(await this.stackResources.listStackResources()).find(i=>i.LogicalResourceId===e))==null?void 0:r.PhysicalResourceId}async findLogicalIdForPhysicalName(e){var r;return(r=(await this.stackResources.listStackResources()).find(i=>i.PhysicalResourceId===e))==null?void 0:r.LogicalResourceId}findReferencesTo(e){var r;let n=new Array;for(let[i,s]of Object.entries(((r=this.template)==null?void 0:r.Resources)??{}))e!==i&&this.references(e,s)&&n.push({...s,LogicalId:i});return n}async evaluateCfnExpression(e){let n=this;class r{evaluateIntrinsic(s){let a=this[s.name];if(!a)throw new ze(`CloudFormation function ${s.name} is not supported`);let o=Array.isArray(s.args)?s.args:[s.args];return a.apply(this,o)}async"Fn::Join"(s,a){return(await n.evaluateCfnExpression(a)).join(s)}async"Fn::Split"(s,a){return(await n.evaluateCfnExpression(a)).split(s)}async"Fn::Select"(s,a){return(await n.evaluateCfnExpression(a))[s]}async Ref(s){let a=await n.findRefTarget(s);if(a)return a;throw new ze(`Parameter or resource '${s}' could not be found for evaluation`)}async"Fn::GetAtt"(s,a){let o=await n.findGetAttTarget(s,a);if(o)return o;throw new ze(`Attribute '${a}' of resource '${s}' could not be found for evaluation`)}async"Fn::Sub"(s,a){let o=a?await n.evaluateCfnExpression(a):{};return QE(s,/\${([^}]*)}/g,c=>{if(c in o)return o[c];{let l=c.split(".");return l.length===1?this.Ref(c):this["Fn::GetAtt"](l[0],l.slice(1).join("."))}})}}if(e==null)return e;if(Array.isArray(e))return Promise.all(e.map(i=>this.evaluateCfnExpression(i)));if(typeof e=="object"){let i=this.parseIntrinsic(e);if(i)return new r().evaluateIntrinsic(i);{let s={};for(let[a,o]of Object.entries(e))s[a]=await this.evaluateCfnExpression(o);return s}}return e}references(e,n){return typeof n=="string"?e===n:n==null?!1:Array.isArray(n)?n.some(r=>this.references(e,r)):typeof n=="object"?Object.values(n).some(r=>this.references(e,r)):!1}parseIntrinsic(e){let n=Object.keys(e);if(n.length===1&&(n[0].startsWith("Fn::")||n[0]==="Ref"))return{name:n[0],args:e[n[0]]}}async findRefTarget(e){if(e==="AWS::URLSuffix")return this.cachedUrlSuffix||(this.cachedUrlSuffix=this.urlSuffix(this.region)),this.cachedUrlSuffix;let n=this.context[e];return n||this.findGetAttTarget(e)}async findGetAttTarget(e,n){let i=(await this.stackResources.listStackResources()).find(s=>s.LogicalResourceId===e);if(i)return this.formatResourceAttribute(i,n)}formatResourceAttribute(e,n){let r=e.PhysicalResourceId;if(!n)return r;let i=GE[e.ResourceType];if(!i)throw new ze(`We don't support attributes of the '${e.ResourceType}' resource. This is a CDK limitation. Please report it at https://github.com/aws/aws-cdk/issues/new/choose`);let s=i[n];if(!s)throw new ze(`We don't support the '${n}' attribute of the '${e.ResourceType}' resource. This is a CDK limitation. Please report it at https://github.com/aws/aws-cdk/issues/new/choose`);let a=this.getServiceOfResource(e),o=this.getResourceTypeArnPartOfResource(e);return s({partition:this.partition,service:a,region:this.region,account:this.account,resourceType:o,resourceName:r})}getServiceOfResource(e){return e.ResourceType.split("::")[1].toLowerCase()}getResourceTypeArnPartOfResource(e){var i;let n=e.ResourceType,r=(i=VE[n])==null?void 0:i.resourceType;return r||n.split("::")[2].toLowerCase()}};vt.EvaluateCloudFormationTemplate=tr;var VE={"AWS::Events::EventBus":{resourceType:"event-bus"}},GE={"AWS::IAM::Role":{Arn:Lo},"AWS::IAM::User":{Arn:Lo},"AWS::IAM::Group":{Arn:Lo},"AWS::S3::Bucket":{Arn:HE},"AWS::Lambda::Function":{Arn:WE},"AWS::Events::EventBus":{Arn:Uh,Name:t=>t.resourceName},"AWS::DynamoDB::Table":{Arn:Uh},"AWS::AppSync::GraphQLApi":{ApiId:KE}};function Lo(t){return`arn:${t.partition}:${t.service}::${t.account}:${t.resourceType}/${t.resourceName}`}function HE(t){return`arn:${t.partition}:${t.service}:::${t.resourceName}`}function WE(t){return`arn:${t.partition}:${t.service}:${t.region}:${t.account}:${t.resourceType}:${t.resourceName}`}function Uh(t){return`arn:${t.partition}:${t.service}:${t.region}:${t.account}:${t.resourceType}/${t.resourceName}`}function KE(t){return t.resourceName.split("/")[1]}async function QE(t,e,n){if(!e.global)throw new Error("Regex must be created with /g flag");let r=new Array,i=0;for(;;){let s=e.exec(t);if(!s)break;r.push(t.substring(i,s.index)),r.push(await n(s[1])),i=e.lastIndex}return r.push(t.slice(i)),r.join("")}});var zh=x(Ye=>{"use strict";var ZE=Ye&&Ye.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Po=Ye&&Ye.__exportStar||function(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&ZE(e,t,n)};Object.defineProperty(Ye,"__esModule",{value:!0});Po(Id(),Ye);Po(Nd(),Ye);Po(rs(),Ye)});var wt=x(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.lowerCaseFirstCharacter=ve.transformObjectKeys=ve.HotswappableChangeCandidate=ve.ChangeHotswapImpact=ve.ICON=void 0;ve.ICON="\u2728";var JE;(function(t){t.REQUIRES_FULL_DEPLOYMENT="requires-full-deployment",t.IRRELEVANT="irrelevant"})(JE=ve.ChangeHotswapImpact||(ve.ChangeHotswapImpact={}));var Co=class{constructor(e,n){this.newValue=e,this.propertyUpdates=n}};ve.HotswappableChangeCandidate=Co;function Mo(t,e,n={}){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(i=>Mo(i,e,n));let r={};for(let[i,s]of Object.entries(t)){let a=n[i];a===!0?r[e(i)]=s:r[e(i)]=Mo(s,e,a)}return r}ve.transformObjectKeys=Mo;function XE(t){return t.length>0?`${t[0].toLowerCase()}${t.slice(1)}`:t}ve.lowerCaseFirstCharacter=XE});var Yh=x(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});Bi.isHotswappableAppSyncChange=void 0;var yn=wt();async function eS(t,e,n){let r=e.newValue.Type==="AWS::AppSync::Resolver",i=e.newValue.Type==="AWS::AppSync::FunctionConfiguration";if(!r&&!i)return yn.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT;for(let l in e.propertyUpdates)if(l!=="RequestMappingTemplate"&&l!=="ResponseMappingTemplate")return yn.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT;let s=e.newValue.Properties;if(r&&(s==null?void 0:s.Kind)==="PIPELINE")return yn.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT;let a=await n.establishResourcePhysicalName(t,i?s==null?void 0:s.Name:void 0);if(!a)return yn.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT;let o=await n.evaluateCfnExpression(s),c=yn.transformObjectKeys(o,yn.lowerCaseFirstCharacter);if(r){let l=a.split("/"),u=`${l[3]}.${l[5]}`;return new Do(u,c)}else return new Fo(a,c)}Bi.isHotswappableAppSyncChange=eS;var Do=class{constructor(e,n){this.updateResolverRequest=n,this.service="appsync",this.resourceNames=[`AppSync resolver '${e}'`]}async apply(e){return e.appsync().updateResolver(this.updateResolverRequest).promise()}},Fo=class{constructor(e,n){this.functionName=e,this.updateFunctionRequest=n,this.service="appsync",this.resourceNames=[`AppSync function '${e}'`]}async apply(e){let{functions:n}=await e.appsync().listFunctions({apiId:this.updateFunctionRequest.apiId}).promise(),{functionId:r}=(n==null?void 0:n.find(s=>s.name===this.functionName))??{},i={...this.updateFunctionRequest,functionId:r};return e.appsync().updateFunction(i).promise()}}});var Vh=x(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.isHotswappableCodeBuildProjectChange=void 0;var jt=wt();async function tS(t,e,n){var s;if(e.newValue.Type!=="AWS::CodeBuild::Project")return jt.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT;let r={name:""};for(let a in e.propertyUpdates){let o=e.propertyUpdates[a];switch(a){case"Source":r.source=jt.transformObjectKeys(await n.evaluateCfnExpression(o.newValue),nS);break;case"Environment":r.environment=await jt.transformObjectKeys(await n.evaluateCfnExpression(o.newValue),jt.lowerCaseFirstCharacter);break;case"SourceVersion":r.sourceVersion=await n.evaluateCfnExpression(o.newValue);break;default:return jt.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT}}let i=await n.establishResourcePhysicalName(t,(s=e.newValue.Properties)==null?void 0:s.Name);return i?(r.name=i,new $o(r)):jt.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT}Ui.isHotswappableCodeBuildProjectChange=tS;var $o=class{constructor(e){this.updateProjectInput=e,this.service="codebuild",this.resourceNames=[`CodeBuild project '${e.name}'`]}async apply(e){return e.codeBuild().updateProject(this.updateProjectInput).promise()}};function nS(t){return t.toLowerCase()==="buildspec"?t.toLowerCase():jt.lowerCaseFirstCharacter(t)}});var Gh=x(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.isHotswappableEcsServiceChange=void 0;var rS=ts(),qt=wt();async function iS(t,e,n){if(e.newValue.Type!=="AWS::ECS::TaskDefinition")return qt.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT;for(let p in e.propertyUpdates)if(p!=="ContainerDefinitions"||e.propertyUpdates[p].newValue===void 0)return qt.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT;let r=n.findReferencesTo(t),i=r.filter(p=>p.Type==="AWS::ECS::Service"),s=new Array;for(let p of i){let f=await n.findPhysicalNameFor(p.LogicalId);f&&s.push({serviceArn:f})}if(s.length===0||r.length>s.length)return qt.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT;let a=e.newValue.Properties,o=await n.establishResourcePhysicalName(t,a==null?void 0:a.Family);if(!o)return qt.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT;let c=o.split(":"),l=c.length>1?c[5].split("/")[1]:o,u={...await n.evaluateCfnExpression({...a??{},Family:void 0}),Family:l};return new jo(u,s)}zi.isHotswappableEcsServiceChange=iS;var jo=class{constructor(e,n){this.taskDefinitionResource=e,this.servicesReferencingTaskDef=n,this.service="ecs-service",this.resourceNames=[],this.resourceNames=n.map(r=>`ECS Service '${r.serviceArn.split("/")[2]}'`)}async apply(e){var o;let n=qt.transformObjectKeys(this.taskDefinitionResource,qt.lowerCaseFirstCharacter,{ContainerDefinitions:{DockerLabels:!0,FirelensConfiguration:{Options:!0},LogConfiguration:{Options:!0}},Volumes:{DockerVolumeConfiguration:{DriverOpts:!0,Labels:!0}}}),i=(o=(await e.ecs().registerTaskDefinition(n).promise()).taskDefinition)==null?void 0:o.taskDefinitionArn,s={};for(let c of this.servicesReferencingTaskDef){let l=c.serviceArn.split("/")[1],u=s[l],p;u?p=u:(p=[],s[l]=p),p.push({promise:e.ecs().updateService({service:c.serviceArn,taskDefinition:i,cluster:l,forceNewDeployment:!0,deploymentConfiguration:{minimumHealthyPercent:0}}).promise(),ecsService:c})}await Promise.all(Object.values(s).map(c=>Promise.all(c.map(l=>l.promise)))),e.ecs().api.waiters.deploymentToFinish={name:"DeploymentToFinish",operation:"describeServices",delay:10,maxAttempts:60,acceptors:[{matcher:"pathAny",argument:"failures[].reason",expected:"MISSING",state:"failure"},{matcher:"pathAny",argument:"services[].status",expected:"DRAINING",state:"failure"},{matcher:"pathAny",argument:"services[].status",expected:"INACTIVE",state:"failure"},{matcher:"path",argument:"length(services[].deployments[? status == 'PRIMARY' && runningCount < desiredCount][]) == `0`",expected:!0,state:"success"}]};let a=new rS.ResourceWaiter(e.ecs(),"deploymentToFinish");return Promise.all(Object.entries(s).map(([c,l])=>a.wait({cluster:c,services:l.map(u=>u.ecsService.serviceArn)}).promise()))}}});var Hh=x(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.isHotswappableLambdaFunctionChange=void 0;var sS=T("stream"),aS=ts(),oS=$d(),cS=nr(),Ve=wt(),lS=Va();async function uS(t,e,n){var l;if(e.newValue.Type==="AWS::Lambda::Version")return Ve.ChangeHotswapImpact.IRRELEVANT;if(e.newValue.Type==="AWS::Lambda::Alias")return pS(e);let r=await fS(e,n);if(typeof r=="string")return r;let i=await n.establishResourcePhysicalName(t,(l=e.newValue.Properties)==null?void 0:l.FunctionName);if(!i)return Ve.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT;let s=await n.evaluateCfnExpression({"Fn::Sub":"arn:${AWS::Partition}:lambda:${AWS::Region}:${AWS::AccountId}:function:"+i}),a=n.findReferencesTo(t).filter(u=>u.Type==="AWS::Lambda::Version"),o=oS.flatMap(a,u=>n.findReferencesTo(u.LogicalId)),c=await Promise.all(o.map(u=>{var p;return n.evaluateCfnExpression((p=u.Properties)==null?void 0:p.Name)}));return new qo({physicalName:i,functionArn:s,resource:r,publishVersion:a.length>0,aliasesNames:c})}Yi.isHotswappableLambdaFunctionChange=uS;function pS(t){for(let e in t.propertyUpdates)if(e!=="FunctionVersion")return Ve.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT;return Ve.ChangeHotswapImpact.IRRELEVANT}async function fS(t,e){var l;if(t.newValue.Type!=="AWS::Lambda::Function")return Ve.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT;let r=t.propertyUpdates,i,s,a,o;for(let u in r){let p=r[u];switch(u){case"Code":let f=!1,h,m,b,k;for(let y in p.newValue)switch(y){case"S3Bucket":f=!0,h=await e.evaluateCfnExpression(p.newValue[y]);break;case"S3Key":f=!0,m=await e.evaluateCfnExpression(p.newValue[y]);break;case"ImageUri":f=!0,b=await e.evaluateCfnExpression(p.newValue[y]);break;case"ZipFile":f=!0;let v=await e.evaluateCfnExpression(p.newValue[y]),w=await e.evaluateCfnExpression((l=t.newValue.Properties)==null?void 0:l.Runtime);if(!w)return Ve.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT;let A=dS(w);k=await hS(`index.${A}`,v);break;default:return Ve.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT}f&&(i={s3Bucket:h,s3Key:m,imageUri:b,functionCodeZip:k});break;case"Tags":let S={};if(p!=null&&p.isDifferent){let y=p.newValue.map(async v=>{S[v.Key]=await e.evaluateCfnExpression(v.Value)});await Promise.all(y),p.oldValue.forEach(v=>{S[v.Key]===void 0&&(S[v.Key]=rr.DELETE)}),s={tagUpdates:S}}break;case"Description":a=await e.evaluateCfnExpression(p.newValue);break;case"Environment":o=await e.evaluateCfnExpression(p.newValue);break;default:return Ve.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT}}let c=a||o?{description:a,environment:o}:void 0;return i||s||c?{code:i,tags:s,configurations:c}:Ve.ChangeHotswapImpact.IRRELEVANT}var rr;(function(t){t[t.DELETE=-1]="DELETE"})(rr||(rr={}));var qo=class{constructor(e){this.lambdaFunctionResource=e,this.service="lambda-function",this.resourceNames=[`Lambda Function '${e.physicalName}'`,...e.publishVersion?[`Lambda Version for Function '${e.physicalName}'`]:[],...e.aliasesNames.map(n=>`Lambda Alias '${n}' for Function '${e.physicalName}'`)]}async apply(e){let n=e.lambda(),r=this.lambdaFunctionResource.resource,i=[];if(r.code!==void 0||r.configurations!==void 0){if(r.code!==void 0){let s=await n.updateFunctionCode({FunctionName:this.lambdaFunctionResource.physicalName,S3Bucket:r.code.s3Bucket,S3Key:r.code.s3Key,ImageUri:r.code.imageUri,ZipFile:r.code.functionCodeZip}).promise();await this.waitForLambdasPropertiesUpdateToFinish(s,n)}if(r.configurations!==void 0){let s={FunctionName:this.lambdaFunctionResource.physicalName};r.configurations.description!==void 0&&(s.Description=r.configurations.description),r.configurations.environment!==void 0&&(s.Environment=r.configurations.environment);let a=await n.updateFunctionConfiguration(s).promise();await this.waitForLambdasPropertiesUpdateToFinish(a,n)}if(this.lambdaFunctionResource.publishVersion){let s=n.publishVersion({FunctionName:this.lambdaFunctionResource.physicalName}).promise();if(this.lambdaFunctionResource.aliasesNames.length>0){let a=await s;for(let o of this.lambdaFunctionResource.aliasesNames)i.push(n.updateAlias({FunctionName:this.lambdaFunctionResource.physicalName,Name:o,FunctionVersion:a.Version}).promise())}else i.push(s)}}if(r.tags!==void 0){let s=Object.entries(r.tags.tagUpdates).filter(([o,c])=>c===rr.DELETE).map(([o,c])=>o),a={};Object.entries(r.tags.tagUpdates).filter(([o,c])=>c!==rr.DELETE).forEach(([o,c])=>{a[o]=c}),s.length>0&&i.push(n.untagResource({Resource:this.lambdaFunctionResource.functionArn,TagKeys:s}).promise()),Object.keys(a).length>0&&i.push(n.tagResource({Resource:this.lambdaFunctionResource.functionArn,Tags:a}).promise())}return Promise.all(i)}async waitForLambdasPropertiesUpdateToFinish(e,n){var a;let i=((a=e.VpcConfig)==null?void 0:a.VpcId)||e.PackageType==="Image"?5:1;n.api.waiters.updateFunctionPropertiesToFinish={name:"UpdateFunctionPropertiesToFinish",operation:"getFunction",maxAttempts:60,delay:i,acceptors:[{matcher:"path",argument:"Configuration.LastUpdateStatus == 'Successful' && Configuration.State == 'Active'",expected:!0,state:"success"},{matcher:"path",argument:"Configuration.LastUpdateStatus",expected:"Failed",state:"failure"}]},await new aS.ResourceWaiter(n,"updateFunctionPropertiesToFinish").wait({FunctionName:this.lambdaFunctionResource.physicalName}).promise()}};function hS(t,e){return new Promise((n,r)=>{let i=[],s=new sS.Writable;s._write=(o,c,l)=>{i.push(o),process.nextTick(l)},s.on("finish",()=>{n(Buffer.concat(i))});let a=lS("zip");a.on("error",o=>{r(o)}),a.pipe(s),a.append(e,{name:t,date:new Date("1980-01-01T00:00:00.000Z")}),a.finalize()})}function dS(t){if(t.startsWith("node"))return"js";if(t.startsWith("python"))return"py";throw new cS.CfnEvaluationException(`runtime ${t} is unsupported, only node.js and python runtimes are currently supported.`)}});var Wh=x(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.isHotswappableS3BucketDeploymentChange=ke.REQUIRED_BY_CFN=void 0;var bt=wt();ke.REQUIRED_BY_CFN="required-to-be-present-by-cfn";async function mS(t,e,n){var s;if(e.newValue.Type==="AWS::IAM::Policy")return gS(t,e,n);if(e.newValue.Type!=="Custom::CDKBucketDeployment")return bt.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT;let r=await n.evaluateCfnExpression((s=e.newValue.Properties)==null?void 0:s.ServiceToken);if(!r)return bt.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT;let i=await n.evaluateCfnExpression({...e.newValue.Properties,ServiceToken:void 0});return new Bo(r,i)}ke.isHotswappableS3BucketDeploymentChange=mS;var Bo=class{constructor(e,n){this.functionName=e,this.customResourceProperties=n,this.service="custom-s3-deployment",this.resourceNames=[`Contents of S3 Bucket '${this.customResourceProperties.DestinationBucketName}'`]}async apply(e){return e.lambda().invoke({FunctionName:this.functionName,Payload:JSON.stringify({RequestType:"Update",ResponseURL:ke.REQUIRED_BY_CFN,PhysicalResourceId:ke.REQUIRED_BY_CFN,StackId:ke.REQUIRED_BY_CFN,RequestId:ke.REQUIRED_BY_CFN,LogicalResourceId:ke.REQUIRED_BY_CFN,ResourceProperties:Uo(this.customResourceProperties)})}).promise()}};async function gS(t,e,n){var i;let r=(i=e.newValue.Properties)==null?void 0:i.Roles;if(!r)return bt.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT;for(let s of r){let a=await n.findLogicalIdForPhysicalName(await n.evaluateCfnExpression(s));if(!a)return bt.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT;let o=n.findReferencesTo(a);for(let c of o)if(c.Type==="AWS::Lambda::Function"){let l=n.findReferencesTo(c.LogicalId);for(let u of l)if(u.Type!=="Custom::CDKBucketDeployment")return bt.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT}else if(c.Type==="AWS::IAM::Policy"){if(c.LogicalId!==t)return bt.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT}else return bt.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT}return bt.ChangeHotswapImpact.IRRELEVANT}function Uo(t){if(t==null)return t;if(Array.isArray(t))return t.map(Uo);if(typeof t!="object")return t.toString();let e={};for(let[n,r]of Object.entries(t))e[n]=Uo(r);return e}});var Kh=x(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.isHotswappableStateMachineChange=void 0;var vn=wt();async function yS(t,e,n){var a,o;let r=await vS(e,n);if(r===vn.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT||r===vn.ChangeHotswapImpact.IRRELEVANT)return r;let i=(o=(a=e.newValue)==null?void 0:a.Properties)==null?void 0:o.StateMachineName,s=i?await n.evaluateCfnExpression({"Fn::Sub":"arn:${AWS::Partition}:states:${AWS::Region}:${AWS::AccountId}:stateMachine:"+i}):await n.findPhysicalNameFor(t);return s?new zo({definition:r,stateMachineArn:s}):vn.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT}Vi.isHotswappableStateMachineChange=yS;async function vS(t,e){if(t.newValue.Type!=="AWS::StepFunctions::StateMachine")return vn.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT;let r=t.propertyUpdates;if(Object.keys(r).length===0)return vn.ChangeHotswapImpact.IRRELEVANT;for(let i in r)if(i!=="DefinitionString")return vn.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT;return e.evaluateCfnExpression(r.DefinitionString.newValue)}var zo=class{constructor(e){this.stepFunctionResource=e,this.service="stepfunctions-state-machine",this.resourceNames=[`StateMachine '${this.stepFunctionResource.stateMachineArn.split(":")[6]}'`]}async apply(e){return e.stepFunctions().updateStateMachine({stateMachineArn:this.stepFunctionResource.stateMachineArn,definition:this.stepFunctionResource.definition}).promise()}}});var Qh=x(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});Gi.StackStatus=void 0;var ir=class{constructor(e,n){this.name=e,this.reason=n}static fromStackDescription(e){return new ir(e.StackStatus,e.StackStatusReason)}get isCreationFailure(){return this.name==="ROLLBACK_COMPLETE"||this.name==="ROLLBACK_FAILED"}get isDeleted(){return this.name.startsWith("DELETE_")}get isFailure(){return this.name.endsWith("FAILED")}get isInProgress(){return this.name.endsWith("_IN_PROGRESS")&&!this.isReviewInProgress}get isReviewInProgress(){return this.name==="REVIEW_IN_PROGRESS"}get isNotFound(){return this.name==="NOT_FOUND"}get isDeploySuccess(){return!this.isNotFound&&(this.name==="CREATE_COMPLETE"||this.name==="UPDATE_COMPLETE"||this.name==="IMPORT_COMPLETE")}toString(){return this.name+(this.reason?` (${this.reason})`:"")}};Gi.StackStatus=ir});var or=x(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.ParameterValues=X.TemplateParameters=X.stabilizeStack=X.waitForStackDeploy=X.waitForStackDelete=X.changeSetHasNoChanges=X.waitForChangeSet=X.CloudFormationStack=void 0;var wS=Ut(),wn=Et(),bS=Io(),Zh=Qh(),Ge=class{constructor(e,n,r,i=!1){this.cfn=e,this.stackName=n,this.stack=r,this.retrieveProcessedTemplate=i}static async lookup(e,n,r=!1){try{let i=await e.describeStacks({StackName:n}).promise();return new Ge(e,n,i.Stacks&&i.Stacks[0],r)}catch(i){if(i.code==="ValidationError"&&i.message===`Stack with id ${n} does not exist`)return new Ge(e,n,void 0);throw i}}static doesNotExist(e,n){return new Ge(e,n)}static fromStaticInformation(e,n,r){return new Ge(e,n,r)}async template(){if(!this.exists)return{};if(this._template===void 0){let e=await this.cfn.getTemplate({StackName:this.stackName,TemplateStage:this.retrieveProcessedTemplate?"Processed":"Original"}).promise();this._template=e.TemplateBody&&bS.deserializeStructure(e.TemplateBody)||{}}return this._template}get exists(){return this.stack!==void 0}get stackId(){return this.assertExists(),this.stack.StackId}get outputs(){if(!this.exists)return{};let e={};return(this.stack.Outputs||[]).forEach(n=>{e[n.OutputKey]=n.OutputValue}),e}get stackStatus(){return this.exists?Zh.StackStatus.fromStackDescription(this.stack):new Zh.StackStatus("NOT_FOUND","Stack not found during lookup")}get tags(){var e;return((e=this.stack)==null?void 0:e.Tags)||[]}get parameterNames(){return Object.keys(this.parameters)}get parameters(){if(!this.exists)return{};let e={};for(let n of this.stack.Parameters??[])e[n.ParameterKey]=n.ParameterValue;return e}get terminationProtection(){var e;return(e=this.stack)==null?void 0:e.EnableTerminationProtection}assertExists(){if(!this.exists)throw new Error(`No stack named '${this.stackName}'`)}};X.CloudFormationStack=Ge;async function xS(t,e,n,{fetchAll:r}){let i=await t.describeChangeSet({StackName:e,ChangeSetName:n}).promise();for(;r&&i.NextToken!=null;){let s=await t.describeChangeSet({StackName:e,ChangeSetName:i.ChangeSetId??n,NextToken:i.NextToken}).promise();s.Changes!=null&&(i.Changes=i.Changes!=null?i.Changes.concat(s.Changes):s.Changes),i.NextToken=s.NextToken}return i}async function Jh(t,e=5e3){for(;;){let n=await t();if(n===null)return;if(n!==void 0)return n;await new Promise(r=>setTimeout(r,e))}}async function ES(t,e,n,{fetchAll:r}){wn.debug("Waiting for changeset %s on stack %s to finish creating...",n,e);let i=await Jh(async()=>{let s=await xS(t,e,n,{fetchAll:r});if(s.Status==="CREATE_PENDING"||s.Status==="CREATE_IN_PROGRESS"){wn.debug("Changeset %s on stack %s is still creating",n,e);return}if(s.Status==="CREATE_COMPLETE"||Xh(s))return s;throw new Error(`Failed to create ChangeSet ${n} on ${e}: ${s.Status||"NO_STATUS"}, ${s.StatusReason||"no reason provided"}`)});if(!i)throw new Error("Change set took too long to be created; aborting");return i}X.waitForChangeSet=ES;function Xh(t){let e=["The submitted information didn't contain changes.","No updates are to be performed."];return t.Status==="FAILED"&&e.some(n=>(t.StatusReason??"").startsWith(n))}X.changeSetHasNoChanges=Xh;async function SS(t,e){let n=await Yo(t,e);if(!n)return;let r=n.stackStatus;if(r.isFailure)throw new Error(`The stack named ${e} is in a failed state. You may need to delete it from the AWS console : ${r}`);return r.isDeleted?void 0:n}X.waitForStackDelete=SS;async function _S(t,e){let n=await Yo(t,e);if(!n)return;let r=n.stackStatus;if(r.isCreationFailure)throw new Error(`The stack named ${e} failed creation, it may need to be manually deleted from the AWS console: ${r}`);if(!r.isDeploySuccess)throw new Error(`The stack named ${e} failed to deploy: ${r}`);return n}X.waitForStackDeploy=_S;async function Yo(t,e){return wn.debug("Waiting for stack %s to finish creating or updating...",e),Jh(async()=>{let n=await Ge.lookup(t,e);if(!n.exists)return wn.debug("Stack %s does not exist",e),null;let r=n.stackStatus;if(r.isInProgress){wn.debug("Stack %s has an ongoing operation in progress and is not stable (%s)",e,r);return}else r.isReviewInProgress&&wn.debug("Stack %s is in REVIEW_IN_PROGRESS state. Considering this is a stable status (%s)",e,r);return n})}X.stabilizeStack=Yo;var sr=class{constructor(e){this.params=e}static fromTemplate(e){return new sr(e.Parameters||{})}supplyAll(e){return new ar(this.params,e)}updateExisting(e,n){return new ar(this.params,e,n)}};X.TemplateParameters=sr;var ar=class{constructor(e,n,r={}){this.formalParams=e,this.values={},this.apiParameters=[];let i=new Array;for(let[o,c]of Object.entries(this.formalParams)){let l=n[o];if(l!==void 0){this.values[o]=l,this.apiParameters.push({ParameterKey:o,ParameterValue:n[o]});continue}if(o in r){this.values[o]=r[o],this.apiParameters.push({ParameterKey:o,UsePreviousValue:!0});continue}if(c.Default!==void 0){this.values[o]=c.Default;continue}i.push(o)}if(i.length>0)throw new Error(`The following CloudFormation Parameters are missing a value: ${i.join(", ")}`);let s=([o,c])=>this.formalParams[o]===void 0,a=([o,c])=>!!c;for(let[o,c]of Object.entries(n).filter(s).filter(a))this.values[o]=c,this.apiParameters.push({ParameterKey:o,ParameterValue:c})}hasChanges(e){return Object.values(this.formalParams).some(n=>{var r;return n.Type.startsWith("AWS::SSM::Parameter::")&&!((r=n.Description)!=null&&r.includes(wS.SSMPARAM_NO_INVALIDATE))})?"ssm":!!(Object.entries(e).some(([n,r])=>!(n in this.values)||r!==this.values[n])||Object.keys(this.values).some(n=>!(n in e)))}};X.ParameterValues=ar});var Vo=x(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.loadCurrentTemplate=bn.loadCurrentTemplateWithNestedStacks=void 0;var kS=T("path"),OS=lc(),AS=nr(),TS=or();async function IS(t,e,n=!1){let r=await ed(t,e,n),i=await nd(t,e,{generatedTemplate:t.template,deployedTemplate:r,deployedStackName:t.stackName});return{deployedTemplate:r,nestedStackNames:i}}bn.loadCurrentTemplateWithNestedStacks=IS;async function ed(t,e,n=!1){return td(t.stackName,e,n)}bn.loadCurrentTemplate=ed;async function td(t,e,n=!1){let r=e.cloudFormation();return(await TS.CloudFormationStack.lookup(r,t,n)).template()}async function nd(t,e,n){let r=n.deployedStackName?new AS.LazyListStackResources(e,n.deployedStackName):void 0,i={};for(let[s,a]of Object.entries(n.generatedTemplate.Resources??{})){if(!RS(a))continue;let o=a.Metadata["aws:asset:path"],c=await NS(t,o,s,r,e);a.Properties.NestedTemplate=c.generatedTemplate;let l=n.deployedTemplate;l.Resources=l.Resources??{};let u=l.Resources[s]??{};l.Resources[s]=u,u.Type=u.Type??"AWS::CloudFormation::Stack",u.Properties=u.Properties??{},u.Properties.NestedTemplate=c.deployedTemplate,i[s]={nestedStackPhysicalName:c.deployedStackName,nestedChildStackNames:await nd(t,e,c)}}return i}async function NS(t,e,n,r,i){let s=kS.join(t.assembly.directory,e),a=await LS(n,r),o=a==null?void 0:a.slice(a.indexOf("/")+1,a.lastIndexOf("/"));return{generatedTemplate:JSON.parse(OS.readFileSync(s,"utf-8")),deployedTemplate:o?await td(o,i):{},deployedStackName:o}}async function LS(t,e){var n;try{let r=await(e==null?void 0:e.listStackResources());return(n=r==null?void 0:r.find(i=>i.LogicalResourceId===t))==null?void 0:n.PhysicalResourceId}catch(r){if(r.message.startsWith("Stack with id ")&&r.message.endsWith(" does not exist"))return;throw r}}function RS(t){return t.Type==="AWS::CloudFormation::Stack"&&t.Metadata&&t.Metadata["aws:asset:path"]}});var sd=x(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.tryHotswapDeployment=void 0;var Ko=Fd(),Go=ns(),Ho=Et(),PS=zh(),Wo=nr(),CS=Yh(),MS=Vh(),He=wt(),DS=Gh(),FS=Hh(),$S=Wh(),jS=Kh(),qS=Vo();async function BS(t,e,n,r){let i=await t.resolveEnvironment(r.environment),s=(await t.forEnvironment(i,PS.Mode.ForWriting)).sdk,a=new Wo.LazyListStackResources(s,r.stackName),o=new Wo.EvaluateCloudFormationTemplate({template:r.template,parameters:e,account:i.account,region:i.region,partition:(await s.currentAccount()).partition,urlSuffix:p=>s.getEndpointSuffix(p),listStackResources:a}),c=await qS.loadCurrentTemplateWithNestedStacks(r,s),l=Ko.diffTemplate(c.deployedTemplate,r.template),u=await id(l,o,s,c.nestedStackNames);if(u)return await HS(s,u),{noOp:u.length===0,stackArn:n.stackId,outputs:n.outputs}}Hi.tryHotswapDeployment=BS;async function id(t,e,n,r){var l,u;if(t.outputs.differenceCount>0)return;let i=US(t),s=!1,a=[],o=new Array;for(let[p,f]of Object.entries(i)){if(((l=f.newValue)==null?void 0:l.Type)==="AWS::CloudFormation::Stack"&&((u=f.oldValue)==null?void 0:u.Type)==="AWS::CloudFormation::Stack"){let m=await zS(p,f,r,e,n);if(!m)return;o.push(...m);continue}let h=GS(f);h===He.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT?s=!0:h===He.ChangeHotswapImpact.IRRELEVANT||a.push(()=>[FS.isHotswappableLambdaFunctionChange(p,h,e),jS.isHotswappableStateMachineChange(p,h,e),DS.isHotswappableEcsServiceChange(p,h,e),$S.isHotswappableS3BucketDeploymentChange(p,h,e),MS.isHotswappableCodeBuildProjectChange(p,h,e),CS.isHotswappableAppSyncChange(p,h,e)])}let c=[];for(let p of a){let f=await Promise.all(p());c.push(f)}for(let p of c){let f=new Array;for(let h of p)typeof h!="string"&&f.push(h);if(f.length>0){o.push(...f);continue}p.some(h=>h===He.ChangeHotswapImpact.IRRELEVANT)||(s=!0)}return s?void 0:o}function US(t){let e=t.resources.changes,n=rd(e,i=>i.isRemoval),r=rd(e,i=>!i.isRemoval);for(let[i,s]of Object.entries(r))if(s.isAddition){let a=s,o=Object.entries(n).find(([c,l])=>YS(l,a));if(o){let[c,l]=o;r[i]=VS(l,a),delete n[c]}}return{...n,...r}}function rd(t,e){return Object.entries(t).reduce((n,[r,i])=>(e(i)&&(n[r]=i),n),{})}async function zS(t,e,n,r,i){var l,u,p,f,h,m,b,k;let s=n[t].nestedStackPhysicalName;if(!s)return;let a=await r.evaluateCfnExpression((u=(l=e.newValue)==null?void 0:l.Properties)==null?void 0:u.Parameters),o=r.createNestedEvaluateCloudFormationTemplate(new Wo.LazyListStackResources(i,s),(f=(p=e.newValue)==null?void 0:p.Properties)==null?void 0:f.NestedTemplate,a),c=Ko.diffTemplate((m=(h=e.oldValue)==null?void 0:h.Properties)==null?void 0:m.NestedTemplate,(k=(b=e.newValue)==null?void 0:b.Properties)==null?void 0:k.NestedTemplate);return id(c,o,i,n[t].nestedChildStackNames)}function YS(t,e){return t.oldResourceType===e.newResourceType&&JSON.stringify(t.oldProperties)===JSON.stringify(e.newProperties)}function VS(t,e){return new Ko.ResourceDifference(t.oldValue,e.newValue,{resourceType:{oldType:t.oldResourceType,newType:e.newResourceType},propertyDiffs:e.propertyDiffs,otherDiffs:e.otherDiffs})}function GS(t){return!t.newValue||!t.oldValue||t.newValue.Type!==t.oldValue.Type?He.ChangeHotswapImpact.REQUIRES_FULL_DEPLOYMENT:t.newValue.Type==="AWS::CDK::Metadata"?He.ChangeHotswapImpact.IRRELEVANT:{newValue:t.newValue,propertyUpdates:t.propertyUpdates}}async function HS(t,e){return Ho.print(`
${He.ICON} hotswapping resources:`),Promise.all(e.map(n=>WS(t,n)))}async function WS(t,e){let n=`cdk-hotswap/success-${e.service}`;t.appendCustomUserAgent(n);try{for(let r of e.resourceNames)Ho.print(`   ${He.ICON} %s`,Go.bold(r));return await e.apply(t)}finally{for(let r of e.resourceNames)Ho.print(`${He.ICON} %s %s`,Go.bold(r),Go.green("hotswapped!"));t.removeCustomUserAgent(n)}}});var vd=x(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.BOOTSTRAP_VERSION_RESOURCE=Ee.BOOTSTRAP_VERSION_OUTPUT=Ee.BUCKET_DOMAIN_NAME_OUTPUT=Ee.REPOSITORY_NAME_OUTPUT=Ee.BUCKET_NAME_OUTPUT=void 0;Ee.BUCKET_NAME_OUTPUT="BucketName";Ee.REPOSITORY_NAME_OUTPUT="RepositoryName";Ee.BUCKET_DOMAIN_NAME_OUTPUT="BucketDomainName";Ee.BOOTSTRAP_VERSION_OUTPUT="BootstrapVersion";Ee.BOOTSTRAP_VERSION_RESOURCE="CdkBootstrapVersion"});var bd=x(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.ToolkitInfo=xt.DEFAULT_TOOLKIT_STACK_NAME=void 0;var wd=ns(),Bt=Et(),Xo=vd(),XS=or();xt.DEFAULT_TOOLKIT_STACK_NAME="CDKToolkit";var e_=5,Ce=class{constructor(e){this.sdk=e,this.ssmCache=new Map}static determineName(e){return e??xt.DEFAULT_TOOLKIT_STACK_NAME}static async lookup(e,n,r){let i=n.cloudFormation(),s=await XS.stabilizeStack(i,r??xt.DEFAULT_TOOLKIT_STACK_NAME);return s?s.stackStatus.isCreationFailure?(Bt.debug("The environment %s has a CDK toolkit stack (%s) that failed to create. Use %s to try provisioning it again.",e.name,r,wd.blue(`cdk bootstrap "${e.name}"`)),Ce.bootstrapStackNotFoundInfo(n)):new Wi(s,n):(Bt.debug("The environment %s doesn't have the CDK toolkit stack (%s) installed. Use %s to setup your environment for use with the toolkit.",e.name,r,wd.blue(`cdk bootstrap "${e.name}"`)),Ce.bootstrapStackNotFoundInfo(n))}static fromStack(e,n){return new Wi(e,n)}static bootstraplessDeploymentsOnly(e){return new Ki(e,"Trying to perform an operation that requires a bootstrap stack; you should not see this error, this is a bug in the CDK CLI.")}static bootstrapStackNotFoundInfo(e){return new Ki(e,"This deployment requires a bootstrap stack with a known name; pass '--toolkit-stack-name' or switch to using the 'DefaultStackSynthesizer' (see https://docs.aws.amazon.com/cdk/latest/guide/bootstrapping.html)")}static async versionFromSsmParameter(e,n,r){var a,o;let i=r==null?void 0:r.get(n);if(i!==void 0)return i;let s=e.ssm();try{let c=await s.getParameter({Name:n}).promise(),l=parseInt(`${(a=c.Parameter)==null?void 0:a.Value}`,10);if(isNaN(l))throw new Error(`SSM parameter ${n} not a number: ${(o=c.Parameter)==null?void 0:o.Value}`);return r==null||r.set(n,l),l}catch(c){throw c.code==="ParameterNotFound"?new Error(`SSM parameter ${n} not found. Has the environment been bootstrapped? Please run 'cdk bootstrap' (see https://docs.aws.amazon.com/cdk/latest/guide/bootstrapping.html)`):c}}};xt.ToolkitInfo=Ce;var Wi=class extends Ce{constructor(e,n){super(n),this.bootstrapStack=e,this.found=!0}get bucketUrl(){return`https://${this.requireOutput(Xo.BUCKET_DOMAIN_NAME_OUTPUT)}`}get bucketName(){return this.requireOutput(Xo.BUCKET_NAME_OUTPUT)}get version(){return parseInt(this.bootstrapStack.outputs[Xo.BOOTSTRAP_VERSION_OUTPUT]??"0",10)}get parameters(){return this.bootstrapStack.parameters??{}}get terminationProtection(){return this.bootstrapStack.terminationProtection??!1}async validateVersion(e,n){let r=this.version;if(n!==void 0)try{r=await Ce.versionFromSsmParameter(this.sdk,n,this.ssmCache)}catch(i){if(i.code!=="AccessDeniedException"||this.version>=e_)throw i;Bt.warning(`Could not read SSM parameter ${n}: ${i.message}`)}if(e>r)throw new Error(`This CDK deployment requires bootstrap stack version '${e}', found '${r}'. Please run 'cdk bootstrap'.`)}async prepareEcrRepository(e){var a,o;if(!this.sdk)throw new Error("ToolkitInfo needs to have been initialized with an sdk to call prepareEcrRepository");let n=this.sdk.ecr();try{Bt.debug(`${e}: checking if ECR repository already exists`);let l=(a=(await n.describeRepositories({repositoryNames:[e]}).promise()).repositories[0])==null?void 0:a.repositoryUri;if(l)return{repositoryUri:l}}catch(c){if(c.code!=="RepositoryNotFoundException")throw c}Bt.debug(`${e}: creating ECR repository`);let r={Key:"awscdk:asset",Value:"true"},s=(o=(await n.createRepository({repositoryName:e,tags:[r]}).promise()).repository)==null?void 0:o.repositoryUri;if(!s)throw new Error(`CreateRepository did not return a repository URI for ${s}`);return Bt.debug(`${e}: enable image scanning`),await n.putImageScanningConfiguration({repositoryName:e,imageScanningConfiguration:{scanOnPush:!0}}).promise(),{repositoryUri:s}}requireOutput(e){if(!(e in this.bootstrapStack.outputs))throw new Error(`The CDK toolkit stack (${this.bootstrapStack.stackName}) does not have an output named ${e}. Use 'cdk bootstrap' to correct this.`);return this.bootstrapStack.outputs[e]}},Ki=class extends Ce{constructor(e,n){super(e),this.errorMessage=n,this.found=!1}get bootstrapStack(){throw new Error(this.errorMessage)}get bucketUrl(){throw new Error(this.errorMessage)}get bucketName(){throw new Error(this.errorMessage)}get version(){throw new Error(this.errorMessage)}async validateVersion(e,n){if(n===void 0)throw new Error(this.errorMessage);let r;try{r=await Ce.versionFromSsmParameter(this.sdk,n,this.ssmCache)}catch(i){throw i.code!=="AccessDeniedException"?i:(Bt.warning(`Could not read SSM parameter ${n}: ${i.message}`),new Error(`This CDK deployment requires bootstrap stack version '${e}', found an older version. Please run 'cdk bootstrap'.`))}if(e>r)throw new Error(`This CDK deployment requires bootstrap stack version '${e}', found '${r}'. Please run 'cdk bootstrap'.`)}prepareEcrRepository(){throw new Error(this.errorMessage)}}});var ec=K(Ut(),1),tc=K(mi(),1),We=K(Et(),1),Qi=K(eo(),1),xn=K(rs(),1);var od=K(Ut(),1);import KS from"fs/promises";import i0 from"crypto";var bi=new Uint8Array(256),wi=bi.length;function to(){return wi>bi.length-16&&(i0.randomFillSync(bi),wi=0),bi.slice(wi,wi+=16)}var ne=[];for(let t=0;t<256;++t)ne.push((t+256).toString(16).slice(1));function zf(t,e=0){return(ne[t[e+0]]+ne[t[e+1]]+ne[t[e+2]]+ne[t[e+3]]+"-"+ne[t[e+4]]+ne[t[e+5]]+"-"+ne[t[e+6]]+ne[t[e+7]]+"-"+ne[t[e+8]]+ne[t[e+9]]+"-"+ne[t[e+10]]+ne[t[e+11]]+ne[t[e+12]]+ne[t[e+13]]+ne[t[e+14]]+ne[t[e+15]]).toLowerCase()}import s0 from"crypto";var no={randomUUID:s0.randomUUID};function a0(t,e,n){if(no.randomUUID&&!e&&!t)return no.randomUUID();t=t||{};let r=t.random||(t.rng||to)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return zf(r)}var ro=a0;var cd=K(Yf(),1),B=K(Et(),1),ld=K(Io(),1),Zo=K(qh(),1),Jo=K(eo(),1),ud=K(Bh(),1),pd=K(nr(),1),fd=K(sd(),1),le=K(or(),1);async function cr(t){try{return await t()}catch(e){if(e.code==="ThrottlingException"&&e.message==="Rate exceeded"||e.code==="Throttling"&&e.message==="Rate exceeded"||e.code==="TooManyRequestsException"&&e.message==="Too Many Requests"||e.code==="OperationAbortedException"||e.code==="TimeoutError"||e.code==="NetworkingError")return await cr(t);throw e}}var ad=50;async function hd(t){let e=t.stack,n=t.resolvedEnvironment;t.sdk.appendCustomUserAgent(t.extraUserAgent);let r=t.sdk.cloudFormation(),i=t.deployName||e.stackName,s=await cr(()=>le.CloudFormationStack.lookup(r,i));if(s.stackStatus.isCreationFailure){(0,B.debug)(`Found existing stack ${i} that had previously failed creation. Deleting it before attempting to re-create it.`),await r.deleteStack({StackName:i}).promise();let h=await(0,le.waitForStackDelete)(r,i);if(h&&h.stackStatus.name!=="DELETE_COMPLETE")throw new Error(`Failed deleting stack ${i} that had previously failed creation (current state: ${h.stackStatus})`);s=le.CloudFormationStack.doesNotExist(r,i)}let a=new Zo.AssetManifestBuilder,o=await(0,cd.addMetadataAssetsToManifest)(e,a,t.toolkitInfo,t.reuseAssets),c={...t.parameters,...o},l=le.TemplateParameters.fromTemplate(e.template),u=t.usePreviousParameters?l.updateExisting(c,s.parameters):l.supplyAll(c);if(await QS(t,s,u.hasChanges(s.parameters)))return(0,B.debug)(`${i}: skipping deployment (use --force to override)`),t.hotswap,{noOp:!0,outputs:s.outputs,stackArn:s.stackId};(0,B.debug)(`${i}: deploying...`);let p=await dd(e,t.resolvedEnvironment,a,t.toolkitInfo,t.sdk,t.overrideTemplate);if(await(0,Jo.publishAssets)(a.toManifest(e.assembly.directory),t.sdkProvider,n,{parallel:t.assetParallelism}),t.hotswap){try{let h=await(0,fd.tryHotswapDeployment)(t.sdkProvider,o,s,e);if(h)return h;(0,B.print)("Could not perform a hotswap deployment, as the stack %s contains non-Asset changes",e.displayName)}catch(h){if(!(h instanceof pd.CfnEvaluationException))throw h;(0,B.print)("Could not perform a hotswap deployment, because the CloudFormation template could not be resolved: %s",h.message)}(0,B.print)("Falling back to doing a full deployment"),t.sdk.appendCustomUserAgent("cdk-hotswap/fallback")}return new Qo(t,s,e,u,p).performDeployment()}var Qo=class{options;cloudFormationStack;stackArtifact;stackParams;bodyParameter;cfn;stackName;update;verb;uuid;constructor(e,n,r,i,s){this.options=e,this.cloudFormationStack=n,this.stackArtifact=r,this.stackParams=i,this.bodyParameter=s,this.cfn=e.sdk.cloudFormation(),this.stackName=e.deployName??r.stackName,this.update=n.exists&&n.stackStatus.name!=="REVIEW_IN_PROGRESS",this.verb=this.update?"update":"create",this.uuid=ro()}async performDeployment(){let e=this.options.deploymentMethod??{method:"change-set"};if(e.method==="direct"&&this.options.resourcesToImport)throw new Error("Importing resources requires a changeset deployment");switch(e.method){case"change-set":return this.changeSetDeployment(e);case"direct":return this.directDeployment()}}async changeSetDeployment(e){let n=e.changeSetName??"cdk-deploy-change-set",r=e.execute??!0,i=await this.createChangeSet(n,r);return await this.updateTerminationProtection(),(0,le.changeSetHasNoChanges)(i)?((0,B.debug)("No changes are to be performed on %s.",this.stackName),r&&((0,B.debug)("Deleting empty change set %s",i.ChangeSetId),await this.cfn.deleteChangeSet({StackName:this.stackName,ChangeSetName:n}).promise()),{noOp:!0,outputs:this.cloudFormationStack.outputs,stackArn:i.StackId}):r?this.executeChangeSet(i):((0,B.print)("Changeset %s created and waiting in review for manual execution (--no-execute)",i.ChangeSetId),{noOp:!1,outputs:this.cloudFormationStack.outputs,stackArn:i.StackId})}async createChangeSet(e,n){await this.cleanupOldChangeset(e),(0,B.debug)(`Attempting to create ChangeSet with name ${e} to ${this.verb} stack ${this.stackName}`);let r=await this.cfn.createChangeSet({StackName:this.stackName,ChangeSetName:e,ChangeSetType:this.options.resourcesToImport?"IMPORT":this.update?"UPDATE":"CREATE",ResourcesToImport:this.options.resourcesToImport,Description:`CDK Changeset for execution ${this.uuid}`,ClientToken:`create${this.uuid}`,...this.commonPrepareOptions()}).promise();return(0,B.debug)("Initiated creation of changeset: %s; waiting for it to finish creating...",r.Id),(0,le.waitForChangeSet)(this.cfn,this.stackName,e,{fetchAll:n})}async executeChangeSet(e){(0,B.debug)("Initiating execution of changeset %s on stack %s",e.ChangeSetId,this.stackName),await this.cfn.executeChangeSet({StackName:this.stackName,ChangeSetName:e.ChangeSetName,ClientRequestToken:`exec${this.uuid}`,...this.commonExecuteOptions()}).promise(),(0,B.debug)("Execution of changeset %s on stack %s has started; waiting for the update to complete...",e.ChangeSetId,this.stackName);let n=(e.Changes??[]).length+(this.update?1:0);return this.monitorDeployment(e.CreationTime,n)}async cleanupOldChangeset(e){this.cloudFormationStack.exists&&((0,B.debug)(`Removing existing change set with name ${e} if it exists`),await this.cfn.deleteChangeSet({StackName:this.stackName,ChangeSetName:e}).promise())}async updateTerminationProtection(){let e=this.stackArtifact.terminationProtection??!1;!!this.cloudFormationStack.terminationProtection!==e&&((0,B.debug)("Updating termination protection from %s to %s for stack %s",this.cloudFormationStack.terminationProtection,e,this.stackName),await this.cfn.updateTerminationProtection({StackName:this.stackName,EnableTerminationProtection:e}).promise(),(0,B.debug)("Termination protection updated to %s for stack %s",e,this.stackName))}async directDeployment(){let e=new Date;if(this.update){if(await this.cfn.updateStack({StackName:this.stackName,ClientRequestToken:`update${this.uuid}`,...this.commonPrepareOptions(),...this.commonExecuteOptions()}).promise(),this.options.noMonitor)return;let n=await this.monitorDeployment(e,void 0);return await this.updateTerminationProtection(),n}else{let n=this.stackArtifact.terminationProtection??!1;return await this.cfn.createStack({StackName:this.stackName,ClientRequestToken:`create${this.uuid}`,...n?{EnableTerminationProtection:!0}:void 0,...this.commonPrepareOptions(),...this.commonExecuteOptions()}).promise(),this.options.noMonitor?void 0:this.monitorDeployment(e,void 0)}}async monitorDeployment(e,n){let r=this.cloudFormationStack;try{let i=await(0,le.waitForStackDeploy)(this.cfn,this.stackName);if(!i)throw new Error("Stack deploy failed (the stack disappeared while we were deploying it)");r=i}catch(i){throw new Error(yd(i.message))}finally{}return(0,B.debug)("Stack %s has completed updating",this.stackName),{noOp:!1,outputs:r.outputs,stackArn:r.stackId}}commonPrepareOptions(){return{Capabilities:["CAPABILITY_IAM","CAPABILITY_NAMED_IAM","CAPABILITY_AUTO_EXPAND"],NotificationARNs:this.options.notificationArns,Parameters:this.stackParams.apiParameters,RoleARN:this.options.roleArn,TemplateBody:this.bodyParameter.TemplateBody,TemplateURL:this.bodyParameter.TemplateURL,Tags:this.options.tags}}commonExecuteOptions(){let e=this.options.rollback===!1;return{StackName:this.stackName,...e?{DisableRollback:!0}:void 0}}};async function dd(t,e,n,r,i,s){if(t.stackTemplateAssetObjectUrl&&!s)return{TemplateURL:JS(t.stackTemplateAssetObjectUrl,e,i)};let a=(0,ld.toYAML)(s??t.template);if(a.length<=ad*1024)return{TemplateBody:a};if(!r.found)throw(0,B.error)(`The template for stack "${t.displayName}" is ${Math.round(a.length/1024)}KiB. Templates larger than ${ad}KiB must be uploaded to S3.
Run the following command in order to setup an S3 bucket in this environment, and then re-deploy:

`,ac(`	$ cdk bootstrap ${e.name}
`)),new Error('Template too large to deploy ("cdk bootstrap" is required)');let o=(0,ud.contentHash)(a),c=`cdk/${t.id}/${o}.yml`,l=t.templateFile;s&&(l=`${t.templateFile}-${o}.yaml`,await KS.writeFile(l,a,{encoding:"utf-8"})),n.addFileAsset(o,{path:l},{bucketName:r.bucketName,objectKey:c});let u=`${r.bucketUrl}/${c}`;return(0,B.debug)("Storing template in S3 at:",u),{TemplateURL:u}}async function md(t,e,n,r,i,s){let a=Object.create(t,{stackTemplateAssetObjectUrl:{value:void 0}}),o=new Zo.AssetManifestBuilder,c=await dd(a,e,o,n,i,s),l=o.toManifest(t.assembly.directory);return await(0,Jo.publishAssets)(l,r,e,{quiet:!0}),c}async function gd(t){let e=t.deployName||t.stack.stackName,n=t.sdk.cloudFormation();if((await le.CloudFormationStack.lookup(n,e)).exists)try{await n.deleteStack({StackName:e,RoleARN:t.roleArn}).promise();let i=await(0,le.waitForStackDelete)(n,e);if(i&&i.stackStatus.name!=="DELETE_COMPLETE")throw new Error(`Failed to destroy ${e}: ${i.stackStatus}`)}catch(i){throw new Error(yd(i.message))}finally{}}async function QS(t,e,n){var i;let r=t.deployName||t.stack.stackName;return(0,B.debug)(`${r}: checking if we can skip deploy`),t.force?((0,B.debug)(`${r}: forced deployment`),!1):((i=t.deploymentMethod)==null?void 0:i.method)==="change-set"&&t.deploymentMethod.execute===!1?((0,B.debug)(`${r}: --no-execute, always creating change set`),!1):e.exists?e.stackStatus.isInProgress?((0,B.debug)(`${r}: stack is busy`),!1):JSON.stringify(t.stack.template)!==JSON.stringify(await e.template())?((0,B.debug)(`${r}: template has changed`),!1):ZS(e.tags,t.tags??[])?!!t.stack.terminationProtection!=!!e.terminationProtection?((0,B.debug)(`${r}: termination protection has been updated`),!1):n?(n==="ssm"?(0,B.debug)(`${r}: some parameters come from SSM so we have to assume they may have changed`):(0,B.debug)(`${r}: parameters have changed`),!1):e.stackStatus.isFailure?((0,B.debug)(`${r}: stack is in a failure state`),!1):!0:((0,B.debug)(`${r}: tags have changed`),!1):((0,B.debug)(`${r}: no existing stack`),!1)}function ZS(t,e){if(t.length!==e.length)return!1;for(let n of t){let r=e.find(i=>i.Key===n.Key);if(!r||r.Value!==n.Value)return!1}return!0}function JS(t,e,n){let r="**DONOTUSE**";if(t=od.EnvironmentPlaceholders.replace(t,{accountId:e.account,region:e.region,partition:r}),t.indexOf(r)>-1)throw new Error("Cannot use '${AWS::Partition}' in the 'stackTemplateAssetObjectUrl' field");let i=t.match(/s3:\/\/([^/]+)\/(.*)$/);if(!i)return t;let s=i[1],a=i[2],o=n.getEndpointSuffix(e.region);return`https://s3.${e.region}.${o}/${s}/${a}`}function yd(t,e){return e&&e.length>0?`${t}: ${e.join(", ")}`:t}var Zi=K(Vo(),1),lr=K(bd(),1),Ed=K(or(),1),nc=K(jd(),1);async function t_(t,e){var a,o,c,l,u;let n=await t.resolveEnvironment(e.environment),r=await(0,nc.replaceEnvPlaceholders)({lookupRoleArn:(a=e.lookupRole)==null?void 0:a.arn},n,t),i=`Could not assume ${r.lookupRoleArn}, proceeding anyway.`,s=`(To get rid of this warning, please upgrade to bootstrap version >= ${(o=e.lookupRole)==null?void 0:o.requiresBootstrapStackVersion})`;try{let p=await t.forEnvironment(n,xn.Mode.ForReading,{assumeRoleArn:r.lookupRoleArn,assumeRoleExternalId:(c=e.lookupRole)==null?void 0:c.assumeRoleExternalId});if(p.didAssumeRole&&((l=e.lookupRole)!=null&&l.bootstrapStackVersionSsmParameter)&&e.lookupRole.requiresBootstrapStackVersion){let f=await lr.ToolkitInfo.versionFromSsmParameter(p.sdk,e.lookupRole.bootstrapStackVersionSsmParameter);if(f<e.lookupRole.requiresBootstrapStackVersion)throw new Error(`Bootstrap stack version '${e.lookupRole.requiresBootstrapStackVersion}' is required, found version '${f}'.`)}else!p.didAssumeRole&&((u=e.lookupRole)!=null&&u.requiresBootstrapStackVersion)&&(0,We.warning)(s);return{...p,resolvedEnvironment:n}}catch(p){throw(0,We.debug)(p),e.lookupRole&&e.lookupRole.requiresBootstrapStackVersion&&((0,We.warning)(i),(0,We.warning)(s)),p}}var xd=class{sdkProvider;constructor(e){this.sdkProvider=e.sdkProvider}async readCurrentTemplateWithNestedStacks(e,n=!1){let r=(await this.prepareSdkWithLookupOrDeployRole(e)).stackSdk;return(await(0,Zi.loadCurrentTemplateWithNestedStacks)(e,r,n)).deployedTemplate}async readCurrentTemplate(e){(0,We.debug)(`Reading existing template for stack ${e.displayName}.`);let n=(await this.prepareSdkWithLookupOrDeployRole(e)).stackSdk;return(0,Zi.loadCurrentTemplate)(e,n)}async resourceIdentifierSummaries(e,n){(0,We.debug)(`Retrieving template summary for stack ${e.displayName}.`);let{stackSdk:r,resolvedEnvironment:i}=await this.prepareSdkFor(e,void 0,xn.Mode.ForReading),s=r.cloudFormation(),a=await lr.ToolkitInfo.lookup(i,r,n),o=await md(e,i,a,this.sdkProvider,r),c=await s.getTemplateSummary(o).promise();return c.ResourceIdentifierSummaries||(0,We.debug)('GetTemplateSummary API call did not return "ResourceIdentifierSummaries"'),c.ResourceIdentifierSummaries??[]}async deployStack(e){let n=e.deploymentMethod;if(e.changeSetName||e.execute!==void 0){if(n)throw new Error("You cannot supply both 'deploymentMethod' and 'changeSetName/execute'. Supply one or the other.");n={method:"change-set",changeSetName:e.changeSetName,execute:e.execute}}let{stackSdk:r,resolvedEnvironment:i,cloudFormationRoleArn:s}=await this.prepareSdkFor(e.stack,e.roleArn),a=await cr(()=>lr.ToolkitInfo.lookup(i,r,e.toolkitStackName));return e.resourcesToImport===void 0&&await this.publishStackAssets(e.stack,a,{buildAssets:e.buildAssets??!0,publishOptions:{quiet:e.quiet,parallel:e.assetParallelism}}),await this.validateBootstrapStackVersion(e.stack.stackName,e.stack.requiresBootstrapStackVersion,e.stack.bootstrapStackVersionSsmParameter,a),hd({stack:e.stack,noMonitor:!0,resolvedEnvironment:i,deployName:e.deployName,notificationArns:e.notificationArns,quiet:e.quiet,sdk:r,sdkProvider:this.sdkProvider,roleArn:s,reuseAssets:e.reuseAssets,toolkitInfo:a,tags:e.tags,deploymentMethod:n,force:e.force,parameters:e.parameters,usePreviousParameters:e.usePreviousParameters,progress:e.progress,ci:e.ci,rollback:e.rollback,hotswap:e.hotswap,extraUserAgent:e.extraUserAgent,resourcesToImport:e.resourcesToImport,overrideTemplate:e.overrideTemplate,assetParallelism:e.assetParallelism})}async destroyStack(e){let{stackSdk:n,cloudFormationRoleArn:r}=await this.prepareSdkFor(e.stack,e.roleArn);return gd({sdk:n,roleArn:r,stack:e.stack,deployName:e.deployName,quiet:e.quiet,ci:e.ci})}async stackExists(e){let{stackSdk:n}=await this.prepareSdkFor(e.stack,void 0,xn.Mode.ForReading);return(await Ed.CloudFormationStack.lookup(n.cloudFormation(),e.deployName??e.stack.stackName)).exists}async prepareSdkWithLookupOrDeployRole(e){try{let n=await t_(this.sdkProvider,e);if(n.didAssumeRole)return{resolvedEnvironment:n.resolvedEnvironment,stackSdk:n.sdk}}catch{}return this.prepareSdkFor(e,void 0,xn.Mode.ForReading)}async prepareSdkFor(e,n,r=xn.Mode.ForWriting){if(!e.environment)throw new Error(`The stack ${e.displayName} does not have an environment`);let i=await this.sdkProvider.resolveEnvironment(e.environment),s=await(0,nc.replaceEnvPlaceholders)({assumeRoleArn:e.assumeRoleArn,cloudFormationRoleArn:n??e.cloudFormationExecutionRoleArn},i,this.sdkProvider);return{stackSdk:(await this.sdkProvider.forEnvironment(i,r,{assumeRoleArn:s.assumeRoleArn,assumeRoleExternalId:e.assumeRoleExternalId})).sdk,resolvedEnvironment:i,cloudFormationRoleArn:s.cloudFormationRoleArn}}async buildStackAssets(e){let{stackSdk:n,resolvedEnvironment:r}=await this.prepareSdkFor(e.stack,e.roleArn),i=await lr.ToolkitInfo.lookup(r,n,e.toolkitStackName),s=await this.sdkProvider.resolveEnvironment(e.stack.environment),a=e.stack.dependencies.filter(ec.AssetManifestArtifact.isAssetManifestArtifact);for(let o of a){await this.validateBootstrapStackVersion(e.stack.stackName,o.requiresBootstrapStackVersion,o.bootstrapStackVersionSsmParameter,i);let c=tc.AssetManifest.fromFile(o.file);await(0,Qi.buildAssets)(c,this.sdkProvider,s,e.buildOptions)}}async publishStackAssets(e,n,r={}){let i=await this.sdkProvider.resolveEnvironment(e.environment),s=e.dependencies.filter(ec.AssetManifestArtifact.isAssetManifestArtifact);for(let a of s){await this.validateBootstrapStackVersion(e.stackName,a.requiresBootstrapStackVersion,a.bootstrapStackVersionSsmParameter,n);let o=tc.AssetManifest.fromFile(a.file);await(0,Qi.publishAssets)(o,this.sdkProvider,i,{...r.publishOptions,buildAssets:r.buildAssets??!0})}}async validateBootstrapStackVersion(e,n,r,i){if(n!==void 0)try{await i.validateVersion(n,r)}catch(s){throw new Error(`${e}: ${s.message}`)}}};export{or as a,bd as b,Yf as c,eo as d,qh as e,dd as f,t_ as g,xd as h};
/*! Bundled license information:

archiver/lib/error.js:
  (**
   * Archiver Core
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/lib/core.js:
  (**
   * Archiver Core
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

crc-32/crc32.js:
  (*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com *)

zip-stream/index.js:
  (**
   * ZipStream
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-zip-stream/blob/master/LICENSE}
   * @copyright (c) 2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/zip.js:
  (**
   * ZIP Format Plugin
   *
   * @module plugins/zip
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/tar.js:
  (**
   * TAR Format Plugin
   *
   * @module plugins/tar
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/json.js:
  (**
   * JSON Format Plugin
   *
   * @module plugins/json
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/index.js:
  (**
   * Archiver Vending
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)
*/
